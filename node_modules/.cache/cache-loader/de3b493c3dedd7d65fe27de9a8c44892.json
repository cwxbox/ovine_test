{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\amis\\schema\\api.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\amis\\schema\\api.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzcG9uc2VBZGFwdG9yIH0gZnJvbSAnYW1pcy9saWIvdXRpbHMvYXBpJzsKaW1wb3J0IHsgcXNzdHJpbmdpZnkgfSBmcm9tICdhbWlzL2xpYi91dGlscy9oZWxwZXInOwppbXBvcnQgeyBkYXRhTWFwcGluZywgdG9rZW5pemUgfSBmcm9tICdhbWlzL2xpYi91dGlscy90cGwtYnVpbHRpbic7CmltcG9ydCB7IGNsb25lRGVlcCwgaXNFbXB0eSwgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IHBhcnNlIH0gZnJvbSAncXMnOwppbXBvcnQgeyBhcHAgfSBmcm9tICIuLi8uLi8uLi9hcHAiOwppbXBvcnQgeyBub3JtYWxpemVVcmwgfSBmcm9tICIuLi8uLi8uLi91dGlscy9yZXF1ZXN0IjsKaW1wb3J0IHsgc3RyMmZ1bmN0aW9uIH0gZnJvbSAiLi4vLi4vLi4vdXRpbHMvdG9vbCI7CmV4cG9ydCB2YXIgbGliRmV0Y2hlciA9IGZ1bmN0aW9uIGxpYkZldGNoZXIoYXBpLCBkYXRhKSB7CiAgdmFyIG9wdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgdmFyIGFtaXNBcGkgPSB0eXBlb2YgYXBpID09PSAnc3RyaW5nJyA/IHsKICAgIHVybDogYXBpCiAgfSA6IGlzUGxhaW5PYmplY3QoYXBpKSA/IE9iamVjdC5hc3NpZ24oe30sIGFwaSkgOiB7fTsgLy8g5o+Q56S65LiOIGFtaXMg5LiN5YW85a6555qE5Zyw5pa5CgogIGlmICghYW1pc0FwaS51cmwgfHwgdHlwZW9mIGFtaXNBcGkudXJsICE9PSAnc3RyaW5nJykgewogICAgdGhyb3cgbmV3IEVycm9yKCfor7fmsYLmqKHlnZfkuIDlrpropoHkvKAgdXJsIOWtl+espuS4suagvOW8j+WPguaVsCcpOwogIH0gLy8g5Y676Zmk5pyr5bC+5aSa5L2Z55qEID8g5Y+3CgoKICBhbWlzQXBpLnVybCA9IGFtaXNBcGkudXJsLnJlcGxhY2UoL1w/ezEsfSQvLCAnJyk7IC8vIOa3u+WKoOWPguaVsAoKICBhbWlzQXBpLmFwaSA9IGFtaXNBcGkuYXBpIHx8IGFtaXNBcGkudXJsOwogIGFtaXNBcGkuY29uZmlnID0gb3B0aW9uOwogIGFtaXNBcGkuaXNFbnZGZXRjaGVyID0gdHJ1ZTsKICB2YXIgewogICAgcmVxdWVzdEFkYXB0b3IsCiAgICBhZGFwdG9yLAogICAgb25SZXF1ZXN0LAogICAgb25GYWtlUmVxdWVzdCwKICAgIG9uRXJyb3IKICB9ID0gYW1pc0FwaTsKICB2YXIgewogICAgb25QcmVSZXF1ZXN0LAogICAgb25TdWNjZXNzCiAgfSA9IGFtaXNBcGk7CgogIGlmIChyZXF1ZXN0QWRhcHRvciAmJiAhb25QcmVSZXF1ZXN0KSB7CiAgICBvblByZVJlcXVlc3QgPSByZXF1ZXN0QWRhcHRvcjsKICB9CgogIGlmIChhZGFwdG9yICYmICFvblN1Y2Nlc3MpIHsKICAgIG9uU3VjY2VzcyA9IGFkYXB0b3I7CiAgfSAvLyDmo4DmtYvmmK/lm57osIPlrZfnrKbkuLIg6L2sIEZ1bmN0aW9uCgoKICBpZiAob25GYWtlUmVxdWVzdCAmJiB0eXBlb2Ygb25GYWtlUmVxdWVzdCA9PT0gJ3N0cmluZycpIHsKICAgIGFtaXNBcGkub25GYWtlUmVxdWVzdCA9IHN0cjJmdW5jdGlvbignb25GYWtlUmVxdWVzdCcsIG9uRmFrZVJlcXVlc3QsICdvcHRpb24nKTsKICB9CgogIGlmIChvblByZVJlcXVlc3QgJiYgdHlwZW9mIG9uUHJlUmVxdWVzdCA9PT0gJ3N0cmluZycpIHsKICAgIGFtaXNBcGkub25QcmVSZXF1ZXN0ID0gc3RyMmZ1bmN0aW9uKCdvblByZVJlcXVlc3QnLCBvblByZVJlcXVlc3QsICdvcHRpb24nKTsKICB9CgogIGlmIChvblJlcXVlc3QgJiYgdHlwZW9mIG9uUmVxdWVzdCA9PT0gJ3N0cmluZycpIHsKICAgIGFtaXNBcGkub25SZXF1ZXN0ID0gc3RyMmZ1bmN0aW9uKCdvblJlcXVlc3QnLCBvblJlcXVlc3QsICdvcHRpb24nKTsKICB9CgogIGlmIChvblN1Y2Nlc3MgJiYgdHlwZW9mIG9uU3VjY2VzcyA9PT0gJ3N0cmluZycpIHsKICAgIGFtaXNBcGkub25TdWNjZXNzID0gc3RyMmZ1bmN0aW9uKCdvblN1Y2Nlc3MnLCBvblN1Y2Nlc3MsICdzb3VyY2UnLCAnb3B0aW9uJywgJ3Jlc3BvbnNlJyk7CiAgfQoKICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ3N0cmluZycpIHsKICAgIGFtaXNBcGkub25FcnJvciA9IHN0cjJmdW5jdGlvbignb25FcnJvcicsIG9uRXJyb3IsICdyZXNwb25zZScsICdvcHRpb24nLCAnZXJyb3InKTsKICB9CgogIHZhciB7CiAgICBtZXRob2QsCiAgICB1cmwKICB9ID0gbm9ybWFsaXplVXJsKGFtaXNBcGkudXJsLCBhbWlzQXBpLm1ldGhvZCB8fCBhbWlzQXBpLmNvbmZpZy5tZXRob2QpOwogIGFtaXNBcGkubWV0aG9kID0gbWV0aG9kOwogIGFtaXNBcGkubWFwcGluZ0RhdGEgPSBjbG9uZURlZXAoYW1pc0FwaS5kYXRhIHx8IHt9KTsgLy8g55So5LqO5pig5bCE55qE5Y+C5pWwCgogIGFtaXNBcGkucmF3RGF0YSA9IHt9OyAvLyDnibnmrormg4XlhrUg5LiN5L2c5aSE55CGCgogIGlmICghZGF0YSB8fCBkYXRhIGluc3RhbmNlb2YgRm9ybURhdGEgfHwgZGF0YSBpbnN0YW5jZW9mIEJsb2IgfHwgZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICBhbWlzQXBpLmRhdGEgPSBkYXRhIHx8IHt9OwogIH0gZWxzZSB7CiAgICB2YXIgewogICAgICBhdXRvQXBwZW5kLAogICAgICBpZ25vcmVEYXRhCiAgICB9ID0gb3B0aW9uOwogICAgdmFyIGlkeCA9IHVybC5pbmRleE9mKCc/Jyk7CiAgICB2YXIgaGFzaElkeCA9IHVybC5pbmRleE9mKCcjJyk7CiAgICB2YXIgaGFzU3RyaW5nID0gaGFzaElkeCAhPT0gLTEgPyB1cmwuc3Vic3RyaW5nKGhhc2hJZHgpIDogJyc7IC8vIOivt+axguWOn+Wni+WPguaVsAoKICAgIGFtaXNBcGkucmF3RGF0YSA9IGNsb25lRGVlcChpc0VtcHR5KGRhdGEpID8gZGF0YS5fX3N1cGVyIHx8IHt9IDogZGF0YSk7IC8vIEJVRzog6KGo5Y2V5Lyg5YWlIOm7mOiupCB2YWx1ZTp4eHjlsIblvbHlk43vvIwgcmVxdWVzdCDml7bnmoQg5Lyg5YWlIGRhdGEKCiAgICB2YXIgdXJsTWFwcGluZ0RhdGEgPSBpc0VtcHR5KGRhdGEpICYmICFkYXRhLl9fc3VwZXIgPyBhbWlzQXBpLmRhdGEgfHwge30gOiBkYXRhOyAvLyDkuI4gYW1pcyDpu5jorqTpgLvovpHkv53mjIHkuIDoh7QKCiAgICBpZiAoaWR4ID09PSAtMSkgewogICAgICBhbWlzQXBpLnVybCA9IHRva2VuaXplKHVybCwgdXJsTWFwcGluZ0RhdGEsICd8IHVybF9lbmNvZGUnKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciB1cmxQYXJhbXMgPSBwYXJzZSh1cmwuc3Vic3RyaW5nKGlkeCArIDEsIGhhc2hJZHggIT09IC0xID8gaGFzaElkeCA6IHVuZGVmaW5lZCkpOwogICAgICBhbWlzQXBpLnVybCA9IHRva2VuaXplKHVybC5zdWJzdHJpbmcoMCwgaWR4ICsgMSksIHVybE1hcHBpbmdEYXRhLCAnfCB1cmxfZW5jb2RlJykgKyBxc3N0cmluZ2lmeShkYXRhTWFwcGluZyh1cmxQYXJhbXMsIHVybE1hcHBpbmdEYXRhKSwgYW1pc0FwaS5xc09wdGlvbnMpICsgaGFzU3RyaW5nOwogICAgfQoKICAgIGlmICghaWdub3JlRGF0YSkgewogICAgICBpZiAoYW1pc0FwaS5kYXRhKSB7CiAgICAgICAgYW1pc0FwaS5kYXRhID0gZGF0YU1hcHBpbmcoYW1pc0FwaS5kYXRhLCBkYXRhKTsKICAgICAgfSBlbHNlIGlmICgvUE9TVHxQVVQvLnRlc3QobWV0aG9kKSB8fCAvR0VULy50ZXN0KG1ldGhvZCkgJiYgYXV0b0FwcGVuZCkgewogICAgICAgIGFtaXNBcGkuZGF0YSA9IGNsb25lRGVlcChkYXRhKTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIGFwcC5yZXF1ZXN0KGFtaXNBcGkpLnRoZW4oc291cmNlID0+IHJlc3BvbnNlQWRhcHRvcihzb3VyY2UsIGFtaXNBcGkpKTsKfTs="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/amis/schema/api.js"],"names":["responseAdaptor","qsstringify","dataMapping","tokenize","cloneDeep","isEmpty","isPlainObject","parse","app","normalizeUrl","str2function","libFetcher","api","data","option","amisApi","url","Object","assign","Error","replace","config","isEnvFetcher","requestAdaptor","adaptor","onRequest","onFakeRequest","onError","onPreRequest","onSuccess","method","mappingData","rawData","FormData","Blob","ArrayBuffer","autoAppend","ignoreData","idx","indexOf","hashIdx","hasString","substring","__super","urlMappingData","urlParams","undefined","qsOptions","test","request","then","source"],"mappings":"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","sourcesContent":["import { responseAdaptor } from 'amis/lib/utils/api';\nimport { qsstringify } from 'amis/lib/utils/helper';\nimport { dataMapping, tokenize } from 'amis/lib/utils/tpl-builtin';\nimport { cloneDeep, isEmpty, isPlainObject } from 'lodash';\nimport { parse } from 'qs';\nimport { app } from \"../../../app\";\nimport { normalizeUrl } from \"../../../utils/request\";\nimport { str2function } from \"../../../utils/tool\";\nexport const libFetcher = (api, data, // 数据\noption = {}) => {\n    const amisApi = typeof api === 'string'\n        ? {\n            url: api,\n        }\n        : isPlainObject(api)\n            ? Object.assign({}, api) : {};\n    // 提示与 amis 不兼容的地方\n    if (!amisApi.url || typeof amisApi.url !== 'string') {\n        throw new Error('请求模块一定要传 url 字符串格式参数');\n    }\n    // 去除末尾多余的 ? 号\n    amisApi.url = amisApi.url.replace(/\\?{1,}$/, '');\n    // 添加参数\n    amisApi.api = amisApi.api || amisApi.url;\n    amisApi.config = option;\n    amisApi.isEnvFetcher = true;\n    const { requestAdaptor, adaptor, onRequest, onFakeRequest, onError } = amisApi;\n    let { onPreRequest, onSuccess } = amisApi;\n    if (requestAdaptor && !onPreRequest) {\n        onPreRequest = requestAdaptor;\n    }\n    if (adaptor && !onSuccess) {\n        onSuccess = adaptor;\n    }\n    // 检测是回调字符串 转 Function\n    if (onFakeRequest && typeof onFakeRequest === 'string') {\n        amisApi.onFakeRequest = str2function('onFakeRequest', onFakeRequest, 'option');\n    }\n    if (onPreRequest && typeof onPreRequest === 'string') {\n        amisApi.onPreRequest = str2function('onPreRequest', onPreRequest, 'option');\n    }\n    if (onRequest && typeof onRequest === 'string') {\n        amisApi.onRequest = str2function('onRequest', onRequest, 'option');\n    }\n    if (onSuccess && typeof onSuccess === 'string') {\n        amisApi.onSuccess = str2function('onSuccess', onSuccess, 'source', 'option', 'response');\n    }\n    if (onError && typeof onError === 'string') {\n        amisApi.onError = str2function('onError', onError, 'response', 'option', 'error');\n    }\n    const { method, url } = normalizeUrl(amisApi.url, amisApi.method || amisApi.config.method);\n    amisApi.method = method;\n    amisApi.mappingData = cloneDeep(amisApi.data || {}); // 用于映射的参数\n    amisApi.rawData = {};\n    // 特殊情况 不作处理\n    if (!data || data instanceof FormData || data instanceof Blob || data instanceof ArrayBuffer) {\n        amisApi.data = data || {};\n    }\n    else {\n        const { autoAppend, ignoreData } = option;\n        const idx = url.indexOf('?');\n        const hashIdx = url.indexOf('#');\n        const hasString = hashIdx !== -1 ? url.substring(hashIdx) : '';\n        // 请求原始参数\n        amisApi.rawData = cloneDeep(isEmpty(data) ? data.__super || {} : data);\n        // BUG: 表单传入 默认 value:xxx将影响， request 时的 传入 data\n        const urlMappingData = isEmpty(data) && !data.__super ? amisApi.data || {} : data;\n        // 与 amis 默认逻辑保持一致\n        if (idx === -1) {\n            amisApi.url = tokenize(url, urlMappingData, '| url_encode');\n        }\n        else {\n            const urlParams = parse(url.substring(idx + 1, hashIdx !== -1 ? hashIdx : undefined));\n            amisApi.url =\n                tokenize(url.substring(0, idx + 1), urlMappingData, '| url_encode') +\n                    qsstringify(dataMapping(urlParams, urlMappingData), amisApi.qsOptions) +\n                    hasString;\n        }\n        if (!ignoreData) {\n            if (amisApi.data) {\n                amisApi.data = dataMapping(amisApi.data, data);\n            }\n            else if (/POST|PUT/.test(method) || (/GET/.test(method) && autoAppend)) {\n                amisApi.data = cloneDeep(data);\n            }\n        }\n    }\n    return app.request(amisApi).then((source) => responseAdaptor(source, amisApi));\n};\n"]}]}