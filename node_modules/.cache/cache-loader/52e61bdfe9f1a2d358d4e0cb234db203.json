{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\app\\index.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\app\\index.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCmltcG9ydCB7IEFsZXJ0Q29tcG9uZW50LCBUb2FzdENvbXBvbmVudCwgQ29udGV4dE1lbnUgfSBmcm9tICdhbWlzJzsKaW1wb3J0IGdldCBmcm9tICdsb2Rhc2gvZ2V0JzsKaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgaG90IH0gZnJvbSAncmVhY3QtaG90LWxvYWRlci9yb290JzsKaW1wb3J0IHsgU3dpdGNoLCBSb3V0ZSwgUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IFRoZW1lUHJvdmlkZXIgfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7CmltcG9ydCB7IGFwcCB9IGZyb20gIi4uLy4uL2FwcCI7CmltcG9ydCB7IEFtaXMgfSBmcm9tICIuLi9hbWlzL3NjaGVtYSI7CmltcG9ydCBBc2lkZUxheW91dCBmcm9tICIuLi9hc2lkZV9sYXlvdXQiOwppbXBvcnQgQmFjdFRvcCBmcm9tICIuLi9iYWNrX3RvcCI7CmltcG9ydCB7IG1lc3NhZ2UsIHJvb3RSb3V0ZSwgc3RvcmFnZSB9IGZyb20gIi4uLy4uL2NvbnN0YW50cyI7CmltcG9ydCB7IFByZXN0Um91dGUsIFByaXZhdGVSb3V0ZSB9IGZyb20gIi4uLy4uL3JvdXRlcy9yb3V0ZSI7CmltcG9ydCBHbG9iYWxTdHlsZSBmcm9tICIuLi8uLi9zdHlsZWQvZ2xvYmFsIjsKaW1wb3J0IHsgdXNlSW1tZXIsIHVzZVN1YnNjcmliZXIgfSBmcm9tICIuLi8uLi91dGlscy9ob29rcyI7CmltcG9ydCBsb2dnZXIgZnJvbSAiLi4vLi4vdXRpbHMvbG9nZ2VyIjsKaW1wb3J0IHsgdW5zdWJzY3JpYmVBbGwgfSBmcm9tICIuLi8uLi91dGlscy9tZXNzYWdlIjsKaW1wb3J0IHsgZ2V0U3RvcmUgfSBmcm9tICIuLi8uLi91dGlscy9zdG9yZSI7CmltcG9ydCB7IGpzb24ycmVhY3RGYWN0b3J5IH0gZnJvbSAiLi4vLi4vdXRpbHMvdG9vbCI7CmltcG9ydCB7IEFwcENvbnRleHQsIEFwcENvbnRleHRTdGF0ZSB9IGZyb20gIi4vY29udGV4dCI7CnZhciBsb2cgPSBsb2dnZXIuZ2V0TG9nZ2VyKCdsaWI6Y29tcG9uZW50czphcHAnKTsKdmFyIGoyciA9IGpzb24ycmVhY3RGYWN0b3J5KHsKICByb3V0ZTogUm91dGUsCiAgJ3N3aXRjaC1yb3V0ZSc6IFN3aXRjaCwKICAncHJpdmF0ZS1yb3V0ZSc6IFByaXZhdGVSb3V0ZSwKICAncHJlc2V0LXJvdXRlJzogUHJlc3RSb3V0ZSwKICAnYXNpZGUtbGF5b3V0JzogQXNpZGVMYXlvdXQsCiAgJ2FtaXMtcmVuZGVyJzogQW1pcwp9KTsKdmFyIGNhY2hlUm91dGVUYWJzID0gZ2V0U3RvcmUoc3RvcmFnZS5lbmFibGVSb3V0ZVRhYnMpOwoKdmFyIEFwcENvbXBvbmVudCA9ICgpID0+IHsKICB2YXIgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VJbW1lcih7CiAgICBsb2NhbGU6IGdldFN0b3JlKHN0b3JhZ2UuYXBwTG9jYWxlKSB8fCBhcHAuYW1pcy5sb2NhbGUgfHwgJ3poLUNOJywKICAgIGVuYWJsZVJvdXRlVGFiczogY2FjaGVSb3V0ZVRhYnMgPT09IG51bGwgPyB0cnVlIDogY2FjaGVSb3V0ZVRhYnMsCiAgICB0aGVtZTogYXBwLnRoZW1lLmdldFRoZW1lKCkubmFtZQogIH0pOwogIHZhciB7CiAgICB0aGVtZQogIH0gPSBzdGF0ZTsKICB2YXIgY29udGV4dFN0YXRlID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSksIHsKICAgIHNldENvbnRleHQ6IHNldFN0YXRlCiAgfSk7CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHZhciBfYTsKCiAgICBsb2cubG9nKCdBcHAgTW91bnRlZC4nKTsKICAgIHZhciBjdXJyUm91dGUgPSBhcHAucm91dGVySGlzdG9yeS5sb2NhdGlvbi5wYXRobmFtZTsKICAgIHZhciB7CiAgICAgIGxvZ2luUm91dGUKICAgIH0gPSBhcHAuY29uc3RhbnRzOyAvLyDnrKzkuIDmrKHov5vlhaXnmbvlvZXpobXpnaLml7Yg6YeN5a6a5ZCR5Yiw6aaW6aG16L+b6KGMIOmJtOadgwoKICAgIGlmIChsb2dpblJvdXRlID09PSBjdXJyUm91dGUpIHsKICAgICAgYXBwLnJvdXRlckhpc3RvcnkucmVwbGFjZShyb290Um91dGUpOwogICAgfQoKICAgIHZhciBvbkFwcE1vdW50ZWQgPSAoX2EgPSBhcHAuaG9vaykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9uQXBwTW91bnRlZDsKCiAgICBpZiAob25BcHBNb3VudGVkKSB7CiAgICAgIG9uQXBwTW91bnRlZCgpOwogICAgfQoKICAgIHJldHVybiAoKSA9PiB7CiAgICAgIGlmICghcHJvY2Vzcy5lbnYuSE9UKSB7CiAgICAgICAgdW5zdWJzY3JpYmVBbGwoKTsKICAgICAgfQogICAgfTsKICB9LCBbXSk7CiAgdXNlU3Vic2NyaWJlcihbbWVzc2FnZS5hcHBUaGVtZSwgbWVzc2FnZS5hcHBMb2NhbGVdLCAobmV3VmFsdWUsIGtleSkgPT4gewogICAgc2V0U3RhdGUoZCA9PiB7CiAgICAgIHN3aXRjaCAoa2V5KSB7CiAgICAgICAgY2FzZSBtZXNzYWdlLmFwcFRoZW1lOgogICAgICAgICAgZC50aGVtZSA9IG5ld1ZhbHVlOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgbWVzc2FnZS5hcHBMb2NhbGU6CiAgICAgICAgICBkLmxvY2FsZSA9IG5ld1ZhbHVlOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgIH0KICAgIH0pOwogIH0pOwoKICB2YXIgZ2V0VGhlbWUgPSAoKSA9PiB7CiAgICB2YXIgdGhlbWVzID0gYXBwLnRoZW1lLmdldEFsbFRoZW1lcygpOwogICAgdmFyIGFwcFRoZW1lID0gdGhlbWVzW3RoZW1lXTsKCiAgICBpZiAoIWFwcFRoZW1lKSB7CiAgICAgIGxvZy53YXJuKCJhcHBUaGVtZSBcdTRFMERcdTU3MjggXHU0RTNCXHU5ODk4XHU1MjE3XHU4ODY4XHU0RTJEOiAiLmNvbmNhdChPYmplY3Qua2V5cyh0aGVtZXMpLCAiLCBcdTVERjJcdTdFQ0ZcdTgxRUFcdTUyQThcdThCQkVcdTdGNkVcdTRFM0EgZGVmYXVsdCBcdTRFM0JcdTk4OTgiKSk7CiAgICB9CgogICAgcmV0dXJuIGFwcFRoZW1lIHx8IGdldCh0aGVtZXMsICdkZWZhdWx0Jywge30pOwogIH07CgogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZXIsIHsKICAgIGhpc3Rvcnk6IGFwcC5yb3V0ZXJIaXN0b3J5CiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9hc3RDb21wb25lbnQsIHsKICAgIGNsb3NlQnV0dG9uOiB0cnVlLAogICAgdGhlbWU6IHRoZW1lLAogICAgdGltZW91dDogYXBwLmNvbnN0YW50cy50b2FzdER1cmF0aW9uLAogICAgY2xhc3NOYW1lOiAibS10LXhsIgogIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBbGVydENvbXBvbmVudCwgewogICAgdGhlbWU6IHRoZW1lCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbnRleHRNZW51LCB7CiAgICB0aGVtZTogdGhlbWUKICB9KSwgYXBwLmNvbnN0YW50cy5lbmFibGVCYWNrVG9wICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJhY3RUb3AsIG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBcHBDb250ZXh0LlByb3ZpZGVyLCB7CiAgICB2YWx1ZTogY29udGV4dFN0YXRlCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGhlbWVQcm92aWRlciwgewogICAgdGhlbWU6IGdldFRoZW1lKCkKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChHbG9iYWxTdHlsZSwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN3aXRjaCwgbnVsbCwgajJyKGFwcC5lbnRyeSkpKSkpOwp9OwoKX19zaWduYXR1cmVfXyhBcHBDb21wb25lbnQsICJ1c2VJbW1lcntbc3RhdGUsIHNldFN0YXRlXX1cbnVzZUVmZmVjdHt9XG51c2VTdWJzY3JpYmVye30iLCAoKSA9PiBbdXNlSW1tZXIsIHVzZVN1YnNjcmliZXJdKTsKCmV4cG9ydCB2YXIgQXBwID0gaG90KEFwcENvbXBvbmVudCk7CjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHJlYWN0SG90TG9hZGVyID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQgOiB1bmRlZmluZWQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGxvZywgImxvZyIsICJDOlxcVXNlcnNcXGN3eFxcRGVza3RvcFxcZWRpdG9yLWRlbW9cXG5vZGVfbW9kdWxlc1xcQG92aW5lXFxjb3JlXFxsaWJcXGNvbXBvbmVudHNcXGFwcFxcaW5kZXguanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihqMnIsICJqMnIiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxhcHBcXGluZGV4LmpzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoY2FjaGVSb3V0ZVRhYnMsICJjYWNoZVJvdXRlVGFicyIsICJDOlxcVXNlcnNcXGN3eFxcRGVza3RvcFxcZWRpdG9yLWRlbW9cXG5vZGVfbW9kdWxlc1xcQG92aW5lXFxjb3JlXFxsaWJcXGNvbXBvbmVudHNcXGFwcFxcaW5kZXguanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihBcHBDb21wb25lbnQsICJBcHBDb21wb25lbnQiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxhcHBcXGluZGV4LmpzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoQXBwLCAiQXBwIiwgIkM6XFxVc2Vyc1xcY3d4XFxEZXNrdG9wXFxlZGl0b3ItZGVtb1xcbm9kZV9tb2R1bGVzXFxAb3ZpbmVcXGNvcmVcXGxpYlxcY29tcG9uZW50c1xcYXBwXFxpbmRleC5qcyIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwubGVhdmVNb2R1bGUgOiB1bmRlZmluZWQ7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/app/index.js"],"names":["AlertComponent","ToastComponent","ContextMenu","get","React","useEffect","hot","Switch","Route","Router","ThemeProvider","app","Amis","AsideLayout","BactTop","message","rootRoute","storage","PrestRoute","PrivateRoute","GlobalStyle","useImmer","useSubscriber","logger","unsubscribeAll","getStore","json2reactFactory","AppContext","AppContextState","log","getLogger","j2r","route","cacheRouteTabs","enableRouteTabs","AppComponent","state","setState","locale","appLocale","amis","theme","getTheme","name","contextState","Object","assign","setContext","_a","currRoute","routerHistory","location","pathname","loginRoute","constants","replace","onAppMounted","hook","process","env","HOT","appTheme","newValue","key","d","themes","getAllThemes","warn","keys","createElement","history","closeButton","timeout","toastDuration","className","enableBackTop","Provider","value","entry","App"],"mappings":"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","sourcesContent":["import { AlertComponent, ToastComponent, ContextMenu } from 'amis';\nimport get from 'lodash/get';\nimport React, { useEffect } from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport { Switch, Route, Router } from 'react-router-dom';\nimport { ThemeProvider } from 'styled-components';\nimport { app } from \"../../app\";\nimport { Amis } from \"../amis/schema\";\nimport AsideLayout from \"../aside_layout\";\nimport BactTop from \"../back_top\";\nimport { message, rootRoute, storage } from \"../../constants\";\nimport { PrestRoute, PrivateRoute } from \"../../routes/route\";\nimport GlobalStyle from \"../../styled/global\";\nimport { useImmer, useSubscriber } from \"../../utils/hooks\";\nimport logger from \"../../utils/logger\";\nimport { unsubscribeAll } from \"../../utils/message\";\nimport { getStore } from \"../../utils/store\";\nimport { json2reactFactory } from \"../../utils/tool\";\nimport { AppContext, AppContextState } from \"./context\";\nconst log = logger.getLogger('lib:components:app');\nconst j2r = json2reactFactory({\n    route: Route,\n    'switch-route': Switch,\n    'private-route': PrivateRoute,\n    'preset-route': PrestRoute,\n    'aside-layout': AsideLayout,\n    'amis-render': Amis,\n});\nconst cacheRouteTabs = getStore(storage.enableRouteTabs);\nconst AppComponent = () => {\n    const [state, setState] = useImmer({\n        locale: getStore(storage.appLocale) || app.amis.locale || 'zh-CN',\n        enableRouteTabs: cacheRouteTabs === null ? true : cacheRouteTabs,\n        theme: app.theme.getTheme().name,\n    });\n    const { theme } = state;\n    const contextState = Object.assign(Object.assign({}, state), { setContext: setState });\n    useEffect(() => {\n        var _a;\n        log.log('App Mounted.');\n        const currRoute = app.routerHistory.location.pathname;\n        const { loginRoute } = app.constants;\n        // 第一次进入登录页面时 重定向到首页进行 鉴权\n        if (loginRoute === currRoute) {\n            app.routerHistory.replace(rootRoute);\n        }\n        const onAppMounted = (_a = app.hook) === null || _a === void 0 ? void 0 : _a.onAppMounted;\n        if (onAppMounted) {\n            onAppMounted();\n        }\n        return () => {\n            if (!process.env.HOT) {\n                unsubscribeAll();\n            }\n        };\n    }, []);\n    useSubscriber([message.appTheme, message.appLocale], (newValue, key) => {\n        setState((d) => {\n            switch (key) {\n                case message.appTheme:\n                    d.theme = newValue;\n                    break;\n                case message.appLocale:\n                    d.locale = newValue;\n                    break;\n                default:\n            }\n        });\n    });\n    const getTheme = () => {\n        const themes = app.theme.getAllThemes();\n        const appTheme = themes[theme];\n        if (!appTheme) {\n            log.warn(`appTheme 不在 主题列表中: ${Object.keys(themes)}, 已经自动设置为 default 主题`);\n        }\n        return appTheme || get(themes, 'default', {});\n    };\n    return (React.createElement(Router, { history: app.routerHistory },\n        React.createElement(ToastComponent, { closeButton: true, theme: theme, timeout: app.constants.toastDuration, className: \"m-t-xl\" }),\n        React.createElement(AlertComponent, { theme: theme }),\n        React.createElement(ContextMenu, { theme: theme }),\n        app.constants.enableBackTop && React.createElement(BactTop, null),\n        React.createElement(AppContext.Provider, { value: contextState },\n            React.createElement(ThemeProvider, { theme: getTheme() },\n                React.createElement(GlobalStyle, null),\n                React.createElement(Switch, null, j2r(app.entry))))));\n};\nexport const App = hot(AppComponent);\n"]}]}