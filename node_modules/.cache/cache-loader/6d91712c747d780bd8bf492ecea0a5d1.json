{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\debounce_render\\index.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\debounce_render\\index.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCi8qKgogKiBodHRwczovL2dpdGh1Yi5jb20vcG9kZWZyL3JlYWN0LWRlYm91bmNlLXJlbmRlci9ibG9iL21hc3Rlci9zcmMvaW5kZXguanMKICog6Ziy5q2i57uE5Lu255+t5pe26Ze05YaF6L+e57ut5bm25Y+R5riy5p+TCiAqLwppbXBvcnQgaG9pc3ROb25SZWFjdFN0YXRpY3MgZnJvbSAnaG9pc3Qtbm9uLXJlYWN0LXN0YXRpY3MnOwppbXBvcnQgeyBkZWJvdW5jZSBhcyBsb2Rhc2hEZWJvdW5jZSwgdW5pcXVlSWQgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50LCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7CgpmdW5jdGlvbiBkZWJvdW5jZVJlbmRlcihDb21wb25lbnRUb0RlYm91bmNlLCB3YWl0LCBzZXR0aW5nKSB7CiAgdmFyIERlYm91bmNlQ29tcG9uZW50ID0gQ29tcG9uZW50VG9EZWJvdW5jZTsgLy8gQHRzLWlnbm9yZQoKICBjbGFzcyBEZWJvdW5jZWRDb250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICAgIHRoaXMudXBkYXRlRGVib3VuY2VkID0gbG9kYXNoRGVib3VuY2UodGhpcy5mb3JjZVVwZGF0ZSwgd2FpdCwgc2V0dGluZyk7CiAgICB9CgogICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKCkgewogICAgICB0aGlzLnVwZGF0ZURlYm91bmNlZCgpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIHRoaXMudXBkYXRlRGVib3VuY2VkLmNhbmNlbCgpOwogICAgfQoKICAgIHJlbmRlcigpIHsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERlYm91bmNlQ29tcG9uZW50LCBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb3BzKSk7CiAgICB9CgogICAgLy8gQHRzLWlnbm9yZQogICAgX19yZWFjdHN0YW5kaW5fX3JlZ2VuZXJhdGVCeUV2YWwoa2V5LCBjb2RlKSB7CiAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgdGhpc1trZXldID0gZXZhbChjb2RlKTsKICAgIH0KCiAgfQoKICByZXR1cm4gaG9pc3ROb25SZWFjdFN0YXRpY3MoRGVib3VuY2VkQ29udGFpbmVyLCBEZWJvdW5jZUNvbXBvbmVudCk7Cn0KCmV4cG9ydCB2YXIgdXNlRGVib3VuY2VSZW5kZXIgPSAob3B0aW9uLCBkZWVwcykgPT4gewogIHZhciB7CiAgICBnZXRDb21wb25lbnQsCiAgICB3YWl0LAogICAgc2V0dGluZwogIH0gPSBvcHRpb247CiAgdmFyIFtyZWZyZXNoS2V5LCBzZXRSZWZyZXNoS2V5XSA9IHVzZVN0YXRlKCcnKTsKICB2YXIgcmVmcmVzaFRyaWdnZXIgPSB1c2VSZWYoKTsKICB1c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKCFyZWZyZXNoVHJpZ2dlci5jdXJyZW50KSB7CiAgICAgIHJlZnJlc2hUcmlnZ2VyLmN1cnJlbnQgPSBsb2Rhc2hEZWJvdW5jZSgoKSA9PiB7CiAgICAgICAgc2V0UmVmcmVzaEtleSh1bmlxdWVJZCgpKTsKICAgICAgfSwgd2FpdCwgc2V0dGluZyk7CiAgICB9CgogICAgaWYgKHdhaXQpIHsKICAgICAgcmVmcmVzaFRyaWdnZXIuY3VycmVudCgpOwogICAgfQogIH0sIGRlZXBzKTsKICB2YXIgQ2FjaGVkQ29tcG9uZW50ID0gdXNlTWVtbygoKSA9PiB7CiAgICByZXR1cm4gIXJlZnJlc2hLZXkgPyBudWxsIDogZ2V0Q29tcG9uZW50KCk7CiAgfSwgW3JlZnJlc2hLZXldKTsKICByZXR1cm4gQ2FjaGVkQ29tcG9uZW50Owp9OwoKX19zaWduYXR1cmVfXyh1c2VEZWJvdW5jZVJlbmRlciwgInVzZVN0YXRle1tyZWZyZXNoS2V5LCBzZXRSZWZyZXNoS2V5XSgnJyl9XG51c2VSZWZ7cmVmcmVzaFRyaWdnZXJ9XG51c2VFZmZlY3R7fVxudXNlTWVtb3tDYWNoZWRDb21wb25lbnR9Iik7Cgp2YXIgX2RlZmF1bHQgPSBkZWJvdW5jZVJlbmRlcjsKZXhwb3J0IGRlZmF1bHQgX2RlZmF1bHQ7CjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHJlYWN0SG90TG9hZGVyID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQgOiB1bmRlZmluZWQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGRlYm91bmNlUmVuZGVyLCAiZGVib3VuY2VSZW5kZXIiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxkZWJvdW5jZV9yZW5kZXJcXGluZGV4LmpzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIodXNlRGVib3VuY2VSZW5kZXIsICJ1c2VEZWJvdW5jZVJlbmRlciIsICJDOlxcVXNlcnNcXGN3eFxcRGVza3RvcFxcZWRpdG9yLWRlbW9cXG5vZGVfbW9kdWxlc1xcQG92aW5lXFxjb3JlXFxsaWJcXGNvbXBvbmVudHNcXGRlYm91bmNlX3JlbmRlclxcaW5kZXguanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihfZGVmYXVsdCwgImRlZmF1bHQiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxkZWJvdW5jZV9yZW5kZXJcXGluZGV4LmpzIik7Cn0pKCk7Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciBsZWF2ZU1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5sZWF2ZU1vZHVsZSA6IHVuZGVmaW5lZDsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/debounce_render/index.js"],"names":["hoistNonReactStatics","debounce","lodashDebounce","uniqueId","React","Component","useEffect","useMemo","useRef","useState","debounceRender","ComponentToDebounce","wait","setting","DebounceComponent","DebouncedContainer","constructor","arguments","updateDebounced","forceUpdate","shouldComponentUpdate","componentWillUnmount","cancel","render","createElement","Object","assign","props","useDebounceRender","option","deeps","getComponent","refreshKey","setRefreshKey","refreshTrigger","current","CachedComponent"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA,OAAOA,oBAAP,MAAiC,yBAAjC;AACA,SAASC,QAAQ,IAAIC,cAArB,EAAqCC,QAArC,QAAqD,QAArD;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,SAA3B,EAAsCC,OAAtC,EAA+CC,MAA/C,EAAuDC,QAAvD,QAAuE,OAAvE;;AACA,SAASC,cAAT,CAAwBC,mBAAxB,EAA6CC,IAA7C,EAAmDC,OAAnD,EAA4D;AACxD,MAAMC,iBAAiB,GAAGH,mBAA1B,CADwD,CAExD;;AACA,QAAMI,kBAAN,SAAiCV,SAAjC,CAA2C;AACvCW,IAAAA,WAAW,GAAG;AACV,YAAM,GAAGC,SAAT;AACA,WAAKC,eAAL,GAAuBhB,cAAc,CAAC,KAAKiB,WAAN,EAAmBP,IAAnB,EAAyBC,OAAzB,CAArC;AACH;;AACDO,IAAAA,qBAAqB,GAAG;AACpB,WAAKF,eAAL;AACA,aAAO,KAAP;AACH;;AACDG,IAAAA,oBAAoB,GAAG;AACnB,WAAKH,eAAL,CAAqBI,MAArB;AACH;;AACDC,IAAAA,MAAM,GAAG;AACL,0BAAOnB,KAAK,CAACoB,aAAN,CAAoBV,iBAApB,EAAuCW,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKC,KAAvB,CAAvC,CAAP;AACH;;AAdsC;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAgB3C,SAAO3B,oBAAoB,CAACe,kBAAD,EAAqBD,iBAArB,CAA3B;AACH;;AACD,OAAO,IAAMc,iBAAiB,GAAG,CAACC,MAAD,EAASC,KAAT,KAAmB;AAChD,MAAM;AAAEC,IAAAA,YAAF;AAAgBnB,IAAAA,IAAhB;AAAsBC,IAAAA;AAAtB,MAAkCgB,MAAxC;AACA,MAAM,CAACG,UAAD,EAAaC,aAAb,IAA8BxB,QAAQ,CAAC,EAAD,CAA5C;AACA,MAAMyB,cAAc,GAAG1B,MAAM,EAA7B;AACAF,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI,CAAC4B,cAAc,CAACC,OAApB,EAA6B;AACzBD,MAAAA,cAAc,CAACC,OAAf,GAAyBjC,cAAc,CAAC,MAAM;AAC1C+B,QAAAA,aAAa,CAAC9B,QAAQ,EAAT,CAAb;AACH,OAFsC,EAEpCS,IAFoC,EAE9BC,OAF8B,CAAvC;AAGH;;AACD,QAAID,IAAJ,EAAU;AACNsB,MAAAA,cAAc,CAACC,OAAf;AACH;AACJ,GATQ,EASNL,KATM,CAAT;AAUA,MAAMM,eAAe,GAAG7B,OAAO,CAAC,MAAM;AAClC,WAAO,CAACyB,UAAD,GAAc,IAAd,GAAqBD,YAAY,EAAxC;AACH,GAF8B,EAE5B,CAACC,UAAD,CAF4B,CAA/B;AAGA,SAAOI,eAAP;AACH,CAlBM;;cAAMR,iB;;eAmBElB,c;AAAf;;;;;;;;;;0BAxCSA,c;0BAqBIkB,iB","sourcesContent":["/**\n * https://github.com/podefr/react-debounce-render/blob/master/src/index.js\n * 防止组件短时间内连续并发渲染\n */\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport { debounce as lodashDebounce, uniqueId } from 'lodash';\nimport React, { Component, useEffect, useMemo, useRef, useState } from 'react';\nfunction debounceRender(ComponentToDebounce, wait, setting) {\n    const DebounceComponent = ComponentToDebounce;\n    // @ts-ignore\n    class DebouncedContainer extends Component {\n        constructor() {\n            super(...arguments);\n            this.updateDebounced = lodashDebounce(this.forceUpdate, wait, setting);\n        }\n        shouldComponentUpdate() {\n            this.updateDebounced();\n            return false;\n        }\n        componentWillUnmount() {\n            this.updateDebounced.cancel();\n        }\n        render() {\n            return React.createElement(DebounceComponent, Object.assign({}, this.props));\n        }\n    }\n    return hoistNonReactStatics(DebouncedContainer, DebounceComponent);\n}\nexport const useDebounceRender = (option, deeps) => {\n    const { getComponent, wait, setting } = option;\n    const [refreshKey, setRefreshKey] = useState('');\n    const refreshTrigger = useRef();\n    useEffect(() => {\n        if (!refreshTrigger.current) {\n            refreshTrigger.current = lodashDebounce(() => {\n                setRefreshKey(uniqueId());\n            }, wait, setting);\n        }\n        if (wait) {\n            refreshTrigger.current();\n        }\n    }, deeps);\n    const CachedComponent = useMemo(() => {\n        return !refreshKey ? null : getComponent();\n    }, [refreshKey]);\n    return CachedComponent;\n};\nexport default debounceRender;\n"]}]}