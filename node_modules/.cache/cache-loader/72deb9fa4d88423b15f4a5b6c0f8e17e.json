{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\editor\\lib\\components\\editor\\index.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\editor\\lib\\components\\editor\\index.js","mtime":1618319235155},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCmltcG9ydCBjbHMgZnJvbSAnY2xhc3NuYW1lcyc7CmltcG9ydCB7IHBpY2sgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBvYnNlcnZlciwgaW5qZWN0IH0gZnJvbSAnbW9ieC1yZWFjdCc7CmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgYXBwIH0gZnJvbSAiLi4vLi4vLi4vLi4vY29yZS9saWIvYXBwIjsKaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAiLi4vLi4vYXNzZXRzL3NjcmlwdHMvZWRpdG9yLnZpZXciOwppbXBvcnQgeyBHbG9iYWxFZGl0b3JTdHlsZSB9IGZyb20gIi4vc3R5bGVkIjsKCnZhciBfZGVmYXVsdCA9IGluamVjdCgnc3RvcmUnKShvYnNlcnZlcihfX3NpZ25hdHVyZV9fKHByb3BzID0+IHsKICB2YXIgewogICAgaXNQcmV2aWV3LAogICAgaXNNb2JpbGUsCiAgICBzZXRFZGl0b3JJbnN0YW5jZSwKICAgIHNldExhc3RTYXZlZFNjaGVtYSwKICAgIG9wdGlvbgogIH0gPSBwcm9wcy5zdG9yZTsKICB2YXIgewogICAgZWRpdG9yU3RvcmUKICB9ID0gcHJvcHM7CiAgdmFyICRlZGl0b3IgPSB1c2VSZWYobnVsbCk7CiAgdmFyIGVkaXRvclByb3BzID0gcGljayhvcHRpb24sIFsnYXV0b0ZvY3VzJywgJ3NjaGVtYUZpbHRlcicsICdjbGFzc05hbWUnLCAnYW1pc0VudicsICdjdHgnLCAncGx1Z2lucycsICdpZnJhbWVVcmwnLCAnaXNIaWRkZW5Qcm9wcyddKTsKICB2YXIgewogICAgY2xhc3NOYW1lCiAgfSA9IGVkaXRvclByb3BzOwogIHZhciBlZGl0b3JEYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb24uZGF0YSksIGFwcC5hbWlzLmNvbnN0YW50cyk7CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHNldEVkaXRvckluc3RhbmNlKCRlZGl0b3IuY3VycmVudCk7IC8vIOS4u+imgeeUqOWOhuWPsuiusOW9leabtOaWsAoKICAgIHNldExhc3RTYXZlZFNjaGVtYShlZGl0b3JTdG9yZS5zY2hlbWEpOyAvLyDnrKzkuIDmrKHlrZjlgqjliJ3lp4vljJbmlbDmja4KCiAgICByZXR1cm4gKCkgPT4gewogICAgICBzZXRFZGl0b3JJbnN0YW5jZSgpOwogICAgfTsKICB9LCBbXSk7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6IGNscyhjbGFzc05hbWUsIHsKICAgICAgJ2Qtbm9uZSc6IGlzUHJldmlldwogICAgfSkKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChHbG9iYWxFZGl0b3JTdHlsZSwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEVkaXRvciwgT2JqZWN0LmFzc2lnbih7fSwgZWRpdG9yUHJvcHMsIHsKICAgIGNsYXNzTmFtZTogImlzLWZpeGVkIiwKICAgIHJlZjogJGVkaXRvciwKICAgIGRhdGE6IGVkaXRvckRhdGEsCiAgICBwcmV2aWV3OiBmYWxzZSwKICAgIGlzTW9iaWxlOiBpc01vYmlsZSwKICAgIHRoZW1lOiBhcHAudGhlbWUuZ2V0TmFtZSgpLAogICAgdmFsdWU6IGVkaXRvclN0b3JlLnNjaGVtYSwKICAgIG9uQ2hhbmdlOiB2YWx1ZSA9PiBlZGl0b3JTdG9yZS51cGRhdGVTY2hlbWEodmFsdWUpCiAgfSkpKTsKfSwgInVzZVJlZnskZWRpdG9yfVxudXNlRWZmZWN0e30iKSkpOwoKZXhwb3J0IGRlZmF1bHQgX2RlZmF1bHQ7CjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHJlYWN0SG90TG9hZGVyID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQgOiB1bmRlZmluZWQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKF9kZWZhdWx0LCAiZGVmYXVsdCIsICJDOlxcVXNlcnNcXGN3eFxcRGVza3RvcFxcZWRpdG9yLWRlbW9cXG5vZGVfbW9kdWxlc1xcQG92aW5lXFxlZGl0b3JcXGxpYlxcY29tcG9uZW50c1xcZWRpdG9yXFxpbmRleC5qcyIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwubGVhdmVNb2R1bGUgOiB1bmRlZmluZWQ7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/editor/lib/components/editor/index.js"],"names":["cls","pick","observer","inject","React","useEffect","useRef","app","Editor","GlobalEditorStyle","props","isPreview","isMobile","setEditorInstance","setLastSavedSchema","option","store","editorStore","$editor","editorProps","className","editorData","Object","assign","data","amis","constants","current","schema","createElement","ref","preview","theme","getName","value","onChange","updateSchema"],"mappings":";;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,YAAhB;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,YAAjC;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,QAAyC,OAAzC;AACA,SAASC,GAAT,QAAoB,0BAApB;AACA,SAASC,MAAT,QAAuB,kCAAvB;AACA,SAASC,iBAAT,QAAkC,UAAlC;;eACeN,MAAM,CAAC,OAAD,CAAN,CAAgBD,QAAQ,eAAEQ,KAAD,IAAW;AAC/C,MAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,QAAb;AAAuBC,IAAAA,iBAAvB;AAA0CC,IAAAA,kBAA1C;AAA8DC,IAAAA;AAA9D,MAAyEL,KAAK,CAACM,KAArF;AACA,MAAM;AAAEC,IAAAA;AAAF,MAAkBP,KAAxB;AACA,MAAMQ,OAAO,GAAGZ,MAAM,CAAC,IAAD,CAAtB;AACA,MAAMa,WAAW,GAAGlB,IAAI,CAACc,MAAD,EAAS,CAC7B,WAD6B,EAE7B,cAF6B,EAG7B,WAH6B,EAI7B,SAJ6B,EAK7B,KAL6B,EAM7B,SAN6B,EAO7B,WAP6B,EAQ7B,eAR6B,CAAT,CAAxB;AAUA,MAAM;AAAEK,IAAAA;AAAF,MAAgBD,WAAtB;AACA,MAAME,UAAU,GAAGC,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBR,MAAM,CAACS,IAAzB,CAAd,EAA8CjB,GAAG,CAACkB,IAAJ,CAASC,SAAvD,CAAnB;AACArB,EAAAA,SAAS,CAAC,MAAM;AACZQ,IAAAA,iBAAiB,CAACK,OAAO,CAACS,OAAT,CAAjB,CADY,CACwB;;AACpCb,IAAAA,kBAAkB,CAACG,WAAW,CAACW,MAAb,CAAlB,CAFY,CAE4B;;AACxC,WAAO,MAAM;AACTf,MAAAA,iBAAiB;AACpB,KAFD;AAGH,GANQ,EAMN,EANM,CAAT;AAOA,sBAAQT,KAAK,CAACyB,aAAN,CAAoB,KAApB,EAA2B;AAAET,IAAAA,SAAS,EAAEpB,GAAG,CAACoB,SAAD,EAAY;AAAE,gBAAUT;AAAZ,KAAZ;AAAhB,GAA3B,eACJP,KAAK,CAACyB,aAAN,CAAoBpB,iBAApB,EAAuC,IAAvC,CADI,eAEJL,KAAK,CAACyB,aAAN,CAAoBrB,MAApB,EAA4Bc,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,WAAlB,EAA+B;AAAEC,IAAAA,SAAS,EAAE,UAAb;AAAyBU,IAAAA,GAAG,EAAEZ,OAA9B;AAAuCM,IAAAA,IAAI,EAAEH,UAA7C;AAAyDU,IAAAA,OAAO,EAAE,KAAlE;AAAyEnB,IAAAA,QAAQ,EAAEA,QAAnF;AAA6FoB,IAAAA,KAAK,EAAEzB,GAAG,CAACyB,KAAJ,CAAUC,OAAV,EAApG;AAAyHC,IAAAA,KAAK,EAAEjB,WAAW,CAACW,MAA5I;AAAoJO,IAAAA,QAAQ,EAAGD,KAAD,IAAWjB,WAAW,CAACmB,YAAZ,CAAyBF,KAAzB;AAAzK,GAA/B,CAA5B,CAFI,CAAR;AAGH,CA1BsC,kCAAxB,C;;AAAf","sourcesContent":["import cls from 'classnames';\nimport { pick } from 'lodash';\nimport { observer, inject } from 'mobx-react';\nimport React, { useEffect, useRef } from 'react';\nimport { app } from \"../../../../core/lib/app\";\nimport { Editor } from \"../../assets/scripts/editor.view\";\nimport { GlobalEditorStyle } from \"./styled\";\nexport default inject('store')(observer((props) => {\n    const { isPreview, isMobile, setEditorInstance, setLastSavedSchema, option } = props.store;\n    const { editorStore } = props;\n    const $editor = useRef(null);\n    const editorProps = pick(option, [\n        'autoFocus',\n        'schemaFilter',\n        'className',\n        'amisEnv',\n        'ctx',\n        'plugins',\n        'iframeUrl',\n        'isHiddenProps',\n    ]);\n    const { className } = editorProps;\n    const editorData = Object.assign(Object.assign({}, option.data), app.amis.constants);\n    useEffect(() => {\n        setEditorInstance($editor.current); // 主要用历史记录更新\n        setLastSavedSchema(editorStore.schema); // 第一次存储初始化数据\n        return () => {\n            setEditorInstance();\n        };\n    }, []);\n    return (React.createElement(\"div\", { className: cls(className, { 'd-none': isPreview }) },\n        React.createElement(GlobalEditorStyle, null),\n        React.createElement(Editor, Object.assign({}, editorProps, { className: \"is-fixed\", ref: $editor, data: editorData, preview: false, isMobile: isMobile, theme: app.theme.getName(), value: editorStore.schema, onChange: (value) => editorStore.updateSchema(value) }))));\n}));\n"]}]}