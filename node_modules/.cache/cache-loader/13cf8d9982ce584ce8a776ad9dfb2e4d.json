{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\debounce_render\\index.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\debounce_render\\index.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9wb2RlZnIvcmVhY3QtZGVib3VuY2UtcmVuZGVyL2Jsb2IvbWFzdGVyL3NyYy9pbmRleC5qcwogKiDpmLLmraLnu4Tku7bnn63ml7bpl7TlhoXov57nu63lubblj5HmuLLmn5MKICovCmltcG9ydCBob2lzdE5vblJlYWN0U3RhdGljcyBmcm9tICdob2lzdC1ub24tcmVhY3Qtc3RhdGljcyc7CmltcG9ydCB7IGRlYm91bmNlIGFzIGxvZGFzaERlYm91bmNlLCB1bmlxdWVJZCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQsIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKCmZ1bmN0aW9uIGRlYm91bmNlUmVuZGVyKENvbXBvbmVudFRvRGVib3VuY2UsIHdhaXQsIHNldHRpbmcpIHsKICB2YXIgRGVib3VuY2VDb21wb25lbnQgPSBDb21wb25lbnRUb0RlYm91bmNlOyAvLyBAdHMtaWdub3JlCgogIGNsYXNzIERlYm91bmNlZENvbnRhaW5lciBleHRlbmRzIENvbXBvbmVudCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgICAgdGhpcy51cGRhdGVEZWJvdW5jZWQgPSBsb2Rhc2hEZWJvdW5jZSh0aGlzLmZvcmNlVXBkYXRlLCB3YWl0LCBzZXR0aW5nKTsKICAgIH0KCiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUoKSB7CiAgICAgIHRoaXMudXBkYXRlRGVib3VuY2VkKCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy51cGRhdGVEZWJvdW5jZWQuY2FuY2VsKCk7CiAgICB9CgogICAgcmVuZGVyKCkgewogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRGVib3VuY2VDb21wb25lbnQsIE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvcHMpKTsKICAgIH0KCiAgfQoKICByZXR1cm4gaG9pc3ROb25SZWFjdFN0YXRpY3MoRGVib3VuY2VkQ29udGFpbmVyLCBEZWJvdW5jZUNvbXBvbmVudCk7Cn0KCmV4cG9ydCB2YXIgdXNlRGVib3VuY2VSZW5kZXIgPSAob3B0aW9uLCBkZWVwcykgPT4gewogIHZhciB7CiAgICBnZXRDb21wb25lbnQsCiAgICB3YWl0LAogICAgc2V0dGluZwogIH0gPSBvcHRpb247CiAgdmFyIFtyZWZyZXNoS2V5LCBzZXRSZWZyZXNoS2V5XSA9IHVzZVN0YXRlKCcnKTsKICB2YXIgcmVmcmVzaFRyaWdnZXIgPSB1c2VSZWYoKTsKICB1c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKCFyZWZyZXNoVHJpZ2dlci5jdXJyZW50KSB7CiAgICAgIHJlZnJlc2hUcmlnZ2VyLmN1cnJlbnQgPSBsb2Rhc2hEZWJvdW5jZSgoKSA9PiB7CiAgICAgICAgc2V0UmVmcmVzaEtleSh1bmlxdWVJZCgpKTsKICAgICAgfSwgd2FpdCwgc2V0dGluZyk7CiAgICB9CgogICAgaWYgKHdhaXQpIHsKICAgICAgcmVmcmVzaFRyaWdnZXIuY3VycmVudCgpOwogICAgfQogIH0sIGRlZXBzKTsKICB2YXIgQ2FjaGVkQ29tcG9uZW50ID0gdXNlTWVtbygoKSA9PiB7CiAgICByZXR1cm4gIXJlZnJlc2hLZXkgPyBudWxsIDogZ2V0Q29tcG9uZW50KCk7CiAgfSwgW3JlZnJlc2hLZXldKTsKICByZXR1cm4gQ2FjaGVkQ29tcG9uZW50Owp9OwpleHBvcnQgZGVmYXVsdCBkZWJvdW5jZVJlbmRlcjs="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/debounce_render/index.js"],"names":["hoistNonReactStatics","debounce","lodashDebounce","uniqueId","React","Component","useEffect","useMemo","useRef","useState","debounceRender","ComponentToDebounce","wait","setting","DebounceComponent","DebouncedContainer","constructor","arguments","updateDebounced","forceUpdate","shouldComponentUpdate","componentWillUnmount","cancel","render","createElement","Object","assign","props","useDebounceRender","option","deeps","getComponent","refreshKey","setRefreshKey","refreshTrigger","current","CachedComponent"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,oBAAP,MAAiC,yBAAjC;AACA,SAASC,QAAQ,IAAIC,cAArB,EAAqCC,QAArC,QAAqD,QAArD;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,SAA3B,EAAsCC,OAAtC,EAA+CC,MAA/C,EAAuDC,QAAvD,QAAuE,OAAvE;;AACA,SAASC,cAAT,CAAwBC,mBAAxB,EAA6CC,IAA7C,EAAmDC,OAAnD,EAA4D;AACxD,MAAMC,iBAAiB,GAAGH,mBAA1B,CADwD,CAExD;;AACA,QAAMI,kBAAN,SAAiCV,SAAjC,CAA2C;AACvCW,IAAAA,WAAW,GAAG;AACV,YAAM,GAAGC,SAAT;AACA,WAAKC,eAAL,GAAuBhB,cAAc,CAAC,KAAKiB,WAAN,EAAmBP,IAAnB,EAAyBC,OAAzB,CAArC;AACH;;AACDO,IAAAA,qBAAqB,GAAG;AACpB,WAAKF,eAAL;AACA,aAAO,KAAP;AACH;;AACDG,IAAAA,oBAAoB,GAAG;AACnB,WAAKH,eAAL,CAAqBI,MAArB;AACH;;AACDC,IAAAA,MAAM,GAAG;AACL,0BAAOnB,KAAK,CAACoB,aAAN,CAAoBV,iBAApB,EAAuCW,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKC,KAAvB,CAAvC,CAAP;AACH;;AAdsC;;AAgB3C,SAAO3B,oBAAoB,CAACe,kBAAD,EAAqBD,iBAArB,CAA3B;AACH;;AACD,OAAO,IAAMc,iBAAiB,GAAG,CAACC,MAAD,EAASC,KAAT,KAAmB;AAChD,MAAM;AAAEC,IAAAA,YAAF;AAAgBnB,IAAAA,IAAhB;AAAsBC,IAAAA;AAAtB,MAAkCgB,MAAxC;AACA,MAAM,CAACG,UAAD,EAAaC,aAAb,IAA8BxB,QAAQ,CAAC,EAAD,CAA5C;AACA,MAAMyB,cAAc,GAAG1B,MAAM,EAA7B;AACAF,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI,CAAC4B,cAAc,CAACC,OAApB,EAA6B;AACzBD,MAAAA,cAAc,CAACC,OAAf,GAAyBjC,cAAc,CAAC,MAAM;AAC1C+B,QAAAA,aAAa,CAAC9B,QAAQ,EAAT,CAAb;AACH,OAFsC,EAEpCS,IAFoC,EAE9BC,OAF8B,CAAvC;AAGH;;AACD,QAAID,IAAJ,EAAU;AACNsB,MAAAA,cAAc,CAACC,OAAf;AACH;AACJ,GATQ,EASNL,KATM,CAAT;AAUA,MAAMM,eAAe,GAAG7B,OAAO,CAAC,MAAM;AAClC,WAAO,CAACyB,UAAD,GAAc,IAAd,GAAqBD,YAAY,EAAxC;AACH,GAF8B,EAE5B,CAACC,UAAD,CAF4B,CAA/B;AAGA,SAAOI,eAAP;AACH,CAlBM;AAmBP,eAAe1B,cAAf","sourcesContent":["/**\n * https://github.com/podefr/react-debounce-render/blob/master/src/index.js\n * 防止组件短时间内连续并发渲染\n */\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport { debounce as lodashDebounce, uniqueId } from 'lodash';\nimport React, { Component, useEffect, useMemo, useRef, useState } from 'react';\nfunction debounceRender(ComponentToDebounce, wait, setting) {\n    const DebounceComponent = ComponentToDebounce;\n    // @ts-ignore\n    class DebouncedContainer extends Component {\n        constructor() {\n            super(...arguments);\n            this.updateDebounced = lodashDebounce(this.forceUpdate, wait, setting);\n        }\n        shouldComponentUpdate() {\n            this.updateDebounced();\n            return false;\n        }\n        componentWillUnmount() {\n            this.updateDebounced.cancel();\n        }\n        render() {\n            return React.createElement(DebounceComponent, Object.assign({}, this.props));\n        }\n    }\n    return hoistNonReactStatics(DebouncedContainer, DebounceComponent);\n}\nexport const useDebounceRender = (option, deeps) => {\n    const { getComponent, wait, setting } = option;\n    const [refreshKey, setRefreshKey] = useState('');\n    const refreshTrigger = useRef();\n    useEffect(() => {\n        if (!refreshTrigger.current) {\n            refreshTrigger.current = lodashDebounce(() => {\n                setRefreshKey(uniqueId());\n            }, wait, setting);\n        }\n        if (wait) {\n            refreshTrigger.current();\n        }\n    }, deeps);\n    const CachedComponent = useMemo(() => {\n        return !refreshKey ? null : getComponent();\n    }, [refreshKey]);\n    return CachedComponent;\n};\nexport default debounceRender;\n"]}]}