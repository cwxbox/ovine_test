{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\aside_layout\\aside.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\aside_layout\\aside.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgQXNpZGVOYXYgfSBmcm9tICdhbWlzJzsKaW1wb3J0IHsgZmluZCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IExpbmssIHVzZUxvY2F0aW9uIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IGJyZWFrcG9pbnRzLCBtZXNzYWdlLCBzdG9yYWdlIH0gZnJvbSAiLi4vLi4vY29uc3RhbnRzIjsKaW1wb3J0IHsgcHVibGlzaCB9IGZyb20gIi4uLy4uL3V0aWxzL21lc3NhZ2UiOwppbXBvcnQgeyBnZXRHbG9iYWwsIGdldFN0b3JlIH0gZnJvbSAiLi4vLi4vdXRpbHMvc3RvcmUiOwpleHBvcnQgZGVmYXVsdCAocHJvcHMgPT4gewogIHZhciB7CiAgICB0aGVtZSwKICAgIGFzaWRlTWVudXMKICB9ID0gcHJvcHM7CiAgdmFyIGxvY2F0aW9uID0gdXNlTG9jYXRpb24oKTsKICB1c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IGJyZWFrcG9pbnRzLnNtKSB7CiAgICAgIHB1Ymxpc2gobWVzc2FnZS5hc2lkZUxheW91dEN0cmwubXNnLCB7CiAgICAgICAga2V5OiBtZXNzYWdlLmFzaWRlTGF5b3V0Q3RybC50b2dnbGVTY3JlZW4KICAgICAgfSk7CiAgICB9CiAgfSwgW2xvY2F0aW9uLnBhdGhuYW1lXSk7CgogIHZhciBpc0FjdGl2ZSA9IGxpbmsgPT4gewogICAgdmFyIHsKICAgICAgcGF0aCwKICAgICAgY2hpbGRyZW4sCiAgICAgIHNpZGVWaXNpYmxlID0gdHJ1ZQogICAgfSA9IGxpbms7CiAgICB2YXIgYWN0aXZlID0gc2lkZVZpc2libGUgJiYgcGF0aCAmJiBwYXRoID09PSBsb2NhdGlvbi5wYXRobmFtZTsgLy8g5a2Q6I+c5Y2VIOWPr+ingeaXtu+8jOm7mOiupOmrmOS6riDmnIDov5HnmoTniLboj5zljZUKCiAgICB2YXIgaW52aXNpYmxlSXRlbSA9IGZpbmQoY2hpbGRyZW4sIGkgPT4gaS5wYXRoID09PSBsb2NhdGlvbi5wYXRobmFtZSAmJiBpLnNpZGVWaXNpYmxlID09PSBmYWxzZSAmJiBpLmhpZ2hsaWdodFBhcmVudCAhPT0gZmFsc2UpOwoKICAgIGlmICghYWN0aXZlICYmIGludmlzaWJsZUl0ZW0pIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcmV0dXJuIGFjdGl2ZTsKICB9OwoKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQXNpZGVOYXYsIHsKICAgIHRoZW1lOiB0aGVtZSwKICAgIHJlbmRlckxpbms6IHJlbmRlck5hdiwKICAgIGlzQWN0aXZlOiBpc0FjdGl2ZSwKICAgIG5hdmlnYXRpb25zOiBhc2lkZU1lbnVzCiAgfSk7Cn0pOwoKZnVuY3Rpb24gcmVuZGVyTmF2KF9yZWYpIHsKICB2YXIgewogICAgbGluaywKICAgIHRvZ2dsZUV4cGFuZCwKICAgIGNsYXNzbmFtZXM6IGN4CiAgfSA9IF9yZWY7CiAgdmFyIHsKICAgIGNoaWxkcmVuOiByb3V0ZUNoaWxkcmVuLAogICAgc2lkZVZpc2libGUgPSB0cnVlLAogICAgYWN0aXZlLAogICAgaWNvbiwKICAgIGxhYmVsLAogICAgYmFkZ2UsCiAgICBiYWRnZUNsYXNzTmFtZSwKICAgIHBhdGgsCiAgICBocmVmCiAgfSA9IGxpbms7CiAgdmFyIGNoaWxkcmVuID0gW107CiAgdmFyIGVuYWJsZVJvdXRlVGFicyA9IGdldFN0b3JlKHN0b3JhZ2UuZW5hYmxlUm91dGVUYWJzKTsKCiAgdmFyIGdldFJvdXRlUGF0aCA9ICgpID0+IHsKICAgIHZhciBzdG9yZVF1ZXJ5ID0gZ2V0R2xvYmFsKHN0b3JhZ2Uucm91dGVRdWVyeSkgfHwge307CiAgICB2YXIgcXVlcnkgPSBzdG9yZVF1ZXJ5W3BhdGhdOwogICAgcmV0dXJuIHF1ZXJ5ID8gIiIuY29uY2F0KHBhdGgsICI/IikuY29uY2F0KHF1ZXJ5KSA6IHBhdGg7CiAgfTsKCiAgdmFyIG9uVG9nZ2xlRXhwYW5kID0gZSA9PiB0b2dnbGVFeHBhbmQobGluaywgZSk7CgogIHZhciBvbkxpbmtDbGljayA9ICgpID0+IHsKICAgIHB1Ymxpc2gobWVzc2FnZS5yb3V0ZVRhYkNoYW5nZSk7CiAgfTsKCiAgaWYgKHNpZGVWaXNpYmxlID09PSBmYWxzZSkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICBpZiAocm91dGVDaGlsZHJlbikgewogICAgY2hpbGRyZW4ucHVzaCggLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgIGtleTogImV4cGFuZC10b2dnbGUiLAogICAgICBjbGFzc05hbWU6IGN4KCdBc2lkZU5hdi1pdGVtQXJyb3cnKSwKICAgICAgb25DbGljazogb25Ub2dnbGVFeHBhbmQKICAgIH0pKTsKICB9CgogIGlmIChiYWRnZSkgewogICAgY2hpbGRyZW4ucHVzaCggLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImIiLCB7CiAgICAgIGtleTogImJhZGdlIiwKICAgICAgY2xhc3NOYW1lOiBjeCgnQXNpZGVOYXYtaXRlbUJhZGdlJywgYmFkZ2VDbGFzc05hbWUgfHwgJ2JnLWluZm8nKQogICAgfSwgYmFkZ2UpKTsKICB9CgogIGlmIChpY29uKSB7CiAgICBjaGlsZHJlbi5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaSIsIHsKICAgICAga2V5OiAiaWNvbiIsCiAgICAgIGNsYXNzTmFtZTogY3goJ0FzaWRlTmF2LWl0ZW1JY29uJywgaWNvbikKICAgIH0pKTsKICB9CgogIGlmIChsYWJlbCkgewogICAgY2hpbGRyZW4ucHVzaCggLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgIGNsYXNzTmFtZTogY3goJ0FzaWRlTmF2LWl0ZW1MYWJlbCcpLAogICAgICBrZXk6ICJsYWJlbCIKICAgIH0sIGxhYmVsKSk7CiAgfQoKICBpZiAoIXBhdGgpIHsKICAgIHJldHVybiAoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImEiLCB7CiAgICAgICAgb25DbGljazogcm91dGVDaGlsZHJlbiA/ICgpID0+IHRvZ2dsZUV4cGFuZChsaW5rKSA6IHVuZGVmaW5lZAogICAgICB9LCBjaGlsZHJlbikKICAgICk7CiAgfQoKICBpZiAoYWN0aXZlKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYSIsIG51bGwsICIgIiwgY2hpbGRyZW4sICIgIik7CiAgfQoKICBpZiAoaHJlZikgewogICAgdmFyIFt0YXJnZXQsIHVybEhyZWZdID0gdHlwZW9mIGhyZWYgPT09ICdzdHJpbmcnID8gWydfYmxhbmsnLCBocmVmXSA6IGhyZWY7CiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImEiLCB7CiAgICAgIHRhcmdldDogdGFyZ2V0LAogICAgICBocmVmOiB1cmxIcmVmCiAgICB9LCBjaGlsZHJlbik7CiAgfQoKICBpZiAoZW5hYmxlUm91dGVUYWJzKSB7CiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTGluaywgewogICAgICB0bzogZ2V0Um91dGVQYXRoKCksCiAgICAgIG9uQ2xpY2s6IG9uTGlua0NsaWNrCiAgICB9LCBjaGlsZHJlbik7CiAgfQoKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTGluaywgewogICAgdG86IHBhdGgKICB9LCBjaGlsZHJlbik7Cn0="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/aside_layout/aside.js"],"names":["AsideNav","find","React","useEffect","Link","useLocation","breakpoints","message","storage","publish","getGlobal","getStore","props","theme","asideMenus","location","window","innerWidth","sm","asideLayoutCtrl","msg","key","toggleScreen","pathname","isActive","link","path","children","sideVisible","active","invisibleItem","i","highlightParent","createElement","renderLink","renderNav","navigations","toggleExpand","classnames","cx","routeChildren","icon","label","badge","badgeClassName","href","enableRouteTabs","getRoutePath","storeQuery","routeQuery","query","onToggleExpand","e","onLinkClick","routeTabChange","push","className","onClick","undefined","target","urlHref","to"],"mappings":"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","sourcesContent":["import { AsideNav } from 'amis';\nimport { find } from 'lodash';\nimport React, { useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { breakpoints, message, storage } from \"../../constants\";\nimport { publish } from \"../../utils/message\";\nimport { getGlobal, getStore } from \"../../utils/store\";\nexport default (props) => {\n    const { theme, asideMenus } = props;\n    const location = useLocation();\n    useEffect(() => {\n        if (window.innerWidth <= breakpoints.sm) {\n            publish(message.asideLayoutCtrl.msg, {\n                key: message.asideLayoutCtrl.toggleScreen,\n            });\n        }\n    }, [location.pathname]);\n    const isActive = (link) => {\n        const { path, children, sideVisible = true } = link;\n        const active = sideVisible && path && path === location.pathname;\n        // 子菜单 可见时，默认高亮 最近的父菜单\n        const invisibleItem = find(children, (i) => i.path === location.pathname && i.sideVisible === false && i.highlightParent !== false);\n        if (!active && invisibleItem) {\n            return true;\n        }\n        return active;\n    };\n    return (React.createElement(AsideNav, { theme: theme, renderLink: renderNav, isActive: isActive, navigations: asideMenus }));\n};\nfunction renderNav({ link, toggleExpand, classnames: cx }) {\n    const { children: routeChildren, sideVisible = true, active, icon, label, badge, badgeClassName, path, href, } = link;\n    const children = [];\n    const enableRouteTabs = getStore(storage.enableRouteTabs);\n    const getRoutePath = () => {\n        const storeQuery = getGlobal(storage.routeQuery) || {};\n        const query = storeQuery[path];\n        return query ? `${path}?${query}` : path;\n    };\n    const onToggleExpand = (e) => toggleExpand(link, e);\n    const onLinkClick = () => {\n        publish(message.routeTabChange);\n    };\n    if (sideVisible === false) {\n        return null;\n    }\n    if (routeChildren) {\n        children.push(React.createElement(\"span\", { key: \"expand-toggle\", className: cx('AsideNav-itemArrow'), onClick: onToggleExpand }));\n    }\n    if (badge) {\n        children.push(React.createElement(\"b\", { key: \"badge\", className: cx('AsideNav-itemBadge', badgeClassName || 'bg-info') }, badge));\n    }\n    if (icon) {\n        children.push(React.createElement(\"i\", { key: \"icon\", className: cx('AsideNav-itemIcon', icon) }));\n    }\n    if (label) {\n        children.push(React.createElement(\"span\", { className: cx('AsideNav-itemLabel'), key: \"label\" }, label));\n    }\n    if (!path) {\n        return (\n        // eslint-disable-next-line\n        React.createElement(\"a\", { onClick: routeChildren ? () => toggleExpand(link) : undefined }, children));\n    }\n    if (active) {\n        // eslint-disable-next-line\n        return React.createElement(\"a\", null,\n            \" \",\n            children,\n            \" \");\n    }\n    if (href) {\n        const [target, urlHref] = typeof href === 'string' ? ['_blank', href] : href;\n        return (React.createElement(\"a\", { target: target, href: urlHref }, children));\n    }\n    if (enableRouteTabs) {\n        return (React.createElement(Link, { to: getRoutePath(), onClick: onLinkClick }, children));\n    }\n    return React.createElement(Link, { to: path }, children);\n}\n"]}]}