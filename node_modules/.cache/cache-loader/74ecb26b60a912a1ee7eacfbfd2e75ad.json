{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\aside_layout\\item_search.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\aside_layout\\item_search.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCi8qKgogKiBBUFAg5pCc57SiCiAqLwppbXBvcnQgeyBmaWx0ZXJUcmVlLCBmaW5kVHJlZSB9IGZyb20gJ2FtaXMvbGliL3V0aWxzL2hlbHBlcic7CmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgeyBnZXRBc2lkZU1lbnVzIH0gZnJvbSAiLi4vLi4vcm91dGVzL2xpbWl0IjsKaW1wb3J0IHsgdXNlSW1tZXIgfSBmcm9tICIuLi8uLi91dGlscy9ob29rcyI7CmltcG9ydCB7IGNscyB9IGZyb20gIi4uLy4uL3V0aWxzL3Rvb2wiOwppbXBvcnQgeyBBbWlzIH0gZnJvbSAiLi4vYW1pcy9zY2hlbWEiOwppbXBvcnQgSGVhZEl0ZW0gZnJvbSAiLi9oZWFkX2l0ZW0iOwppbXBvcnQgeyBTZWFyY2hJbnB1dCB9IGZyb20gIi4vc3R5bGVkIjsKCnZhciBfZGVmYXVsdCA9ICgpID0+IHsKICB2YXIgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VJbW1lcih7CiAgICBzaG93SW5wdXQ6IGZhbHNlCiAgfSk7CiAgdmFyIGhpc3RvcnkgPSB1c2VIaXN0b3J5KCk7CiAgdmFyICRzZWFyY2hSZWYgPSB1c2VSZWYobnVsbCk7CiAgdmFyIGFzaWRlTWVudXMgPSBnZXRBc2lkZU1lbnVzKCk7CiAgdmFyIHsKICAgIHNob3dJbnB1dAogIH0gPSBzdGF0ZTsKCiAgdmFyIHRvZ2dsZUlucHV0ID0gdG9nZ2xlID0+IHsKICAgIHZhciBpc1Nob3cgPSB0eXBlb2YgdG9nZ2xlID09PSAnYm9vbGVhbicgPyB0b2dnbGUgOiAhc2hvd0lucHV0OwogICAgc2V0U3RhdGUoZCA9PiB7CiAgICAgIGQuc2hvd0lucHV0ID0gaXNTaG93OwogICAgfSk7CgogICAgaWYgKGlzU2hvdykgewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAkKCRzZWFyY2hSZWYuY3VycmVudCkuZmluZCgnaW5wdXQnKS5jbGljaygpLmZvY3VzKCk7CiAgICAgIH0sIDEwMCk7CiAgICB9CiAgfTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgICQoJ2JvZHknKS5vbignY2xpY2snLCBlID0+IHsKICAgICAgaWYgKCEkc2VhcmNoUmVmLmN1cnJlbnQgfHwgJC5jb250YWlucygkc2VhcmNoUmVmLmN1cnJlbnQsIGUudGFyZ2V0KSkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBhbWlzIG92ZXJsYXkg5a2Y5Zyo5byC5bi4IOWcqOS+p+i+ueagjyDljLrln58v6aG26YOoIOWMuuWfnyDkuI3kvJrlhbPpl60KCgogICAgICB2YXIgJHNlYXJjaCA9ICQoJHNlYXJjaFJlZi5jdXJyZW50KTsKICAgICAgdmFyICRpbnB1dCA9ICRzZWFyY2guZmluZCgnaW5wdXQnKTsKCiAgICAgIGlmICghJGlucHV0LnZhbCgpKSB7CiAgICAgICAgaWYgKCRzZWFyY2guZmluZCgnLmlzLW9wZW5lZCcpLmxlbmd0aCkgewogICAgICAgICAgJHNlYXJjaC5maW5kKCdkaXZbY2xhc3MkPSJQb3BPdmVyLW92ZXJsYXkiXScpLmNsaWNrKCk7CiAgICAgICAgfQoKICAgICAgICBzZXRTdGF0ZShkID0+IHsKICAgICAgICAgIGQuc2hvd0lucHV0ID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0sIFtdKTsKICB2YXIgaW5wdXRTY2hlbWEgPSB1c2VNZW1vKCgpID0+IHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAnJywKICAgICAgdHlwZTogJ2Zvcm0nLAogICAgICBtb2RlOiAnbm9ybWFsJywKICAgICAgd3JhcFdpdGhQYW5lbDogZmFsc2UsCiAgICAgIGNsYXNzTmFtZTogJ20tbicsCiAgICAgIGFjdGlvbnM6IFtdLAogICAgICBjb250cm9sczogW3sKICAgICAgICB0eXBlOiAndHJlZS1zZWxlY3QnLAogICAgICAgIG5hbWU6ICdub2RlUGF0aCcsCiAgICAgICAgbGFiZWw6ICcnLAogICAgICAgIGNsYXNzTmFtZTogY2xzKCdtLW4nLCB7CiAgICAgICAgICBhY3RpdmU6IHNob3dJbnB1dAogICAgICAgIH0pLAogICAgICAgIGlucHV0Q2xhc3NOYW1lOiAnaW5saW5lJywKICAgICAgICBjbGVhcmFibGU6IGZhbHNlLAogICAgICAgIHNlYXJjaGFibGU6IHRydWUsCiAgICAgICAgdmFsdWVGaWVsZDogJ25vZGVQYXRoJywKICAgICAgICBwbGFjZWhvbGRlcjogJyAnLAogICAgICAgIG9wdGlvbnM6IGZpbHRlclRyZWUoYXNpZGVNZW51cywgaSA9PiBpLnNpZGVWaXNpYmxlICE9PSBmYWxzZSkubWFwKGl0ZW0gPT4gewogICAgICAgICAgdmFyIHsKICAgICAgICAgICAgbGFiZWwsCiAgICAgICAgICAgIGxpbWl0TGFiZWwKICAgICAgICAgIH0gPSBpdGVtOwogICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaXRlbSksIHsKICAgICAgICAgICAgbGFiZWw6IGxhYmVsIHx8IGxpbWl0TGFiZWwgfHwgJ+acquefpeiKgueCuScKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgIH1dLAogICAgICBvbkNoYW5nZTogKGZvcm1WYWx1ZSwgX18sIGZvcm1JbnMpID0+IHsKICAgICAgICB2YXIgewogICAgICAgICAgbm9kZVBhdGgKICAgICAgICB9ID0gZm9ybVZhbHVlOwoKICAgICAgICBpZiAoIW5vZGVQYXRoKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgbm9kZUl0ZW0gPSBmaW5kVHJlZShhc2lkZU1lbnVzLCBpdGVtID0+IG5vZGVQYXRoID09PSBpdGVtLm5vZGVQYXRoKTsKCiAgICAgICAgaWYgKCFub2RlSXRlbSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8g55u05o6l6Lez6L2s5oyH5a6a6aG16Z2iCgoKICAgICAgICBpZiAobm9kZUl0ZW0ucGF0aCkgewogICAgICAgICAgLy8g6aaW5qyhIOi3s+i9rCDkvJrkuKLlpLEg5YC8CiAgICAgICAgICB0b2dnbGVJbnB1dChmYWxzZSk7CiAgICAgICAgICBoaXN0b3J5LnB1c2gobm9kZUl0ZW0ucGF0aCk7IC8vIOafpeaJvuesrOS4gOS4qiDlhbfmnIlwYXRoIOeahOiKgueCue+8jOW5tui3s+i9rAogICAgICAgIH0gZWxzZSBpZiAobm9kZUl0ZW0uY2hpbGRyZW4pIHsKICAgICAgICAgIHZhciBwYXRoSXRlbSA9IGZpbmRUcmVlKG5vZGVJdGVtLmNoaWxkcmVuLCBpdGVtID0+ICEhaXRlbS5wYXRoKTsKCiAgICAgICAgICBpZiAocGF0aEl0ZW0gPT09IG51bGwgfHwgcGF0aEl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhdGhJdGVtLnBhdGgpIHsKICAgICAgICAgICAgdG9nZ2xlSW5wdXQoZmFsc2UpOwogICAgICAgICAgICBoaXN0b3J5LnB1c2gocGF0aEl0ZW0ucGF0aCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3JtSW5zLnN0b3JlLnNldFZhbHVlQnlOYW1lKCdub2RlUGF0aCcsICcnKTsKICAgICAgfQogICAgfTsKICB9LCBbc2hvd0lucHV0XSk7CiAgdmFyIHNlYXJjaEl0ZW1Qcm9wcyA9IHsKICAgIGZhSWNvbjogJ3NlYXJjaCcsCiAgICB0aXA6ICfmkJzntKInLAogICAgb25DbGljazogKCkgPT4gIXNob3dJbnB1dCAmJiB0b2dnbGVJbnB1dCh0cnVlKQogIH07CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChIZWFkSXRlbSwgewogICAgaXRlbVByb3BzOiBzZWFyY2hJdGVtUHJvcHMKICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VhcmNoSW5wdXQsIHsKICAgIHJlZjogJHNlYXJjaFJlZgogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFtaXMsIHsKICAgIHNjaGVtYTogaW5wdXRTY2hlbWEKICB9KSkpOwp9OwoKX19zaWduYXR1cmVfXyhfZGVmYXVsdCwgInVzZUltbWVye1tzdGF0ZSwgc2V0U3RhdGVdfVxudXNlSGlzdG9yeXtoaXN0b3J5fVxudXNlUmVmeyRzZWFyY2hSZWZ9XG51c2VFZmZlY3R7fVxudXNlTWVtb3tpbnB1dFNjaGVtYX0iLCAoKSA9PiBbdXNlSW1tZXIsIHVzZUhpc3RvcnldKTsKCmV4cG9ydCBkZWZhdWx0IF9kZWZhdWx0Owo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5kZWZhdWx0IDogdW5kZWZpbmVkOwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihfZGVmYXVsdCwgImRlZmF1bHQiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxhc2lkZV9sYXlvdXRcXGl0ZW1fc2VhcmNoLmpzIik7Cn0pKCk7Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciBsZWF2ZU1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5sZWF2ZU1vZHVsZSA6IHVuZGVmaW5lZDsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/aside_layout/item_search.js"],"names":["filterTree","findTree","React","useEffect","useRef","useMemo","useHistory","getAsideMenus","useImmer","cls","Amis","HeadItem","SearchInput","state","setState","showInput","history","$searchRef","asideMenus","toggleInput","toggle","isShow","d","setTimeout","$","current","find","click","focus","on","e","contains","target","$search","$input","val","length","inputSchema","title","type","mode","wrapWithPanel","className","actions","controls","name","label","active","inputClassName","clearable","searchable","valueField","placeholder","options","i","sideVisible","map","item","limitLabel","Object","assign","onChange","formValue","__","formIns","nodePath","nodeItem","path","push","children","pathItem","store","setValueByName","searchItemProps","faIcon","tip","onClick","createElement","Fragment","itemProps","ref","schema"],"mappings":"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","sourcesContent":["/**\n * APP 搜索\n */\nimport { filterTree, findTree } from 'amis/lib/utils/helper';\nimport React, { useEffect, useRef, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { getAsideMenus } from \"../../routes/limit\";\nimport { useImmer } from \"../../utils/hooks\";\nimport { cls } from \"../../utils/tool\";\nimport { Amis } from \"../amis/schema\";\nimport HeadItem from \"./head_item\";\nimport { SearchInput } from \"./styled\";\nexport default () => {\n    const [state, setState] = useImmer({\n        showInput: false,\n    });\n    const history = useHistory();\n    const $searchRef = useRef(null);\n    const asideMenus = getAsideMenus();\n    const { showInput } = state;\n    const toggleInput = (toggle) => {\n        const isShow = typeof toggle === 'boolean' ? toggle : !showInput;\n        setState((d) => {\n            d.showInput = isShow;\n        });\n        if (isShow) {\n            setTimeout(() => {\n                $($searchRef.current)\n                    .find('input')\n                    .click()\n                    .focus();\n            }, 100);\n        }\n    };\n    useEffect(() => {\n        $('body').on('click', (e) => {\n            if (!$searchRef.current || $.contains($searchRef.current, e.target)) {\n                return;\n            }\n            // amis overlay 存在异常 在侧边栏 区域/顶部 区域 不会关闭\n            const $search = $($searchRef.current);\n            const $input = $search.find('input');\n            if (!$input.val()) {\n                if ($search.find('.is-opened').length) {\n                    $search.find('div[class$=\"PopOver-overlay\"]').click();\n                }\n                setState((d) => {\n                    d.showInput = false;\n                });\n            }\n        });\n    }, []);\n    const inputSchema = useMemo(() => {\n        return {\n            title: '',\n            type: 'form',\n            mode: 'normal',\n            wrapWithPanel: false,\n            className: 'm-n',\n            actions: [],\n            controls: [\n                {\n                    type: 'tree-select',\n                    name: 'nodePath',\n                    label: '',\n                    className: cls('m-n', { active: showInput }),\n                    inputClassName: 'inline',\n                    clearable: false,\n                    searchable: true,\n                    valueField: 'nodePath',\n                    placeholder: ' ',\n                    options: filterTree(asideMenus, (i) => i.sideVisible !== false).map((item) => {\n                        const { label, limitLabel } = item;\n                        return Object.assign(Object.assign({}, item), { label: label || limitLabel || '未知节点' });\n                    }),\n                },\n            ],\n            onChange: (formValue, __, formIns) => {\n                const { nodePath } = formValue;\n                if (!nodePath) {\n                    return;\n                }\n                const nodeItem = findTree(asideMenus, (item) => nodePath === item.nodePath);\n                if (!nodeItem) {\n                    return;\n                }\n                // 直接跳转指定页面\n                if (nodeItem.path) {\n                    // 首次 跳转 会丢失 值\n                    toggleInput(false);\n                    history.push(nodeItem.path);\n                    // 查找第一个 具有path 的节点，并跳转\n                }\n                else if (nodeItem.children) {\n                    const pathItem = findTree(nodeItem.children, (item) => !!item.path);\n                    if (pathItem === null || pathItem === void 0 ? void 0 : pathItem.path) {\n                        toggleInput(false);\n                        history.push(pathItem.path);\n                    }\n                }\n                formIns.store.setValueByName('nodePath', '');\n            },\n        };\n    }, [showInput]);\n    const searchItemProps = {\n        faIcon: 'search',\n        tip: '搜索',\n        onClick: () => !showInput && toggleInput(true),\n    };\n    return (React.createElement(React.Fragment, null,\n        React.createElement(HeadItem, { itemProps: searchItemProps }),\n        React.createElement(SearchInput, { ref: $searchRef },\n            React.createElement(Amis, { schema: inputSchema }))));\n};\n"]}]}