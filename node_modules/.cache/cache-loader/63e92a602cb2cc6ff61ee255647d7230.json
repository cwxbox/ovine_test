{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\route_tabs\\cache.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\route_tabs\\cache.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCi8qKgogKiDot6/nlLHnirbmgIHmjIHkuYXljJYKICoKICogMS4g6K6w5b2VIOaJk+W8gOedgOeahCDot6/nlLEKICogMi4g6K6w5b2VIHVybCDlnLDlnYDlj4LmlbAKICovCmltcG9ydCB7IHVuaXF1ZUlkIH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgYXBwIH0gZnJvbSAiLi4vLi4vYXBwIjsKaW1wb3J0IHsgc3RvcmFnZSB9IGZyb20gIi4uLy4uL2NvbnN0YW50cyI7CmltcG9ydCB7IGdldFN0b3JlLCBzZXRTdG9yZSwgY2xlYXJTdG9yZSB9IGZyb20gIi4uLy4uL3V0aWxzL3N0b3JlIjsKZXhwb3J0IHZhciBjbGVhckNhY2hlZFRhYnMgPSAoKSA9PiB7CiAgY2xlYXJTdG9yZShzdG9yYWdlLnJvdXRlVGFicyk7Cn07CmV4cG9ydCB2YXIgY2FjaGVUYWJzID0gYWxsVGFicyA9PiB7CiAgdmFyIGxpc3QgPSBbXTsKICBhbGxUYWJzLmZvckVhY2godGFiRWwgPT4gewogICAgdmFyIF9hOwoKICAgIHZhciB7CiAgICAgIHBhdGg6IHBhdGhuYW1lID0gJycsCiAgICAgIHJvb3Q6IGlzUm9vdCA9ICcnCiAgICB9ID0gdGFiRWwuZGF0YXNldDsgLy8gNDA0IOS4jee8k+WtmAoKICAgIGlmIChhcHAuY29uc3RhbnRzLm5vdEZvdW5kLnJvdXRlID09PSBwYXRobmFtZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGxhYmVsID0gKChfYSA9IHRhYkVsLnF1ZXJ5U2VsZWN0b3IoJy5jaHJvbWUtdGFiLXRpdGxlJykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbm5lckhUTUwpIHx8ICcnOwogICAgdmFyIGl0ZW0gPSB7CiAgICAgIHBhdGhuYW1lLAogICAgICBsYWJlbCwKICAgICAgaWQ6IHVuaXF1ZUlkKCkKICAgIH07CgogICAgaWYgKGlzUm9vdCkgewogICAgICBpdGVtLmlzUm9vdCA9IHRydWU7CiAgICB9CgogICAgbGlzdC5wdXNoKGl0ZW0pOwogIH0pOwogIHNldFN0b3JlKHN0b3JhZ2Uucm91dGVUYWJzLCBsaXN0KTsKfTsgLy8gVE9ETzog6I635Y+W5pyJ5pWI55qEIOe8k+WtmOi3r+eUsQoKZXhwb3J0IHZhciBnZXRWYWxpZENhY2hlVGFicyA9ICgpID0+IHsKICB2YXIgbGlzdCA9IGdldFN0b3JlKHN0b3JhZ2Uucm91dGVUYWJzKSB8fCBbXTsKICByZXR1cm4gbGlzdDsKfTsKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdCA6IHVuZGVmaW5lZDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoY2xlYXJDYWNoZWRUYWJzLCAiY2xlYXJDYWNoZWRUYWJzIiwgIkM6XFxVc2Vyc1xcY3d4XFxEZXNrdG9wXFxlZGl0b3ItZGVtb1xcbm9kZV9tb2R1bGVzXFxAb3ZpbmVcXGNvcmVcXGxpYlxcY29tcG9uZW50c1xccm91dGVfdGFic1xcY2FjaGUuanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihjYWNoZVRhYnMsICJjYWNoZVRhYnMiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxyb3V0ZV90YWJzXFxjYWNoZS5qcyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGdldFZhbGlkQ2FjaGVUYWJzLCAiZ2V0VmFsaWRDYWNoZVRhYnMiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxyb3V0ZV90YWJzXFxjYWNoZS5qcyIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwubGVhdmVNb2R1bGUgOiB1bmRlZmluZWQ7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/route_tabs/cache.js"],"names":["uniqueId","app","storage","getStore","setStore","clearStore","clearCachedTabs","routeTabs","cacheTabs","allTabs","list","forEach","tabEl","_a","path","pathname","root","isRoot","dataset","constants","notFound","route","label","querySelector","innerHTML","item","id","push","getValidCacheTabs"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,QAAT,QAAyB,QAAzB;AACA,SAASC,GAAT,QAAoB,WAApB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,QAAT,EAAmBC,QAAnB,EAA6BC,UAA7B,QAA+C,mBAA/C;AACA,OAAO,IAAMC,eAAe,GAAG,MAAM;AACjCD,EAAAA,UAAU,CAACH,OAAO,CAACK,SAAT,CAAV;AACH,CAFM;AAGP,OAAO,IAAMC,SAAS,GAAIC,OAAD,IAAa;AAClC,MAAMC,IAAI,GAAG,EAAb;AACAD,EAAAA,OAAO,CAACE,OAAR,CAAiBC,KAAD,IAAW;AACvB,QAAIC,EAAJ;;AACA,QAAM;AAAEC,MAAAA,IAAI,EAAEC,QAAQ,GAAG,EAAnB;AAAuBC,MAAAA,IAAI,EAAEC,MAAM,GAAG;AAAtC,QAA6CL,KAAK,CAACM,OAAzD,CAFuB,CAGvB;;AACA,QAAIjB,GAAG,CAACkB,SAAJ,CAAcC,QAAd,CAAuBC,KAAvB,KAAiCN,QAArC,EAA+C;AAC3C;AACH;;AACD,QAAMO,KAAK,GAAG,CAAC,CAACT,EAAE,GAAGD,KAAK,CAACW,aAAN,CAAoB,mBAApB,CAAN,MAAoD,IAApD,IAA4DV,EAAE,KAAK,KAAK,CAAxE,GAA4E,KAAK,CAAjF,GAAqFA,EAAE,CAACW,SAAzF,KAAuG,EAArH;AACA,QAAMC,IAAI,GAAG;AAAEV,MAAAA,QAAF;AAAYO,MAAAA,KAAZ;AAAmBI,MAAAA,EAAE,EAAE1B,QAAQ;AAA/B,KAAb;;AACA,QAAIiB,MAAJ,EAAY;AACRQ,MAAAA,IAAI,CAACR,MAAL,GAAc,IAAd;AACH;;AACDP,IAAAA,IAAI,CAACiB,IAAL,CAAUF,IAAV;AACH,GAbD;AAcArB,EAAAA,QAAQ,CAACF,OAAO,CAACK,SAAT,EAAoBG,IAApB,CAAR;AACH,CAjBM,C,CAkBP;;AACA,OAAO,IAAMkB,iBAAiB,GAAG,MAAM;AACnC,MAAMlB,IAAI,GAAGP,QAAQ,CAACD,OAAO,CAACK,SAAT,CAAR,IAA+B,EAA5C;AACA,SAAOG,IAAP;AACH,CAHM;;;;;;;;;;0BAtBMJ,e;0BAGAE,S;0BAmBAoB,iB","sourcesContent":["/**\n * 路由状态持久化\n *\n * 1. 记录 打开着的 路由\n * 2. 记录 url 地址参数\n */\nimport { uniqueId } from 'lodash';\nimport { app } from \"../../app\";\nimport { storage } from \"../../constants\";\nimport { getStore, setStore, clearStore } from \"../../utils/store\";\nexport const clearCachedTabs = () => {\n    clearStore(storage.routeTabs);\n};\nexport const cacheTabs = (allTabs) => {\n    const list = [];\n    allTabs.forEach((tabEl) => {\n        var _a;\n        const { path: pathname = '', root: isRoot = '' } = tabEl.dataset;\n        // 404 不缓存\n        if (app.constants.notFound.route === pathname) {\n            return;\n        }\n        const label = ((_a = tabEl.querySelector('.chrome-tab-title')) === null || _a === void 0 ? void 0 : _a.innerHTML) || '';\n        const item = { pathname, label, id: uniqueId() };\n        if (isRoot) {\n            item.isRoot = true;\n        }\n        list.push(item);\n    });\n    setStore(storage.routeTabs, list);\n};\n// TODO: 获取有效的 缓存路由\nexport const getValidCacheTabs = () => {\n    const list = getStore(storage.routeTabs) || [];\n    return list;\n};\n"]}]}