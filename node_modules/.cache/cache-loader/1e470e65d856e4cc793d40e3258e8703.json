{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\route_tabs\\index.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\route_tabs\\index.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIOi3r+eUseWIh+aNouWZqCDnu4Tku7YKICoKICogVE9ETzoKICogMS4g5re75YqgIElDT04g5pSv5oyB77yMc2hvd0ljb24sIFJvdXRlSWNvbiDor7fmsYLkuK0gTG9hZGluZ0ljb24g5LmL57G755qECiAqIDIuIOWinuWKoCDlj6/nvJbovpEv5Zu65a6aIOaooeW8jwogKiAzLiDlsIbnu4Tku7bovazkuLog57qvIHJlYWN0IOe7hOS7tu+8jOWuueaYk+aOp+WItgogKi8KaW1wb3J0IHsgb3BlbkNvbnRleHRNZW51cyB9IGZyb20gJ2FtaXMnOwppbXBvcnQgeyBmaW5kVHJlZSB9IGZyb20gJ2FtaXMvbGliL3V0aWxzL2hlbHBlcic7CmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBtYXRjaFBhdGgsIHdpdGhSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJzsKaW1wb3J0IHsgYXBwIH0gZnJvbSAiLi4vLi4vYXBwIjsKaW1wb3J0IHsgbWVzc2FnZSwgc3RvcmFnZSBhcyBzdG9yZUtleXMsIHJvb3RSb3V0ZSBhcyBkZWZSb3V0ZVJvdXRlIH0gZnJvbSAiLi4vLi4vY29uc3RhbnRzIjsKaW1wb3J0IHsgZ2V0Q3VyclJvdXRlUGF0aCB9IGZyb20gIi4uLy4uL3JvdXRlcy9leHBvcnRzIjsKaW1wb3J0IHsgc3Vic2NyaWJlLCB1bnN1YnNjcmliZSB9IGZyb20gIi4uLy4uL3V0aWxzL21lc3NhZ2UiOwppbXBvcnQgeyBzZXRHbG9iYWwgfSBmcm9tICIuLi8uLi91dGlscy9zdG9yZSI7CmltcG9ydCAqIGFzIGNhY2hlIGZyb20gIi4vY2FjaGUiOwppbXBvcnQgQ2hyb21lVGFicyBmcm9tICIuL2Nocm9tZV90YWJzIjsKaW1wb3J0IHsgU3R5bGVkUm91dGVUYWJzIH0gZnJvbSAiLi9zdHlsZWQiOwpleHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKHByb3BzID0+IHsKICB2YXIgewogICAgcm91dGVzOiByb3V0ZXNQcm9wLAogICAgdGhlbWVOcywKICAgIGhpc3RvcnksCiAgICBtYXhDb3VudCA9IDIwLAogICAgc3RvcmFnZSwKICAgIHJvb3RSb3V0ZTogcm9vdFJvdXRlUHJvcCA9IGRlZlJvdXRlUm91dGUsCiAgICBvbkNvbnRleHRNZW51CiAgfSA9IHByb3BzOwogIHZhciB7CiAgICBsb2NhdGlvbgogIH0gPSBoaXN0b3J5OwogIHZhciAkc3RvcmVSZWYgPSB1c2VSZWYoewogICAgcm9vdFJvdXRlOiByb290Um91dGVQcm9wLAogICAgcm91dGVRdWVyeToge30sCiAgICByb3V0ZXM6IHJvdXRlc1Byb3AsCiAgICAkdGFic0RvbTogbnVsbCwKICAgICR0YWJzOiB1bmRlZmluZWQsCiAgICB0YWJzOiB7fQogIH0pOwogICRzdG9yZVJlZi5jdXJyZW50LnJvb3RSb3V0ZSA9IHJvb3RSb3V0ZVByb3A7CiAgJHN0b3JlUmVmLmN1cnJlbnQucm91dGVzID0gcm91dGVzUHJvcDsKICB2YXIgbm90RmluZFJvdXRlID0gewogICAgbGFiZWw6ICfpobXpnaLkuI3lrZjlnKgnLAogICAgcGF0aG5hbWU6IGFwcC5jb25zdGFudHMubm90Rm91bmQucm91dGUKICB9OyAvLyBUT0RPOiDkvJjljJbot7PovazpgLvovpHvvIzot7Povazot6/nlLEKCiAgdmFyIGNoYW5nZVBhdGggPSBkZWJvdW5jZShwYXRoID0+IHsKICAgIGhpc3RvcnkucmVwbGFjZShwYXRoKTsKICB9LCAxMDApOwoKICB2YXIgcm91dGVRdWVyeUN0cmwgPSBmdW5jdGlvbiByb3V0ZVF1ZXJ5Q3RybChwYXRoKSB7CiAgICB2YXIgdmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJzsKCiAgICBpZiAocGF0aCA9PT0gJycpIHsKICAgICAgJHN0b3JlUmVmLmN1cnJlbnQucm91dGVRdWVyeSA9IHt9OwogICAgICBzZXRHbG9iYWwoc3RvcmVLZXlzLnJvdXRlUXVlcnksIHt9KTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgICRzdG9yZVJlZi5jdXJyZW50LnJvdXRlUXVlcnlbcGF0aF0gPSB2YWw7CiAgICBzZXRHbG9iYWwoc3RvcmVLZXlzLnJvdXRlUXVlcnksICRzdG9yZVJlZi5jdXJyZW50LnJvdXRlUXVlcnkpOwogIH07IC8vIOiOt+WPlui3r+W+hOS/oeaBrwoKCiAgdmFyIGdldFJvdXRlSW5mbyA9IGZ1bmN0aW9uIGdldFJvdXRlSW5mbygpIHsKICAgIHZhciBwYXRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBnZXRDdXJyUm91dGVQYXRoKCk7CiAgICB2YXIgcm9vdEJhY2tJdGVtOwogICAgdmFyIG1hdGNoZWRJdGVtOwogICAgdmFyIHsKICAgICAgcm9vdFJvdXRlLAogICAgICByb3V0ZXMKICAgIH0gPSAkc3RvcmVSZWYuY3VycmVudDsKICAgIGZpbmRUcmVlKHJvdXRlcywgKGl0ZW0sIF8sIF9fLCBpdGVtcykgPT4gewogICAgICB2YXIgewogICAgICAgIGxpbWl0TGFiZWwsCiAgICAgICAgLy8gcm91dGVUYWJJbml0UXVlcnk6IGluaXRRdWVyeSwKICAgICAgICBleGFjdCwKICAgICAgICBzdHJpY3QsCiAgICAgICAgcGF0aDogcm91dGVQYXRoID0gJycsCiAgICAgICAgbm9kZVBhdGggPSAnJwogICAgICB9ID0gaXRlbTsKICAgICAgdmFyIHBhdGhuYW1lID0gcm91dGVQYXRoIHx8IG5vZGVQYXRoOwogICAgICB2YXIgbGFiZWwgPSBpdGVtLmxhYmVsIHx8IGxpbWl0TGFiZWwgfHwgbm90RmluZFJvdXRlLmxhYmVsOwoKICAgICAgaWYgKCFwYXRoIHx8IHBhdGggPT09IHJvb3RSb3V0ZSkgewogICAgICAgIHZhciByb290SXRlbSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaXRlbSksIHsKICAgICAgICAgIGxhYmVsLAogICAgICAgICAgcGF0aG5hbWU6IHJvb3RSb3V0ZSwKICAgICAgICAgIGlzUm9vdDogdHJ1ZQogICAgICAgIH0pOwoKICAgICAgICBpZiAocm91dGVQYXRoID09PSByb290Um91dGUpIHsKICAgICAgICAgIG1hdGNoZWRJdGVtID0gcm9vdEl0ZW07IC8vIOiuvue9rueahCByb290UGF0aAogICAgICAgIH0gZWxzZSBpZiAobm9kZVBhdGggPT09IHJvb3RSb3V0ZSkgewogICAgICAgICAgcm9vdEJhY2tJdGVtID0gcm9vdEl0ZW07IC8vIOm7mOiupCByb290CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHZhciBtYXRjaCA9IG1hdGNoUGF0aChwYXRoLCB7CiAgICAgICAgcGF0aDogcGF0aG5hbWUsCiAgICAgICAgZXhhY3QsCiAgICAgICAgc3RyaWN0CiAgICAgIH0pOwogICAgICB2YXIgaXNNYXRjaCA9IChtYXRjaCA9PT0gbnVsbCB8fCBtYXRjaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF0Y2gudXJsKSA9PT0gcGF0aDsKCiAgICAgIGlmIChpc01hdGNoKSB7CiAgICAgICAgdmFyIHNoYXJlZCA9ICEhZmluZFRyZWUoaXRlbXMsIGkgPT4gaS5yb3V0ZVRhYlNoYXJlZCk7CiAgICAgICAgbWF0Y2hlZEl0ZW0gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pLCB7CiAgICAgICAgICBsYWJlbCwKICAgICAgICAgIHBhdGhuYW1lOiBwYXRoLAogICAgICAgICAgc2hhcmVkCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpc01hdGNoOwogICAgfSk7CiAgICB2YXIgY3VyciA9IG1hdGNoZWRJdGVtIHx8IHJvb3RCYWNrSXRlbSB8fCBub3RGaW5kUm91dGU7CiAgICByZXR1cm4gY3VycjsKICB9OyAvLyDmuIXnqbrmiYDmnInml7Yg6buY6K6k6Lez5YiwIOmmlumhtQoKCiAgdmFyIG9uQ2xlYXJBbGwgPSBmdW5jdGlvbiBvbkNsZWFyQWxsKHRhYkRvbSkgewogICAgdmFyIHJlZnJlc2hSb290ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0cnVlOwogICAgdmFyIHsKICAgICAgdGFicwogICAgfSA9ICRzdG9yZVJlZi5jdXJyZW50OwogICAgcm91dGVRdWVyeUN0cmwoJycpOyAvLyDpmLLmraLpppbmrKHov5vlhaXpobXpnaIg55u05o6l5Yi35paw5Lik5qyhCgogICAgaWYgKHJlZnJlc2hSb290ICE9PSBmYWxzZSAmJiBnZXRDdXJyUm91dGVQYXRoKCkgIT09ICRzdG9yZVJlZi5jdXJyZW50LnJvb3RSb3V0ZSkgewogICAgICBjaGFuZ2VQYXRoKCRzdG9yZVJlZi5jdXJyZW50LnJvb3RSb3V0ZSk7CiAgICB9CgogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGlmICh0YWJEb20pIHsKICAgICAgICB0YWJzLnJlbW92ZVRhYih0YWJEb20sIHsKICAgICAgICAgIGF1dG9BY3RpdmU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFicy50YWJFbHMuZm9yRWFjaCh0YWJFbCA9PiB7CiAgICAgICAgICBpZiAodGFiRWwuZGF0YXNldC5yb290ICE9PSAkc3RvcmVSZWYuY3VycmVudC5yb290Um91dGUpIHsKICAgICAgICAgICAgdGFicy5yZW1vdmVUYWIodGFiRWwsIHsKICAgICAgICAgICAgICBhdXRvQWN0aXZlOiBmYWxzZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgY2FjaGUuY2xlYXJDYWNoZWRUYWJzKCk7CiAgICB9LCAxMDApOwogIH07CgogIHZhciBvblJlbW92ZSA9IHRhYkVsID0+IHsKICAgIHZhciB7CiAgICAgIHRhYnMKICAgIH0gPSAkc3RvcmVSZWYuY3VycmVudDsKCiAgICBpZiAodGFicy50YWJFbHMubGVuZ3RoICE9PSAxKSB7CiAgICAgIHJvdXRlUXVlcnlDdHJsKHRhYkVsLmRhdGFzZXQucGF0aCwgJycpOwogICAgICB0YWJzLnJlbW92ZVRhYih0YWJFbCk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoIXRhYkVsLmRhdGFzZXQucm9vdCkgewogICAgICBvbkNsZWFyQWxsKHRhYkVsKTsKICAgIH0KICB9OwoKICB2YXIgb25JdGVtTWVudXMgPSBlID0+IHsKICAgIGlmIChlLmJ1dHRvbiAhPT0gMikgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIHRhcmdldCA9IGUuY3VycmVudFRhcmdldDsKICAgIHZhciB7CiAgICAgIHRhYnMKICAgIH0gPSAkc3RvcmVSZWYuY3VycmVudDsKICAgIHZhciBhbGxUYWJzID0gdGFicy50YWJFbHM7CiAgICB2YXIgb25seU9uZSA9IGFsbFRhYnMubGVuZ3RoID09PSAxOwogICAgdmFyIGlzTGFzdE9uZSA9IG9ubHlPbmUgPyB0cnVlIDogYWxsVGFic1thbGxUYWJzLmxlbmd0aCAtIDFdID09PSB0YXJnZXQ7CiAgICB2YXIgYWN0aW9ucyA9IFt0YWJzLmFjdGl2ZVRhYkVsID09PSB0YXJnZXQgJiYgewogICAgICBsYWJlbDogJ+WIt+aWsOmhtemdoicsCiAgICAgIG9uU2VsZWN0OiAoKSA9PiB7CiAgICAgICAgLy8gVE9ETzog5Yi35paw6aG16Z2iIOS8muS4ouWksSDmn6Xor6Llj4LmlbAKICAgICAgICBjaGFuZ2VQYXRoKHRhcmdldC5kYXRhc2V0LnBhdGggfHwgJHN0b3JlUmVmLmN1cnJlbnQucm9vdFJvdXRlKTsKICAgICAgfQogICAgfSwgIW9ubHlPbmUgJiYgewogICAgICBsYWJlbDogJ+WFs+mXreWFtuS7licsCiAgICAgIG9uU2VsZWN0OiAoKSA9PiB7CiAgICAgICAgYWxsVGFicy5mb3JFYWNoKHRhYkVsID0+IHsKICAgICAgICAgIGlmICh0YWJFbCAhPT0gdGFyZ2V0KSB7CiAgICAgICAgICAgIHRhYnMucmVtb3ZlVGFiKHRhYkVsKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjYWNoZS5jYWNoZVRhYnModGFicy50YWJFbHMpOwogICAgICB9CiAgICB9LCAhb25seU9uZSAmJiAhaXNMYXN0T25lICYmIHsKICAgICAgbGFiZWw6ICflhbPpl63lj7PovrknLAogICAgICBvblNlbGVjdDogKCkgPT4gewogICAgICAgIHZhciBpc0FmdGVyID0gZmFsc2U7CiAgICAgICAgYWxsVGFicy5mb3JFYWNoKHRhYkVsID0+IHsKICAgICAgICAgIGlmICh0YWJFbCA9PT0gdGFyZ2V0KSB7CiAgICAgICAgICAgIGlzQWZ0ZXIgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmIChpc0FmdGVyKSB7CiAgICAgICAgICAgIHRhYnMucmVtb3ZlVGFiKHRhYkVsKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjYWNoZS5jYWNoZVRhYnModGFicy50YWJFbHMpOwogICAgICB9CiAgICB9LCAhb25seU9uZSAmJiB7CiAgICAgIGxhYmVsOiAn5YWz6Zet5omA5pyJJywKICAgICAgb25TZWxlY3Q6IG9uQ2xlYXJBbGwKICAgIH1dLmZpbHRlcihCb29sZWFuKTsKICAgIHZhciByb3V0ZUl0ZW1JbmZvID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBnZXRSb3V0ZUluZm8oKSksIHsKICAgICAgaXNSb290OiAhIXRhcmdldC5kYXRhc2V0LnJvb3QsCiAgICAgIGFjdGl2ZTogdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnYWN0aXZlJykKICAgIH0pOwogICAgdmFyIG1lbnVzID0gb25Db250ZXh0TWVudSA/IG9uQ29udGV4dE1lbnUoYWN0aW9ucywgcm91dGVJdGVtSW5mbykgOiBhY3Rpb25zOwogICAgb3BlbkNvbnRleHRNZW51cyh7CiAgICAgIHg6IGUuY2xpZW50WCwKICAgICAgeTogZS5jbGllbnRZCiAgICB9LCBtZW51cyk7CiAgfTsKCiAgdmFyIG9uTW91bnRlZCA9ICgpID0+IHsKICAgIHZhciAkdGFicyA9ICQoJHN0b3JlUmVmLmN1cnJlbnQuJHRhYnNEb20pOwogICAgdmFyIHRhYnMgPSBuZXcgQ2hyb21lVGFicygpOwogICAgdmFyIHRhYnNFbGUgPSAkdGFicy5nZXQoMCk7CiAgICB0YWJzLmluaXQodGFic0VsZSk7CiAgICAkc3RvcmVSZWYuY3VycmVudC4kdGFicyA9ICR0YWJzOwogICAgJHN0b3JlUmVmLmN1cnJlbnQudGFicyA9IHRhYnM7CiAgICAkdGFicy5vbignY29udGV4dG1lbnUnLCAoKSA9PiBmYWxzZSkub24oJ21vdXNlZG93bicsICcuY2hyb21lLXRhYicsIG9uSXRlbU1lbnVzKTsKICAgIHRhYnNFbGUuYWRkRXZlbnRMaXN0ZW5lcignYWN0aXZlVGFiQ2hhbmdlJywgKF9yZWYpID0+IHsKICAgICAgdmFyIHsKICAgICAgICBkZXRhaWwKICAgICAgfSA9IF9yZWY7CiAgICAgIHZhciB7CiAgICAgICAgdGFiRWwsCiAgICAgICAgdGFiUHJvcGVydGllcyA9IHt9CiAgICAgIH0gPSBkZXRhaWw7CiAgICAgIHZhciB7CiAgICAgICAgY2hhbmdlUm91dGUsCiAgICAgICAgaXNBZGQKICAgICAgfSA9IHRhYlByb3BlcnRpZXM7CiAgICAgIHZhciB7CiAgICAgICAgcGF0aCA9ICcnLAogICAgICAgIHN0YXRlID0gJycKICAgICAgfSA9IHRhYkVsLmRhdGFzZXQ7CiAgICAgIGNhY2hlLmNhY2hlVGFicyh0YWJzLnRhYkVscyk7IC8vIOa3u+WKoOaXtiDvvIwg6Lev55Sx55u45ZCMIO+8jCDmmI7noa7moIfmmI7vvIwg5oOF5Ya15LiL77yM5LiN6ZyA6KaB6Lez6L2s6Lev55SxCgogICAgICBpZiAoIWNoYW5nZVJvdXRlIHx8IGlzQWRkIHx8IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gcGF0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyDmkLrluKbnirbmgIHkv6Hmga/kuIDotbfot7PovawKCgogICAgICBjaGFuZ2VQYXRoKCIiLmNvbmNhdChwYXRoKS5jb25jYXQoIXN0YXRlID8gJycgOiAiPyIuY29uY2F0KHN0YXRlKSkpOwogICAgfSk7CiAgICB0YWJzRWxlLmFkZEV2ZW50TGlzdGVuZXIoJ3RhYkFkZCcsIChfcmVmMikgPT4gewogICAgICB2YXIgewogICAgICAgIGRldGFpbAogICAgICB9ID0gX3JlZjI7CiAgICAgIHZhciB7CiAgICAgICAgdGFiRWwsCiAgICAgICAgdGFiUHJvcGVydGllcwogICAgICB9ID0gZGV0YWlsOwogICAgICB2YXIgewogICAgICAgIHBhdGhuYW1lLAogICAgICAgIGlzUm9vdAogICAgICB9ID0gdGFiUHJvcGVydGllczsKICAgICAgdGFiRWwuZGF0YXNldC5wYXRoID0gcGF0aG5hbWUgfHwgJyc7CiAgICAgIHRhYkVsLmRhdGFzZXQucm9vdCA9IGlzUm9vdCA/IHBhdGhuYW1lIDogJyc7CiAgICB9KTsKICAgIHRhYnNFbGUuYWRkRXZlbnRMaXN0ZW5lcignb25UYWJSZW1vdmUnLCAoX3JlZjMpID0+IHsKICAgICAgdmFyIHsKICAgICAgICBkZXRhaWwKICAgICAgfSA9IF9yZWYzOwogICAgICBvblJlbW92ZShkZXRhaWwudGFiRWwpOwogICAgfSk7CiAgICBzdWJzY3JpYmUobWVzc2FnZS5jbGVhclJvdXRlVGFicywgKF9yZWY0KSA9PiB7CiAgICAgIHZhciB7CiAgICAgICAgcmVmcmVzaFJvb3QKICAgICAgfSA9IF9yZWY0OwogICAgICBvbkNsZWFyQWxsKHVuZGVmaW5lZCwgcmVmcmVzaFJvb3QpOwogICAgfSk7CiAgICBzdWJzY3JpYmUobWVzc2FnZS5yb3V0ZVRhYkNoYW5nZSwgKCkgPT4gewogICAgICB2YXIgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnPycpWzFdIHx8ICcnOwogICAgICByb3V0ZVF1ZXJ5Q3RybCh0YWJzLmFjdGl2ZVRhYkVsLmRhdGFzZXQucGF0aCwgcXVlcnkpOwogICAgICB0YWJzLmFjdGl2ZVRhYkVsLmRhdGFzZXQuc3RhdGUgPSBxdWVyeTsKICAgIH0pOwogIH07CgogIHZhciBvblVubW91bnRlZCA9ICgpID0+IHsKICAgIHVuc3Vic2NyaWJlKFttZXNzYWdlLmNsZWFyUm91dGVUYWJzLCBtZXNzYWdlLnJvdXRlVGFiQ2hhbmdlXSk7CiAgfTsKCiAgdXNlRWZmZWN0KCgpID0+IG9uVW5tb3VudGVkLCBbXSk7CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHZhciBpc01vdW50ZWQgPSAhISRzdG9yZVJlZi5jdXJyZW50LiR0YWJzOyAvLyDmnKrliJ3lp4vljJYg5YWI5Yid5aeL5YyWCgogICAgaWYgKCFpc01vdW50ZWQpIHsKICAgICAgb25Nb3VudGVkKCk7CiAgICB9CgogICAgdmFyIHsKICAgICAgdGFicywKICAgICAgJHRhYnMKICAgIH0gPSAkc3RvcmVSZWYuY3VycmVudDsKICAgIHZhciBjdXJyID0gZ2V0Um91dGVJbmZvKGxvY2F0aW9uLnBhdGhuYW1lKTsgLy8g5Yid5qyh5Yqg6L29IOmmlumhteaXtu+8jOWbnuW9kuS4iuasoeS4gOasoSBhY3RpdmUgdGFiCgogICAgaWYgKCFpc01vdW50ZWQgJiYgY3Vyci5wYXRobmFtZSA9PT0gJHN0b3JlUmVmLmN1cnJlbnQucm9vdFJvdXRlKSB7CiAgICAgIHZhciBfdGFiRWwgPSAkdGFicy5maW5kKCcuY2hyb21lLXRhYltkYXRhLWFjdGl2ZV0nKS5nZXQoMCk7CgogICAgICBpZiAoX3RhYkVsKSB7CiAgICAgICAgdGFicy5zZXRDdXJyZW50VGFiKF90YWJFbCwgewogICAgICAgICAgY2hhbmdlUm91dGU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9IC8vIOW3sue7jyDlnKjliJfooajnmoQg55u05o6lIOWumuS9jeW9k+WJjei3r+eUsQoKCiAgICB2YXIgdGFiRWwgPSAkdGFicy5maW5kKCIuY2hyb21lLXRhYltkYXRhLXBhdGg9XCIiLmNvbmNhdChjdXJyLnBhdGhuYW1lLCAiXCJdIikpLmdldCgwKTsKCiAgICBpZiAodGFiRWwpIHsKICAgICAgdGFiRWwuZGF0YXNldC5zdGF0ZSA9ICcnOyAvLyDmuIXpmaTlvZPliY3nirbmgIEKCiAgICAgIHRhYnMuc2V0Q3VycmVudFRhYih0YWJFbCwgewogICAgICAgIGNoYW5nZVJvdXRlOiBmYWxzZQogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfSAvLyDotoXlh7rmnIDlpKflgLwg5YWI56e76Zmk5pyA5bem6L6555qECgoKICAgIGlmICh0YWJzLnRhYkVscy5sZW5ndGggPj0gbWF4Q291bnQpIHsKICAgICAgdGFicy5yZW1vdmVUYWIodGFicy50YWJFbHNbMF0sIHsKICAgICAgICBhdXRvQWN0aXZlOiBmYWxzZQogICAgICB9KTsKICAgIH0gLy8g5YWx5LqrIHJvdXRlVGFiCgoKICAgIGlmIChjdXJyLnNoYXJlZCkgewogICAgICB2YXIgJHNoYXJlZCA9ICR0YWJzLmZpbmQoJy5jaHJvbWUtdGFiW2RhdGEtYWN0aXZlXScpOwogICAgICB2YXIgc2hhcmVkRWwgPSAkc2hhcmVkLmdldCgwKTsKCiAgICAgIGlmIChzaGFyZWRFbCkgewogICAgICAgICRzaGFyZWQuZmluZCgnLmNocm9tZS10YWItdGl0bGUnKS5odG1sKGN1cnIubGFiZWwpOwogICAgICAgIHNoYXJlZEVsLmRhdGFzZXQuc3RhdGUgPSAnJzsgLy8g5riF6Zmk5b2T5YmN54q25oCBCgogICAgICAgIHNoYXJlZEVsLmRhdGFzZXQucGF0aCA9IGN1cnIucGF0aG5hbWU7CiAgICAgICAgY2FjaGUuY2FjaGVUYWJzKHRhYnMudGFiRWxzKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0gLy8g5re75Yqg5LiA5LiqdGFiCgoKICAgIHRhYnMuYWRkVGFiKGN1cnIpOwogIH0sIFtsb2NhdGlvbl0pOwogIHZhciBUYWJzID0gdXNlTWVtbygoKSA9PiB7CiAgICB2YXIgdGFiSXRlbXMgPSAhc3RvcmFnZSA/IFtdIDogY2FjaGUuZ2V0VmFsaWRDYWNoZVRhYnMoKTsKICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICBjbGFzc05hbWU6ICJjaHJvbWUtdGFicyIsCiAgICAgIHJlZjogZG9tID0+IHsKICAgICAgICAkc3RvcmVSZWYuY3VycmVudC4kdGFic0RvbSA9IGRvbTsKICAgICAgfQogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgY2xhc3NOYW1lOiAiY2hyb21lLXRhYnMtY29udGVudCIKICAgIH0sIHRhYkl0ZW1zLm1hcChpdGVtID0+IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgIGtleTogaXRlbS5pZCwKICAgICAgY2xhc3NOYW1lOiAiY2hyb21lLXRhYiIsCiAgICAgICJkYXRhLXJvb3QiOiBpdGVtLmlzUm9vdCA/IGl0ZW0ucGF0aG5hbWUgOiAnJywKICAgICAgImRhdGEtcGF0aCI6IGl0ZW0ucGF0aG5hbWUKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgIGNsYXNzTmFtZTogImNocm9tZS10YWItZGl2aWRlcnMiCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgY2xhc3NOYW1lOiAiY2hyb21lLXRhYi1iYWNrZ3JvdW5kIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIHsKICAgICAgdmVyc2lvbjogIjEuMSIsCiAgICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGVmcyIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzeW1ib2wiLCB7CiAgICAgIGlkOiAiY2hyb21lLXRhYi1nZW9tZXRyeS1sZWZ0IiwKICAgICAgdmlld0JveDogIjAgMCAyMTQgMzYiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgZDogIk0xNyAwaDE5N3YzNkgwdi0yYzQuNSAwIDktMy41IDktOFY4YzAtNC41IDMuNS04IDgtOHoiCiAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzeW1ib2wiLCB7CiAgICAgIGlkOiAiY2hyb21lLXRhYi1nZW9tZXRyeS1yaWdodCIsCiAgICAgIHZpZXdCb3g6ICIwIDAgMjE0IDM2IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInVzZSIsIHsKICAgICAgeGxpbmtIcmVmOiAiI2Nocm9tZS10YWItZ2VvbWV0cnktbGVmdCIKICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImNsaXBQYXRoIiwgewogICAgICBpZDogImNyb3AiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicmVjdCIsIHsKICAgICAgY2xhc3NOYW1lOiAibWFzayIsCiAgICAgIHdpZHRoOiAiMTAwJSIsCiAgICAgIGhlaWdodDogIjEwMCUiLAogICAgICB4OiAiMCIKICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdmciLCB7CiAgICAgIHdpZHRoOiAiNTIlIiwKICAgICAgaGVpZ2h0OiAiMTAwJSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ1c2UiLCB7CiAgICAgIHhsaW5rSHJlZjogIiNjaHJvbWUtdGFiLWdlb21ldHJ5LWxlZnQiLAogICAgICB3aWR0aDogIjIxNCIsCiAgICAgIGhlaWdodDogIjM2IiwKICAgICAgY2xhc3NOYW1lOiAiY2hyb21lLXRhYi1nZW9tZXRyeSIKICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImciLCB7CiAgICAgIHRyYW5zZm9ybTogInNjYWxlKC0xLCAxKSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdmciLCB7CiAgICAgIHdpZHRoOiAiNTIlIiwKICAgICAgaGVpZ2h0OiAiMTAwJSIsCiAgICAgIHg6ICItMTAwJSIsCiAgICAgIHk6ICIwIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInVzZSIsIHsKICAgICAgeGxpbmtIcmVmOiAiI2Nocm9tZS10YWItZ2VvbWV0cnktcmlnaHQiLAogICAgICB3aWR0aDogIjIxNCIsCiAgICAgIGhlaWdodDogIjM2IiwKICAgICAgY2xhc3NOYW1lOiAiY2hyb21lLXRhYi1nZW9tZXRyeSIKICAgIH0pKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgY2xhc3NOYW1lOiAiY2hyb21lLXRhYi1jb250ZW50IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgY2xhc3NOYW1lOiAiY2hyb21lLXRhYi1mYXZpY29uIgogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgIGNsYXNzTmFtZTogImNocm9tZS10YWItdGl0bGUiCiAgICB9LCBpdGVtLmxhYmVsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgY2xhc3NOYW1lOiAiY2hyb21lLXRhYi1kcmFnLWhhbmRsZSIKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICBjbGFzc05hbWU6ICJjaHJvbWUtdGFiLWNsb3NlIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIHsKICAgICAgdmlld0JveDogIjAgMCAxMDI0IDEwMjQiLAogICAgICB2ZXJzaW9uOiAiMS4xIiwKICAgICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICAgICJwLWlkIjogIjIzNTIiLAogICAgICB4bWxuc1hsaW5rOiAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsCiAgICAgIHdpZHRoOiAiMjAwIiwKICAgICAgaGVpZ2h0OiAiMjAwIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgIGQ6ICJNNTE4LjU4MTU4NzcgNDY5LjQyODc5MTU2TDI0MC4wMjU3NjYwOSAxOTAuODczNjQ4ODlhMzQuNzYxNDI4ODIgMzQuNzYxNDI4ODIgMCAxIDAtNDkuMTc1MjAwOTcgNDkuMTI5NzEyMzhsMjc4LjU1NDQ2Mzc0IDI3OC41NzgyMjY0M0wxOTAuODUwNTY1MDggNzk3LjE1OTEzNTIyYTM0Ljc2MTQyODgyIDM0Ljc2MTQyODgyIDAgMSAwIDQ5LjE1Mjc5NjE5IDQ5LjE1MjExNzI1bDI3OC41NzgyMjY1MS0yNzguNTU0NDYzNzggMjc4LjU3ODIyNjM0IDI3OC41NTQ0NjM3OGEzNC43NjE0Mjg4MiAzNC43NjE0Mjg4MiAwIDEgMCA0OS4xNTIxMTcyOC00OS4xMjkwMzM0NWwtMjc4LjU1NDQ2Mzc0LTI3OC42MDA2MzEyNCAyNzguNTU0NDYzNzQtMjc4LjU1NTE0MjcxYTM0Ljc2MTQyODgyIDM0Ljc2MTQyODgyIDAgMSAwLTQ5LjE1MjExNzI4LTQ5LjE1Mjc5NjIyTDUxOC42MDQ2NzE0NSA0NjkuNDI4NzkxNTZ6IiwKICAgICAgInAtaWQiOiAiMjM1MyIKICAgIH0pKSkpKSkpKTsKICB9LCBbXSk7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZFJvdXRlVGFicywgewogICAgY2xhc3NOYW1lOiAiIi5jb25jYXQodGhlbWVOcywgIlJvdXRlVGFicyBjaHJvbWUtcm91dGUtdGFicyIpCiAgfSwgVGFicyk7Cn0pOw=="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/route_tabs/index.js"],"names":["openContextMenus","findTree","debounce","React","useEffect","useMemo","useRef","matchPath","withRouter","app","message","storage","storeKeys","rootRoute","defRouteRoute","getCurrRoutePath","subscribe","unsubscribe","setGlobal","cache","ChromeTabs","StyledRouteTabs","props","routes","routesProp","themeNs","history","maxCount","rootRouteProp","onContextMenu","location","$storeRef","routeQuery","$tabsDom","$tabs","undefined","tabs","current","notFindRoute","label","pathname","constants","notFound","route","changePath","path","replace","routeQueryCtrl","val","getRouteInfo","rootBackItem","matchedItem","item","_","__","items","limitLabel","exact","strict","routePath","nodePath","rootItem","Object","assign","isRoot","match","isMatch","url","shared","i","routeTabShared","curr","onClearAll","tabDom","refreshRoot","setTimeout","removeTab","autoActive","tabEls","forEach","tabEl","dataset","root","clearCachedTabs","onRemove","length","onItemMenus","e","button","target","currentTarget","allTabs","onlyOne","isLastOne","actions","activeTabEl","onSelect","cacheTabs","isAfter","filter","Boolean","routeItemInfo","active","hasAttribute","menus","x","clientX","y","clientY","onMounted","$","tabsEle","get","init","on","addEventListener","detail","tabProperties","changeRoute","isAdd","state","window","clearRouteTabs","routeTabChange","query","href","split","onUnmounted","isMounted","find","setCurrentTab","$shared","sharedEl","html","addTab","Tabs","tabItems","getValidCacheTabs","createElement","className","ref","dom","map","key","id","version","xmlns","viewBox","d","xlinkHref","width","height","transform","xmlnsXlink"],"mappings":"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","sourcesContent":["/**\n * 路由切换器 组件\n *\n * TODO:\n * 1. 添加 ICON 支持，showIcon, RouteIcon 请求中 LoadingIcon 之类的\n * 2. 增加 可编辑/固定 模式\n * 3. 将组件转为 纯 react 组件，容易控制\n */\nimport { openContextMenus } from 'amis';\nimport { findTree } from 'amis/lib/utils/helper';\nimport { debounce } from 'lodash';\nimport React, { useEffect, useMemo, useRef } from 'react';\nimport { matchPath, withRouter } from 'react-router-dom';\nimport { app } from \"../../app\";\nimport { message, storage as storeKeys, rootRoute as defRouteRoute } from \"../../constants\";\nimport { getCurrRoutePath } from \"../../routes/exports\";\nimport { subscribe, unsubscribe } from \"../../utils/message\";\nimport { setGlobal } from \"../../utils/store\";\nimport * as cache from \"./cache\";\nimport ChromeTabs from \"./chrome_tabs\";\nimport { StyledRouteTabs } from \"./styled\";\nexport default withRouter((props) => {\n    const { routes: routesProp, themeNs, history, maxCount = 20, storage, rootRoute: rootRouteProp = defRouteRoute, onContextMenu, } = props;\n    const { location } = history;\n    const $storeRef = useRef({\n        rootRoute: rootRouteProp,\n        routeQuery: {},\n        routes: routesProp,\n        $tabsDom: null,\n        $tabs: undefined,\n        tabs: {},\n    });\n    $storeRef.current.rootRoute = rootRouteProp;\n    $storeRef.current.routes = routesProp;\n    const notFindRoute = {\n        label: '页面不存在',\n        pathname: app.constants.notFound.route,\n    };\n    // TODO: 优化跳转逻辑，跳转路由\n    const changePath = debounce((path) => {\n        history.replace(path);\n    }, 100);\n    const routeQueryCtrl = (path, val = '') => {\n        if (path === '') {\n            $storeRef.current.routeQuery = {};\n            setGlobal(storeKeys.routeQuery, {});\n            return;\n        }\n        $storeRef.current.routeQuery[path] = val;\n        setGlobal(storeKeys.routeQuery, $storeRef.current.routeQuery);\n    };\n    // 获取路径信息\n    const getRouteInfo = (path = getCurrRoutePath()) => {\n        let rootBackItem;\n        let matchedItem;\n        const { rootRoute, routes } = $storeRef.current;\n        findTree(routes, (item, _, __, items) => {\n            const { limitLabel, \n            // routeTabInitQuery: initQuery,\n            exact, strict, path: routePath = '', nodePath = '', } = item;\n            const pathname = routePath || nodePath;\n            const label = item.label || limitLabel || notFindRoute.label;\n            if (!path || path === rootRoute) {\n                const rootItem = Object.assign(Object.assign({}, item), { label, pathname: rootRoute, isRoot: true });\n                if (routePath === rootRoute) {\n                    matchedItem = rootItem; // 设置的 rootPath\n                }\n                else if (nodePath === rootRoute) {\n                    rootBackItem = rootItem; // 默认 root\n                }\n                return false;\n            }\n            const match = matchPath(path, {\n                path: pathname,\n                exact,\n                strict,\n            });\n            const isMatch = (match === null || match === void 0 ? void 0 : match.url) === path;\n            if (isMatch) {\n                const shared = !!findTree(items, (i) => i.routeTabShared);\n                matchedItem = Object.assign(Object.assign({}, item), { label, pathname: path, shared });\n            }\n            return isMatch;\n        });\n        const curr = matchedItem || rootBackItem || notFindRoute;\n        return curr;\n    };\n    // 清空所有时 默认跳到 首页\n    const onClearAll = (tabDom, refreshRoot = true) => {\n        const { tabs } = $storeRef.current;\n        routeQueryCtrl('');\n        // 防止首次进入页面 直接刷新两次\n        if (refreshRoot !== false && getCurrRoutePath() !== $storeRef.current.rootRoute) {\n            changePath($storeRef.current.rootRoute);\n        }\n        setTimeout(() => {\n            if (tabDom) {\n                tabs.removeTab(tabDom, { autoActive: false });\n            }\n            else {\n                tabs.tabEls.forEach((tabEl) => {\n                    if (tabEl.dataset.root !== $storeRef.current.rootRoute) {\n                        tabs.removeTab(tabEl, { autoActive: false });\n                    }\n                });\n            }\n            cache.clearCachedTabs();\n        }, 100);\n    };\n    const onRemove = (tabEl) => {\n        const { tabs } = $storeRef.current;\n        if (tabs.tabEls.length !== 1) {\n            routeQueryCtrl(tabEl.dataset.path, '');\n            tabs.removeTab(tabEl);\n            return;\n        }\n        if (!tabEl.dataset.root) {\n            onClearAll(tabEl);\n        }\n    };\n    const onItemMenus = (e) => {\n        if (e.button !== 2) {\n            return;\n        }\n        const target = e.currentTarget;\n        const { tabs } = $storeRef.current;\n        const allTabs = tabs.tabEls;\n        const onlyOne = allTabs.length === 1;\n        const isLastOne = onlyOne ? true : allTabs[allTabs.length - 1] === target;\n        const actions = [\n            tabs.activeTabEl === target && {\n                label: '刷新页面',\n                onSelect: () => {\n                    // TODO: 刷新页面 会丢失 查询参数\n                    changePath(target.dataset.path || $storeRef.current.rootRoute);\n                },\n            },\n            !onlyOne && {\n                label: '关闭其他',\n                onSelect: () => {\n                    allTabs.forEach((tabEl) => {\n                        if (tabEl !== target) {\n                            tabs.removeTab(tabEl);\n                        }\n                    });\n                    cache.cacheTabs(tabs.tabEls);\n                },\n            },\n            !onlyOne &&\n                !isLastOne && {\n                label: '关闭右边',\n                onSelect: () => {\n                    let isAfter = false;\n                    allTabs.forEach((tabEl) => {\n                        if (tabEl === target) {\n                            isAfter = true;\n                        }\n                        else if (isAfter) {\n                            tabs.removeTab(tabEl);\n                        }\n                    });\n                    cache.cacheTabs(tabs.tabEls);\n                },\n            },\n            !onlyOne && {\n                label: '关闭所有',\n                onSelect: onClearAll,\n            },\n        ].filter(Boolean);\n        const routeItemInfo = Object.assign(Object.assign({}, getRouteInfo()), { isRoot: !!target.dataset.root, active: target.hasAttribute('active') });\n        const menus = onContextMenu ? onContextMenu(actions, routeItemInfo) : actions;\n        openContextMenus({\n            x: e.clientX,\n            y: e.clientY,\n        }, menus);\n    };\n    const onMounted = () => {\n        const $tabs = $($storeRef.current.$tabsDom);\n        const tabs = new ChromeTabs();\n        const tabsEle = $tabs.get(0);\n        tabs.init(tabsEle);\n        $storeRef.current.$tabs = $tabs;\n        $storeRef.current.tabs = tabs;\n        $tabs.on('contextmenu', () => false).on('mousedown', '.chrome-tab', onItemMenus);\n        tabsEle.addEventListener('activeTabChange', ({ detail }) => {\n            const { tabEl, tabProperties = {} } = detail;\n            const { changeRoute, isAdd } = tabProperties;\n            const { path = '', state = '' } = tabEl.dataset;\n            cache.cacheTabs(tabs.tabEls);\n            // 添加时 ， 路由相同 ， 明确标明， 情况下，不需要跳转路由\n            if (!changeRoute || isAdd || window.location.pathname === path) {\n                return;\n            }\n            // 携带状态信息一起跳转\n            changePath(`${path}${!state ? '' : `?${state}`}`);\n        });\n        tabsEle.addEventListener('tabAdd', ({ detail }) => {\n            const { tabEl, tabProperties } = detail;\n            const { pathname, isRoot } = tabProperties;\n            tabEl.dataset.path = pathname || '';\n            tabEl.dataset.root = isRoot ? pathname : '';\n        });\n        tabsEle.addEventListener('onTabRemove', ({ detail }) => {\n            onRemove(detail.tabEl);\n        });\n        subscribe(message.clearRouteTabs, ({ refreshRoot }) => {\n            onClearAll(undefined, refreshRoot);\n        });\n        subscribe(message.routeTabChange, () => {\n            const query = window.location.href.split('?')[1] || '';\n            routeQueryCtrl(tabs.activeTabEl.dataset.path, query);\n            tabs.activeTabEl.dataset.state = query;\n        });\n    };\n    const onUnmounted = () => {\n        unsubscribe([message.clearRouteTabs, message.routeTabChange]);\n    };\n    useEffect(() => onUnmounted, []);\n    useEffect(() => {\n        const isMounted = !!$storeRef.current.$tabs;\n        // 未初始化 先初始化\n        if (!isMounted) {\n            onMounted();\n        }\n        const { tabs, $tabs } = $storeRef.current;\n        const curr = getRouteInfo(location.pathname);\n        // 初次加载 首页时，回归上次一次 active tab\n        if (!isMounted && curr.pathname === $storeRef.current.rootRoute) {\n            const tabEl = $tabs.find('.chrome-tab[data-active]').get(0);\n            if (tabEl) {\n                tabs.setCurrentTab(tabEl, { changeRoute: false });\n                return;\n            }\n        }\n        // 已经 在列表的 直接 定位当前路由\n        const tabEl = $tabs.find(`.chrome-tab[data-path=\"${curr.pathname}\"]`).get(0);\n        if (tabEl) {\n            tabEl.dataset.state = ''; // 清除当前状态\n            tabs.setCurrentTab(tabEl, { changeRoute: false });\n            return;\n        }\n        // 超出最大值 先移除最左边的\n        if (tabs.tabEls.length >= maxCount) {\n            tabs.removeTab(tabs.tabEls[0], { autoActive: false });\n        }\n        // 共享 routeTab\n        if (curr.shared) {\n            const $shared = $tabs.find('.chrome-tab[data-active]');\n            const sharedEl = $shared.get(0);\n            if (sharedEl) {\n                $shared.find('.chrome-tab-title').html(curr.label);\n                sharedEl.dataset.state = ''; // 清除当前状态\n                sharedEl.dataset.path = curr.pathname;\n                cache.cacheTabs(tabs.tabEls);\n                return;\n            }\n        }\n        // 添加一个tab\n        tabs.addTab(curr);\n    }, [location]);\n    const Tabs = useMemo(() => {\n        const tabItems = !storage ? [] : cache.getValidCacheTabs();\n        return (React.createElement(\"div\", { className: \"chrome-tabs\", ref: (dom) => {\n                $storeRef.current.$tabsDom = dom;\n            } },\n            React.createElement(\"div\", { className: \"chrome-tabs-content\" }, tabItems.map((item) => (React.createElement(\"div\", { key: item.id, className: \"chrome-tab\", \"data-root\": item.isRoot ? item.pathname : '', \"data-path\": item.pathname },\n                React.createElement(\"div\", { className: \"chrome-tab-dividers\" }),\n                React.createElement(\"div\", { className: \"chrome-tab-background\" },\n                    React.createElement(\"svg\", { version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\" },\n                        React.createElement(\"defs\", null,\n                            React.createElement(\"symbol\", { id: \"chrome-tab-geometry-left\", viewBox: \"0 0 214 36\" },\n                                React.createElement(\"path\", { d: \"M17 0h197v36H0v-2c4.5 0 9-3.5 9-8V8c0-4.5 3.5-8 8-8z\" })),\n                            React.createElement(\"symbol\", { id: \"chrome-tab-geometry-right\", viewBox: \"0 0 214 36\" },\n                                React.createElement(\"use\", { xlinkHref: \"#chrome-tab-geometry-left\" })),\n                            React.createElement(\"clipPath\", { id: \"crop\" },\n                                React.createElement(\"rect\", { className: \"mask\", width: \"100%\", height: \"100%\", x: \"0\" }))),\n                        React.createElement(\"svg\", { width: \"52%\", height: \"100%\" },\n                            React.createElement(\"use\", { xlinkHref: \"#chrome-tab-geometry-left\", width: \"214\", height: \"36\", className: \"chrome-tab-geometry\" })),\n                        React.createElement(\"g\", { transform: \"scale(-1, 1)\" },\n                            React.createElement(\"svg\", { width: \"52%\", height: \"100%\", x: \"-100%\", y: \"0\" },\n                                React.createElement(\"use\", { xlinkHref: \"#chrome-tab-geometry-right\", width: \"214\", height: \"36\", className: \"chrome-tab-geometry\" }))))),\n                React.createElement(\"div\", { className: \"chrome-tab-content\" },\n                    React.createElement(\"div\", { className: \"chrome-tab-favicon\" }),\n                    React.createElement(\"div\", { className: \"chrome-tab-title\" }, item.label),\n                    React.createElement(\"div\", { className: \"chrome-tab-drag-handle\" }),\n                    React.createElement(\"div\", { className: \"chrome-tab-close\" },\n                        React.createElement(\"svg\", { viewBox: \"0 0 1024 1024\", version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", \"p-id\": \"2352\", xmlnsXlink: \"http://www.w3.org/1999/xlink\", width: \"200\", height: \"200\" },\n                            React.createElement(\"path\", { d: \"M518.5815877 469.42879156L240.02576609 190.87364889a34.76142882 34.76142882 0 1 0-49.17520097 49.12971238l278.55446374 278.57822643L190.85056508 797.15913522a34.76142882 34.76142882 0 1 0 49.15279619 49.15211725l278.57822651-278.55446378 278.57822634 278.55446378a34.76142882 34.76142882 0 1 0 49.15211728-49.12903345l-278.55446374-278.60063124 278.55446374-278.55514271a34.76142882 34.76142882 0 1 0-49.15211728-49.15279622L518.60467145 469.42879156z\", \"p-id\": \"2353\" }))))))))));\n    }, []);\n    return (React.createElement(StyledRouteTabs, { className: `${themeNs}RouteTabs chrome-route-tabs` }, Tabs));\n});\n"]}]}