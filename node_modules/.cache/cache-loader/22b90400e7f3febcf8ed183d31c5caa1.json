{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\amis\\lib_limit_setting.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\amis\\lib_limit_setting.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCi8qKgogKiDmnYPpmZDphY3nva4KICovCnZhciBfX2RlY29yYXRlID0gdGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7CiAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLAogICAgICByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywKICAgICAgZDsKICBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJvYmplY3QiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSAiZnVuY3Rpb24iKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7ZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjsKICB9CiAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjsKfTsKCmltcG9ydCB7IFJlbmRlcmVyLCBmaWx0ZXIgfSBmcm9tICdhbWlzJzsKaW1wb3J0IHsgaXNFZmZlY3RpdmVBcGkgfSBmcm9tICdhbWlzL2xpYi91dGlscy9hcGknOwppbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnOwppbXBvcnQgTGltaXRTZXR0aW5nLCB7IExpbWl0U2V0dGluZ1Byb3BzLCBBdXRoTGltaXREYXRhIH0gZnJvbSAiLi4vbGltaXRfc2V0dGluZyI7CnZhciBMaWJMaW1pdFNldHRpbmcgPSBjbGFzcyBMaWJMaW1pdFNldHRpbmcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQgewogIHJlbmRlcigpIHsKICAgIHZhciB7CiAgICAgIGJ1dHRvbiA9IHt9LAogICAgICBtb2RhbCA9IHt9LAogICAgICBuYW1lID0gJ2xpbWl0JywKICAgICAgZW52LAogICAgICBkYXRhLAogICAgICBpbml0QXBpLAogICAgICBhcGksCiAgICAgIG1lc3NhZ2VzLAogICAgICBzYXZlQ29uZmlybVRleHQsCiAgICAgIHVzZUFsbExpbWl0LAogICAgICBnZXRMaW1pdCwKICAgICAgcmVuZGVyCiAgICB9ID0gdGhpcy5wcm9wczsKICAgIHZhciBhY3Rpb25UeXBlID0gYnV0dG9uLmFjdGlvblR5cGUgfHwgJ2RpYWxvZyc7CiAgICB2YXIgYnV0dG9uUHJvcHMgPSBPYmplY3QuYXNzaWduKHsKICAgICAgYWN0aW9uVHlwZSwKICAgICAgdHlwZTogJ2FjdGlvbicsCiAgICAgIGxhYmVsOiAn6K6+572u5p2D6ZmQJwogICAgfSwgYnV0dG9uKTsKICAgIHZhciBtb2RhbFByb3BzID0gT2JqZWN0LmFzc2lnbih7CiAgICAgIHRpdGxlOiAn6K6+572u5p2D6ZmQJywKICAgICAgc2l6ZTogJ2xnJywKICAgICAgc2hvd0Nsb3NlQnV0dG9uOiBmYWxzZSwKICAgICAgYWN0aW9uczogW10KICAgIH0sIG1vZGFsKTsKICAgIHZhciBsaW1pdENvbXBvbmVudCA9IHsKICAgICAgY29tcG9uZW50OiBhbWlzUHJvcHMgPT4gewogICAgICAgIHZhciB7CiAgICAgICAgICBkYXRhOiBsaW1pdERhdGEKICAgICAgICB9ID0gYW1pc1Byb3BzOwogICAgICAgIHZhciBpbml0RGF0YSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGF0YSksIGxpbWl0RGF0YSk7CgogICAgICAgIHZhciBvblNhdmUgPSBhdXRoRGF0YSA9PiB7CiAgICAgICAgICB2YXIgZmV0Y2hEYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpbml0RGF0YSksIGF1dGhEYXRhKTsKCiAgICAgICAgICBpZiAoaXNFZmZlY3RpdmVBcGkoYXBpLCBmZXRjaERhdGEpKSB7CiAgICAgICAgICAgIGVudi5mZXRjaGVyKGFwaSwgZmV0Y2hEYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgdmFyIHsKICAgICAgICAgICAgICAgIHN0YXR1cywKICAgICAgICAgICAgICAgIG1zZwogICAgICAgICAgICAgIH0gPSByZXM7CiAgICAgICAgICAgICAgdmFyIGhhc0Vycm9yID0gc3RhdHVzICE9PSAwOwoKICAgICAgICAgICAgICBpZiAoIWhhc0Vycm9yKSB7CiAgICAgICAgICAgICAgICBlbnYubm90aWZ5KCdzdWNjZXNzJywgKG1lc3NhZ2VzID09PSBudWxsIHx8IG1lc3NhZ2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXNzYWdlcy5zYXZlU3VjY2VzcykgfHwgJ+S/neWtmOaIkOWKnycpOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnJlbG9hZCkgewogICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uUXVlcnkoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW52Lm5vdGlmeSgnZXJyb3InLCAobWVzc2FnZXMgPT09IG51bGwgfHwgbWVzc2FnZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1lc3NhZ2VzLnNhdmVGYWlsZWQpIHx8IG1zZyB8fCAn5L+d5a2Y5aSx6LSlJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgZW52Lm5vdGlmeSgnZXJyb3InLCAobWVzc2FnZXMgPT09IG51bGwgfHwgbWVzc2FnZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1lc3NhZ2VzLnNhdmVGYWlsZWQpIHx8ICfkv53lrZjlpLHotKUnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMucHJvcHMub25TYXZlQ2xpY2spIHsKICAgICAgICAgICAgdGhpcy5wcm9wcy5vblNhdmVDbGljayhhdXRoRGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExpbWl0U2V0dGluZywgT2JqZWN0LmFzc2lnbih7fSwgYW1pc1Byb3BzLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJsaW1pdC1kcmF3ZXItIi5jb25jYXQoaXNFZmZlY3RpdmVBcGkoaW5pdEFwaSkgPyAnc2VydmljZScgOiAnbm9ybWFsJywgIiAiKSwKICAgICAgICAgIGxpbWl0OiBnZXRMaW1pdCA/IGdldExpbWl0KGxpbWl0RGF0YSkgOiBsaW1pdERhdGFbbmFtZV0gfHwgJycsCiAgICAgICAgICBzYXZlQ29uZmlybVRleHQ6IGZpbHRlcihzYXZlQ29uZmlybVRleHQsIGluaXREYXRhKSwKICAgICAgICAgIG9uU2F2ZUNsaWNrOiBvblNhdmUsCiAgICAgICAgICB1c2VBbGxMaW1pdDogdXNlQWxsTGltaXQsCiAgICAgICAgICBvbkNhbmNlbDogdGhpcy5wcm9wcy5vbkNhbmNlbENsaWNrCiAgICAgICAgfSkpOwogICAgICB9CiAgICB9OwogICAgdmFyIHNjaGVtYSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYnV0dG9uUHJvcHMpLCB7CiAgICAgIFthY3Rpb25UeXBlXTogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtb2RhbFByb3BzKSwgewogICAgICAgIGJvZHk6ICFpc0VmZmVjdGl2ZUFwaShpbml0QXBpKSA/IGxpbWl0Q29tcG9uZW50IDogewogICAgICAgICAgdHlwZTogJ3NlcnZpY2UnLAogICAgICAgICAgY2xhc3NOYW1lOiAnaC1mdWxsJywKICAgICAgICAgIG1lc3NhZ2VzOiB7CiAgICAgICAgICAgIGZldGNoRmFpbGVkOiBtZXNzYWdlcyA9PT0gbnVsbCB8fCBtZXNzYWdlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWVzc2FnZXMuaW5pdEZhaWxlZAogICAgICAgICAgfSwKICAgICAgICAgIGFwaTogaW5pdEFwaSwKICAgICAgICAgIGJvZHk6IGxpbWl0Q29tcG9uZW50CiAgICAgICAgfQogICAgICB9KQogICAgfSk7CiAgICByZXR1cm4gcmVuZGVyKCdib2R5Jywgc2NoZW1hKTsKICB9CgogIC8vIEB0cy1pZ25vcmUKICBfX3JlYWN0c3RhbmRpbl9fcmVnZW5lcmF0ZUJ5RXZhbChrZXksIGNvZGUpIHsKICAgIC8vIEB0cy1pZ25vcmUKICAgIHRoaXNba2V5XSA9IGV2YWwoY29kZSk7CiAgfQoKfTsKTGliTGltaXRTZXR0aW5nID0gX19kZWNvcmF0ZShbUmVuZGVyZXIoewogIHRlc3Q6IC8oXnxcLylsaWItbGltaXQtc2V0dGluZyQvLAogIG5hbWU6ICdsaWItbGltaXQtc2V0dGluZycKfSldLCBMaWJMaW1pdFNldHRpbmcpOwpleHBvcnQgeyBMaWJMaW1pdFNldHRpbmcgfTsKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdCA6IHVuZGVmaW5lZDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoX19kZWNvcmF0ZSwgIl9fZGVjb3JhdGUiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxhbWlzXFxsaWJfbGltaXRfc2V0dGluZy5qcyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKExpYkxpbWl0U2V0dGluZywgIkxpYkxpbWl0U2V0dGluZyIsICJDOlxcVXNlcnNcXGN3eFxcRGVza3RvcFxcZWRpdG9yLWRlbW9cXG5vZGVfbW9kdWxlc1xcQG92aW5lXFxjb3JlXFxsaWJcXGNvbXBvbmVudHNcXGFtaXNcXGxpYl9saW1pdF9zZXR0aW5nLmpzIik7Cn0pKCk7Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciBsZWF2ZU1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5sZWF2ZU1vZHVsZSA6IHVuZGVmaW5lZDsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/amis/lib_limit_setting.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","Renderer","filter","isEffectiveApi","React","LimitSetting","LimitSettingProps","AuthLimitData","LibLimitSetting","Component","render","button","modal","name","env","data","initApi","api","messages","saveConfirmText","useAllLimit","getLimit","props","actionType","buttonProps","assign","type","label","modalProps","title","size","showCloseButton","actions","limitComponent","component","amisProps","limitData","initData","onSave","authData","fetchData","fetcher","then","res","status","msg","hasError","notify","saveSuccess","reload","onQuery","saveFailed","catch","onSaveClick","createElement","className","limit","onCancel","onCancelClick","schema","body","fetchFailed","initFailed","test"],"mappings":"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","sourcesContent":["/**\n * 权限配置\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Renderer, filter } from 'amis';\nimport { isEffectiveApi } from 'amis/lib/utils/api';\nimport React from 'react';\nimport LimitSetting, { LimitSettingProps, AuthLimitData } from \"../limit_setting\";\nlet LibLimitSetting = class LibLimitSetting extends React.Component {\n    render() {\n        const { button = {}, modal = {}, name = 'limit', env, data, initApi, api, messages, saveConfirmText, useAllLimit, getLimit, render, } = this.props;\n        const actionType = button.actionType || 'dialog';\n        const buttonProps = Object.assign({ actionType, type: 'action', label: '设置权限' }, button);\n        const modalProps = Object.assign({ title: '设置权限', size: 'lg', showCloseButton: false, actions: [] }, modal);\n        const limitComponent = {\n            component: (amisProps) => {\n                const { data: limitData } = amisProps;\n                const initData = Object.assign(Object.assign({}, data), limitData);\n                const onSave = (authData) => {\n                    const fetchData = Object.assign(Object.assign({}, initData), authData);\n                    if (isEffectiveApi(api, fetchData)) {\n                        env\n                            .fetcher(api, fetchData)\n                            .then((res) => {\n                            const { status, msg } = res;\n                            const hasError = status !== 0;\n                            if (!hasError) {\n                                env.notify('success', (messages === null || messages === void 0 ? void 0 : messages.saveSuccess) || '保存成功');\n                                if (this.props.reload) {\n                                    this.props.onQuery();\n                                }\n                            }\n                            else {\n                                env.notify('error', (messages === null || messages === void 0 ? void 0 : messages.saveFailed) || msg || '保存失败');\n                            }\n                        })\n                            .catch(() => {\n                            env.notify('error', (messages === null || messages === void 0 ? void 0 : messages.saveFailed) || '保存失败');\n                        });\n                    }\n                    if (this.props.onSaveClick) {\n                        this.props.onSaveClick(authData);\n                    }\n                };\n                return (React.createElement(LimitSetting, Object.assign({}, amisProps, { className: `limit-drawer-${isEffectiveApi(initApi) ? 'service' : 'normal'} `, limit: getLimit ? getLimit(limitData) : limitData[name] || '', saveConfirmText: filter(saveConfirmText, initData), onSaveClick: onSave, useAllLimit: useAllLimit, onCancel: this.props.onCancelClick })));\n            },\n        };\n        const schema = Object.assign(Object.assign({}, buttonProps), { [actionType]: Object.assign(Object.assign({}, modalProps), { body: !isEffectiveApi(initApi)\n                    ? limitComponent\n                    : {\n                        type: 'service',\n                        className: 'h-full',\n                        messages: {\n                            fetchFailed: messages === null || messages === void 0 ? void 0 : messages.initFailed,\n                        },\n                        api: initApi,\n                        body: limitComponent,\n                    } }) });\n        return render('body', schema);\n    }\n};\nLibLimitSetting = __decorate([\n    Renderer({\n        test: /(^|\\/)lib-limit-setting$/,\n        name: 'lib-limit-setting',\n    })\n], LibLimitSetting);\nexport { LibLimitSetting };\n"]}]}