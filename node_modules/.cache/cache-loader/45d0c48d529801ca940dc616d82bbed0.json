{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\aside_layout\\index.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\aside_layout\\index.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEFwcCBBc2lkZSBNZW515biD5bGACiAqIFRPRE86IOa3u+WKoCBSb3V0ZVRhYi9Bc2lkZS9IZWFkZXIg55qE6buY6K6kIGxvYWRpbmcg54q25oCBCiAqIDEuIOWKqOaAgemhtemdoiBsb2FkaW5nIOaYjuaYvu+8jOWPr+iDveS4jiB0YWJsZSBsb2FkaW5nIOeKtuaAgeWQjOatpeOAggogKi8KaW1wb3J0IHsgTGF5b3V0IH0gZnJvbSAnYW1pcyc7CmltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IGFwcCB9IGZyb20gIi4uLy4uL2FwcCI7CmltcG9ydCB7IHdpdGhBcHBUaGVtZSB9IGZyb20gIi4uLy4uL2FwcC90aGVtZSI7CmltcG9ydCB7IGJyZWFrcG9pbnRzLCBtZXNzYWdlLCBzdG9yYWdlIH0gZnJvbSAiLi4vLi4vY29uc3RhbnRzIjsKaW1wb3J0IHsgc2V0Um91dGVzQ29uZmlnIH0gZnJvbSAiLi4vLi4vcm91dGVzL2NvbmZpZyI7CmltcG9ydCB7IGdldEN1cnJSb3V0ZVBhdGggfSBmcm9tICIuLi8uLi9yb3V0ZXMvZXhwb3J0cyI7CmltcG9ydCB7IGdldEF1dGhSb3V0ZXMsIGdldEFzaWRlTWVudXMsIGNsZWFyUm91dGVTdG9yZSB9IGZyb20gIi4uLy4uL3JvdXRlcy9saW1pdCI7CmltcG9ydCB7IEFwcE1lbnVSb3V0ZXMgfSBmcm9tICIuLi8uLi9yb3V0ZXMvcm91dGUiOwppbXBvcnQgeyB1c2VJbW1lciwgdXNlU3Vic2NyaWJlciB9IGZyb20gIi4uLy4uL3V0aWxzL2hvb2tzIjsKaW1wb3J0IGxvZ2dlciBmcm9tICIuLi8uLi91dGlscy9sb2dnZXIiOwppbXBvcnQgeyBwdWJsaXNoIH0gZnJvbSAiLi4vLi4vdXRpbHMvbWVzc2FnZSI7CmltcG9ydCB7IHNldEdsb2JhbCB9IGZyb20gIi4uLy4uL3V0aWxzL3N0b3JlIjsKaW1wb3J0IHsgQW1pcyB9IGZyb20gIi4uL2FtaXMvc2NoZW1hIjsKaW1wb3J0IHsgZmlsdGVyU2NoZW1hTGltaXQgfSBmcm9tICIuLi9hbWlzL3NjaGVtYS9mdW5jIjsKaW1wb3J0IHsgdXNlQXBwQ29udGV4dCB9IGZyb20gIi4uL2FwcC9jb250ZXh0IjsKaW1wb3J0IFJvdXRlVGFicyBmcm9tICIuLi9yb3V0ZV90YWJzIjsKaW1wb3J0IEFzaWRlIGZyb20gIi4vYXNpZGUiOwppbXBvcnQgSGVhZGVyIGZyb20gIi4vaGVhZGVyIjsKaW1wb3J0IHsgTGF5b3V0TG9hZGluZywgTGF5b3V0TGF6eUZhbGxiYWNrIH0gZnJvbSAiLi9sb2FkaW5nIjsKaW1wb3J0IHsgU3R5bGVkTGF5b3V0IH0gZnJvbSAiLi9zdHlsZWQiOwp2YXIgbG9nID0gbG9nZ2VyLmdldExvZ2dlcignbGliOmNvbXBvbmVudHM6YXNpZGVMYXlvdXQnKTsKdmFyIHsKICBhc2lkZUxheW91dEN0cmwKfSA9IG1lc3NhZ2U7CnZhciBkZWZhdWx0SGVhZGVyID0gewogIGJyYW5kOiB7CiAgICBsb2dvOiAnJywKICAgIHRpdGxlOiAnJwogIH0KfTsgLy8gVE9ETzog6I635Y+WQVBp6Lev55Sx5pe25pyJIOefreaagueahCA0MDQg6aG16Z2i77yM6ZyA6KaB5pS55oiQbG9hZGluZyDnirbmgIEKCmV4cG9ydCBkZWZhdWx0IHdpdGhBcHBUaGVtZShwcm9wcyA9PiB7CiAgdmFyIHsKICAgIGVuYWJsZVJvdXRlVGFicwogIH0gPSB1c2VBcHBDb250ZXh0KCk7CiAgdmFyIHsKICAgIGNoaWxkcmVuLAogICAgdGhlbWUsCiAgICBhcGksCiAgICBkZWJvdW5jZVJvdXRlCiAgfSA9IHByb3BzOwogIHZhciBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZUltbWVyKHsKICAgIGFzaWRlRm9sZGVkOiBmYWxzZSwKICAgIG9mZlNjcmVlbjogZmFsc2UsCiAgICByZXNldFJvdXRlOiBwcm9wcy5yZXNldFJvdXRlLAogICAgcm9vdFJvdXRlOiBwcm9wcy5yb290Um91dGUgfHwgJy8nLAogICAgcm91dGVUYWJzOiBwcm9wcy5yb3V0ZVRhYnMgfHwge30sCiAgICBoZWFkZXI6IHByb3BzLmhlYWRlciB8fCBkZWZhdWx0SGVhZGVyLAogICAgZm9vdGVyOiBwcm9wcy5mb290ZXIsCiAgICByb3V0ZXM6IHByb3BzLnJvdXRlcyB8fCBbXQogIH0pOwogIHZhciB7CiAgICByb3V0ZXMsCiAgICBoZWFkZXIsCiAgICByb3V0ZVRhYnMsCiAgICBmb290ZXIsCiAgICBhc2lkZUZvbGRlZCwKICAgIHJvb3RSb3V0ZSwKICAgIHJlc2V0Um91dGUsCiAgICBvZmZTY3JlZW4KICB9ID0gc3RhdGU7CiAgdmFyIHsKICAgIG5zOiB0aGVtZU5zLAogICAgbmFtZTogdGhlbWVOYW1lCiAgfSA9IHRoZW1lOyAvLyBUT0RPOiDkvb/nlKggc3R5bGVkIG1lZGlhIOadpeajgOafpSDlqpLkvZPmn6Xor6IKCiAgdmFyIHN1cHBvcnRUYWJzID0gcm91dGVUYWJzICYmIHdpbmRvdy5pbm5lcldpZHRoID49IGJyZWFrcG9pbnRzLm1kICYmIHJvdXRlVGFicy5lbmFibGUgIT09IGZhbHNlOwogIHZhciB3aXRoVGFicyA9IGVuYWJsZVJvdXRlVGFicyAmJiBzdXBwb3J0VGFiczsKCiAgdmFyIHJlcXVlc3RMYXlvdXRBcGkgPSBkYXRhID0+IHsKICAgIGlmICghYXBpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgcmVxT3B0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBhcGkpLCB7CiAgICAgIGRhdGE6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYXBpLmRhdGEpLCBkYXRhKQogICAgfSk7CiAgICBhcHAucmVxdWVzdChyZXFPcHQpLnRoZW4oc291cmNlID0+IHsKICAgICAgdmFyIHJlc0RhdGEgPSAoc291cmNlID09PSBudWxsIHx8IHNvdXJjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc291cmNlLmRhdGEpIHx8IHt9OwogICAgICBzZXRTdGF0ZShkID0+IHsKICAgICAgICBkLnJlc2V0Um91dGUgPSAhIXJlc0RhdGEucmVzZXRSb3V0ZTsKCiAgICAgICAgaWYgKHJlc0RhdGEuaGVhZGVyKSB7CiAgICAgICAgICBkLmhlYWRlciA9IHJlc0RhdGEuaGVhZGVyIHx8IGRlZmF1bHRIZWFkZXI7CiAgICAgICAgfQoKICAgICAgICBpZiAocmVzRGF0YS5yb290Um91dGUpIHsKICAgICAgICAgIGQucm9vdFJvdXRlID0gcmVzRGF0YS5yb290Um91dGU7CiAgICAgICAgfQoKICAgICAgICBpZiAocmVzRGF0YS5yb3V0ZVRhYnMpIHsKICAgICAgICAgIGQucm91dGVUYWJzID0gcmVzRGF0YS5yb3V0ZVRhYnM7CiAgICAgICAgfQoKICAgICAgICBpZiAocmVzRGF0YS5mb290ZXIpIHsKICAgICAgICAgIGQuZm9vdGVyID0gcmVzRGF0YS5mb290ZXI7CiAgICAgICAgfSAvLyBUT0RPOiDmoKHpqowgcm91dGVzIOeahOWQiOazleaAp+WPium7mOiupOWAvAoKCiAgICAgICAgaWYgKHJlc0RhdGEucm91dGVzKSB7CiAgICAgICAgICBkLnJvdXRlcyA9IHJlc0RhdGEucm91dGVzOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICB9OyAvLyDov4fmu6QgbGF5b3V0IOadg+mZkAoKCiAgdmFyIGxheW91dENvbmYgPSB1c2VNZW1vKCgpID0+IHsKICAgIHZhciBjb25mID0gY2xvbmVEZWVwKHsKICAgICAgaGVhZGVyLAogICAgICBmb290ZXIKICAgIH0pOwogICAgZmlsdGVyU2NoZW1hTGltaXQoY29uZik7CiAgICByZXR1cm4gY29uZjsKICB9LCBbaGVhZGVyLCBmb290ZXJdKTsKICB2YXIgewogICAgYXV0aFJvdXRlcywKICAgIEF1dGhSb3V0ZXMsCiAgICBhc2lkZU1lbnVzCiAgfSA9IHVzZU1lbW8oKCkgPT4gewogICAgY2xlYXJSb3V0ZVN0b3JlKCk7CiAgICBzZXRSb3V0ZXNDb25maWcocm91dGVzKTsKICAgIHZhciBjb25maWdzID0gewogICAgICBhdXRoUm91dGVzOiBnZXRBdXRoUm91dGVzKCksCiAgICAgIGFzaWRlTWVudXM6IGdldEFzaWRlTWVudXMoKQogICAgfTsKICAgIGxvZy5sb2coJ3JvdXRlQ29uZmlnJywgY29uZmlncyk7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb25maWdzKSwgewogICAgICAvLyByZW5kZXJBc2lkZTogKHQ6IHN0cmluZykgPT4gPEFzaWRlIHRoZW1lPXt0fSBhc2lkZU1lbnVzPXtjb25maWdzLmFzaWRlTWVudXN9IC8+LAogICAgICBBdXRoUm91dGVzOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBcHBNZW51Um91dGVzLCB7CiAgICAgICAgZGVib3VuY2VSb3V0ZTogZGVib3VuY2VSb3V0ZSwKICAgICAgICBmYWxsYmFjazogTGF5b3V0TGF6eUZhbGxiYWNrLAogICAgICAgIGF1dGhSb3V0ZXM6IGNvbmZpZ3MuYXV0aFJvdXRlcwogICAgICB9KQogICAgfSk7CiAgfSwgW3JvdXRlc10pOwogIHZhciBMYXlvdXRBc2lkZSA9IHVzZU1lbW8oKCkgPT4gewogICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFzaWRlLCB7CiAgICAgIHRoZW1lOiB0aGVtZU5hbWUsCiAgICAgIGFzaWRlTWVudXM6IGFzaWRlTWVudXMKICAgIH0pOwogIH0sIFt0aGVtZU5hbWUsIHJvdXRlc10pOwogIHVzZVN1YnNjcmliZXIoYXNpZGVMYXlvdXRDdHJsLm1zZywgZnVuY3Rpb24gKCkgewogICAgdmFyIG1zZ0RhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgdmFyIHsKICAgICAga2V5LAogICAgICB0b2dnbGUsCiAgICAgIGRhdGEKICAgIH0gPSBtc2dEYXRhOwogICAgc2V0U3RhdGUoZCA9PiB7CiAgICAgIHN3aXRjaCAoa2V5KSB7CiAgICAgICAgY2FzZSBhc2lkZUxheW91dEN0cmwudG9nZ2xlU2NyZWVuOgogICAgICAgICAgZC5vZmZTY3JlZW4gPSB0eXBlb2YgdG9nZ2xlID09PSAnYm9vbGVhbicgPyB0b2dnbGUgOiAhZC5vZmZTY3JlZW47CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBhc2lkZUxheW91dEN0cmwudG9nZ2xlRm9sZDoKICAgICAgICAgIGQuYXNpZGVGb2xkZWQgPSB0eXBlb2YgdG9nZ2xlID09PSAnYm9vbGVhbicgPyB0b2dnbGUgOiAhZC5hc2lkZUZvbGRlZDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIGFzaWRlTGF5b3V0Q3RybC5yZWxvYWQ6CiAgICAgICAgICByZXF1ZXN0TGF5b3V0QXBpKGRhdGEpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgIH0KICAgIH0pOwogIH0pOwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICByZXF1ZXN0TGF5b3V0QXBpKCk7CiAgfSwgW10pOwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBzZXRHbG9iYWwoc3RvcmFnZS5zdXBwb3J0Um91dGVUYWJzLCBzdXBwb3J0VGFicyk7CiAgfSwgW3N1cHBvcnRUYWJzXSk7CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChyZXNldFJvdXRlKSB7CiAgICAgIHZhciByZWZyZXNoUm9vdCA9IGdldEN1cnJSb3V0ZVBhdGgoKSAhPT0gcm9vdFJvdXRlOyAvLyDpmLLmraLpppbmrKHov5vlhaXpobXpnaIg6aaW6aG155u05o6l5Yi35paw5Lik5qyhCgogICAgICBpZiAoc3VwcG9ydFRhYnMpIHsKICAgICAgICBwdWJsaXNoKG1lc3NhZ2UuY2xlYXJSb3V0ZVRhYnMsIHsKICAgICAgICAgIHJlZnJlc2hSb290CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAocmVmcmVzaFJvb3QpIHsKICAgICAgICBhcHAucm91dGVySGlzdG9yeS5wdXNoKHJvb3RSb3V0ZSk7CiAgICAgIH0KICAgIH0KICB9LCBbQXV0aFJvdXRlcywgcm9vdFJvdXRlLCByZXNldFJvdXRlXSk7CiAgdmFyIGhlYWRlclByb3BzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxheW91dENvbmYuaGVhZGVyKSwgc3RhdGUpLCB7CiAgICBzZXRMYXlvdXQ6IHNldFN0YXRlLAogICAgd2l0aFJvdXRlVGFiczogd2l0aFRhYnMKICB9KTsKICB2YXIgcm91dGVUYWJzUHJvcHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJvdXRlVGFicyksIHsKICAgIHJvb3RSb3V0ZSwKICAgIHRoZW1lTnMsCiAgICByb3V0ZXM6IGF1dGhSb3V0ZXMKICB9KTsKICB2YXIgSGVhZGVyQ29tcG9uZW50ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSGVhZGVyLCBPYmplY3QuYXNzaWduKHt9LCBoZWFkZXJQcm9wcywgewogICAgdGhlbWVOczogdGhlbWVOcwogIH0pLCB3aXRoVGFicyAmJiAhIXJvdXRlcy5sZW5ndGggJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGVUYWJzLCBPYmplY3QuYXNzaWduKHt9LCByb3V0ZVRhYnNQcm9wcykpKTsgLy8gVE9ETzog5YiH5o2iICByb3V0ZSDml7bvvIzpu5jorqTmuLLmn5PkuoYgNDA0IOmhtemdou+8jOmcgOimgeWkqea3u+WKoCBsb2FkaW5nCgogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRMYXlvdXQsIHsKICAgIGlkOiAiYXBwLWxheW91dCIsCiAgICBjbGFzc05hbWU6IHdpdGhUYWJzID8gJ3dpdGgtcm91dGUtdGFicycgOiAnJwogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExheW91dCwgewogICAgaGVhZGVyRml4ZWQ6IHRydWUsCiAgICB0aGVtZTogdGhlbWVOYW1lLAogICAgZm9sZGVkOiBhc2lkZUZvbGRlZCwKICAgIG9mZlNjcmVlbjogb2ZmU2NyZWVuLAogICAgaGVhZGVyOiBIZWFkZXJDb21wb25lbnQsCiAgICBhc2lkZTogTGF5b3V0QXNpZGUsCiAgICBmb290ZXI6IGxheW91dENvbmYuZm9vdGVyICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFtaXMsIHsKICAgICAgc2NoZW1hOiBsYXlvdXRDb25mLmZvb3RlcgogICAgfSkKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgY2xhc3NOYW1lOiAiYXBwLWxheW91dC1ib2R5IgogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExheW91dExvYWRpbmcsIHsKICAgIHRoZW1lOiB0aGVtZU5hbWUKICB9KSwgQXV0aFJvdXRlcywgY2hpbGRyZW4pKSk7Cn0pOw=="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/aside_layout/index.js"],"names":["Layout","cloneDeep","React","useEffect","useMemo","app","withAppTheme","breakpoints","message","storage","setRoutesConfig","getCurrRoutePath","getAuthRoutes","getAsideMenus","clearRouteStore","AppMenuRoutes","useImmer","useSubscriber","logger","publish","setGlobal","Amis","filterSchemaLimit","useAppContext","RouteTabs","Aside","Header","LayoutLoading","LayoutLazyFallback","StyledLayout","log","getLogger","asideLayoutCtrl","defaultHeader","brand","logo","title","props","enableRouteTabs","children","theme","api","debounceRoute","state","setState","asideFolded","offScreen","resetRoute","rootRoute","routeTabs","header","footer","routes","ns","themeNs","name","themeName","supportTabs","window","innerWidth","md","enable","withTabs","requestLayoutApi","data","reqOpt","Object","assign","request","then","source","resData","d","layoutConf","conf","authRoutes","AuthRoutes","asideMenus","configs","createElement","fallback","LayoutAside","msg","msgData","key","toggle","toggleScreen","toggleFold","reload","supportRouteTabs","refreshRoot","clearRouteTabs","routerHistory","push","headerProps","setLayout","withRouteTabs","routeTabsProps","HeaderComponent","length","id","className","headerFixed","folded","aside","schema"],"mappings":"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","sourcesContent":["/**\n * App Aside Menu布局\n * TODO: 添加 RouteTab/Aside/Header 的默认 loading 状态\n * 1. 动态页面 loading 明显，可能与 table loading 状态同步。\n */\nimport { Layout } from 'amis';\nimport { cloneDeep } from 'lodash';\nimport React, { useEffect, useMemo } from 'react';\nimport { app } from \"../../app\";\nimport { withAppTheme } from \"../../app/theme\";\nimport { breakpoints, message, storage } from \"../../constants\";\nimport { setRoutesConfig } from \"../../routes/config\";\nimport { getCurrRoutePath } from \"../../routes/exports\";\nimport { getAuthRoutes, getAsideMenus, clearRouteStore } from \"../../routes/limit\";\nimport { AppMenuRoutes } from \"../../routes/route\";\nimport { useImmer, useSubscriber } from \"../../utils/hooks\";\nimport logger from \"../../utils/logger\";\nimport { publish } from \"../../utils/message\";\nimport { setGlobal } from \"../../utils/store\";\nimport { Amis } from \"../amis/schema\";\nimport { filterSchemaLimit } from \"../amis/schema/func\";\nimport { useAppContext } from \"../app/context\";\nimport RouteTabs from \"../route_tabs\";\nimport Aside from \"./aside\";\nimport Header from \"./header\";\nimport { LayoutLoading, LayoutLazyFallback } from \"./loading\";\nimport { StyledLayout } from \"./styled\";\nconst log = logger.getLogger('lib:components:asideLayout');\nconst { asideLayoutCtrl } = message;\nconst defaultHeader = {\n    brand: {\n        logo: '',\n        title: '',\n    },\n};\n// TODO: 获取APi路由时有 短暂的 404 页面，需要改成loading 状态\nexport default withAppTheme((props) => {\n    const { enableRouteTabs } = useAppContext();\n    const { children, theme, api, debounceRoute } = props;\n    const [state, setState] = useImmer({\n        asideFolded: false,\n        offScreen: false,\n        resetRoute: props.resetRoute,\n        rootRoute: props.rootRoute || '/',\n        routeTabs: props.routeTabs || {},\n        header: props.header || defaultHeader,\n        footer: props.footer,\n        routes: props.routes || [],\n    });\n    const { routes, header, routeTabs, footer, asideFolded, rootRoute, resetRoute, offScreen } = state;\n    const { ns: themeNs, name: themeName } = theme;\n    // TODO: 使用 styled media 来检查 媒体查询\n    const supportTabs = routeTabs && window.innerWidth >= breakpoints.md && routeTabs.enable !== false;\n    const withTabs = enableRouteTabs && supportTabs;\n    const requestLayoutApi = (data) => {\n        if (!api) {\n            return;\n        }\n        const reqOpt = Object.assign(Object.assign({}, api), { data: Object.assign(Object.assign({}, api.data), data) });\n        app.request(reqOpt).then((source) => {\n            const resData = (source === null || source === void 0 ? void 0 : source.data) || {};\n            setState((d) => {\n                d.resetRoute = !!resData.resetRoute;\n                if (resData.header) {\n                    d.header = resData.header || defaultHeader;\n                }\n                if (resData.rootRoute) {\n                    d.rootRoute = resData.rootRoute;\n                }\n                if (resData.routeTabs) {\n                    d.routeTabs = resData.routeTabs;\n                }\n                if (resData.footer) {\n                    d.footer = resData.footer;\n                }\n                // TODO: 校验 routes 的合法性及默认值\n                if (resData.routes) {\n                    d.routes = resData.routes;\n                }\n            });\n        });\n    };\n    // 过滤 layout 权限\n    const layoutConf = useMemo(() => {\n        const conf = cloneDeep({ header, footer });\n        filterSchemaLimit(conf);\n        return conf;\n    }, [header, footer]);\n    const { authRoutes, AuthRoutes, asideMenus } = useMemo(() => {\n        clearRouteStore();\n        setRoutesConfig(routes);\n        const configs = {\n            authRoutes: getAuthRoutes(),\n            asideMenus: getAsideMenus(),\n        };\n        log.log('routeConfig', configs);\n        return Object.assign(Object.assign({}, configs), { \n            // renderAside: (t: string) => <Aside theme={t} asideMenus={configs.asideMenus} />,\n            AuthRoutes: (React.createElement(AppMenuRoutes, { debounceRoute: debounceRoute, fallback: LayoutLazyFallback, authRoutes: configs.authRoutes })) });\n    }, [routes]);\n    const LayoutAside = useMemo(() => {\n        return React.createElement(Aside, { theme: themeName, asideMenus: asideMenus });\n    }, [themeName, routes]);\n    useSubscriber(asideLayoutCtrl.msg, (msgData = {}) => {\n        const { key, toggle, data } = msgData;\n        setState((d) => {\n            switch (key) {\n                case asideLayoutCtrl.toggleScreen:\n                    d.offScreen = typeof toggle === 'boolean' ? toggle : !d.offScreen;\n                    break;\n                case asideLayoutCtrl.toggleFold:\n                    d.asideFolded = typeof toggle === 'boolean' ? toggle : !d.asideFolded;\n                    break;\n                case asideLayoutCtrl.reload:\n                    requestLayoutApi(data);\n                    break;\n                default:\n            }\n        });\n    });\n    useEffect(() => {\n        requestLayoutApi();\n    }, []);\n    useEffect(() => {\n        setGlobal(storage.supportRouteTabs, supportTabs);\n    }, [supportTabs]);\n    useEffect(() => {\n        if (resetRoute) {\n            const refreshRoot = getCurrRoutePath() !== rootRoute;\n            // 防止首次进入页面 首页直接刷新两次\n            if (supportTabs) {\n                publish(message.clearRouteTabs, { refreshRoot });\n            }\n            else if (refreshRoot) {\n                app.routerHistory.push(rootRoute);\n            }\n        }\n    }, [AuthRoutes, rootRoute, resetRoute]);\n    const headerProps = Object.assign(Object.assign(Object.assign({}, layoutConf.header), state), { setLayout: setState, withRouteTabs: withTabs });\n    const routeTabsProps = Object.assign(Object.assign({}, routeTabs), { rootRoute,\n        themeNs, routes: authRoutes });\n    const HeaderComponent = (React.createElement(Header, Object.assign({}, headerProps, { themeNs: themeNs }), withTabs && !!routes.length && React.createElement(RouteTabs, Object.assign({}, routeTabsProps))));\n    // TODO: 切换  route 时，默认渲染了 404 页面，需要天添加 loading\n    return (React.createElement(StyledLayout, { id: \"app-layout\", className: withTabs ? 'with-route-tabs' : '' },\n        React.createElement(Layout, { headerFixed: true, theme: themeName, folded: asideFolded, offScreen: offScreen, header: HeaderComponent, aside: LayoutAside, footer: layoutConf.footer && React.createElement(Amis, { schema: layoutConf.footer }) },\n            React.createElement(\"div\", { className: \"app-layout-body\" },\n                React.createElement(LayoutLoading, { theme: themeName }),\n                AuthRoutes,\n                children))));\n});\n"]}]}