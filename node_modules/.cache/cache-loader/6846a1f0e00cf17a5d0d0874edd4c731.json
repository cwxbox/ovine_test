{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\amis\\lib_crud\\index.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\amis\\lib_crud\\index.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIOiHquWumuS5iSBjcnVkIOe7hOS7tgogKiDlm7rlrpogdGFibGUgaGVpZ2h0IOWtmOWcqEJVR++8jOmcgOimgeWFtuS7luaWueW8j+aUr+aMgQogKi8KdmFyIF9fZGVjb3JhdGUgPSB0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHsKICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsCiAgICAgIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLAogICAgICBkOwogIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09ICJmdW5jdGlvbiIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByOwogIH0KICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByOwp9OwoKdmFyIF9fcmVzdCA9IHRoaXMgJiYgdGhpcy5fX3Jlc3QgfHwgZnVuY3Rpb24gKHMsIGUpIHsKICB2YXIgdCA9IHt9OwoKICBmb3IgKHZhciBwIGluIHMpIHsKICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMCkgdFtwXSA9IHNbcF07CiAgfQoKICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSAiZnVuY3Rpb24iKSBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7CiAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpIHRbcFtpXV0gPSBzW3BbaV1dOwogIH0KICByZXR1cm4gdDsKfTsKCmltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSAnYW1pcyc7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IGNzcyBhcyBfY3NzIH0gZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnOwppbXBvcnQgeyBjcnVkQ3NzIH0gZnJvbSAiLi9zdHlsZWQiOwoKdmFyIGdldEFtaXNDcnVkU2NoZW1hID0gcHJvcHMgPT4gewogIHZhciB7CiAgICB0YWJsZUNsYXNzTmFtZSA9ICcnLAogICAgZmlsdGVyLAogICAgaGVhZGVyVG9vbGJhciA9IFtdCiAgfSA9IHByb3BzLAogICAgICByZXN0ID0gX19yZXN0KHByb3BzIC8vIGNvbnN0IGlzU21TY3JlZW4gPSB3aW5kb3cuaW5uZXJXaWR0aCA8IGJyZWFrcG9pbnRzLm1kCiAgLy8g5Zyo5bCP5bGP5bmV5LitIOiHquWKqOWKoOWFpeWIhumhtQogIC8vIGlmICgKICAvLyAgIGlzU21TY3JlZW4gJiYKICAvLyAgICFoZWFkZXJUb29sYmFyLmZpbmQoKGk6IGFueSkgPT4gaSA9PT0gJ3BhZ2luYXRpb24nIHx8IGdldChpLCAndHlwZScpID09PSAncGFnaW5hdGlvbicpCiAgLy8gKSB7CiAgLy8gICBoZWFkZXJUb29sYmFyLnB1c2goewogIC8vICAgICB0eXBlOiAncGFnaW5hdGlvbicsCiAgLy8gICAgIGFsaWduOiAncmlnaHQnLAogIC8vICAgfSkKICAvLyB9CiAgLCBbInRhYmxlQ2xhc3NOYW1lIiwgImZpbHRlciIsICJoZWFkZXJUb29sYmFyIl0pOyAvLyBjb25zdCBpc1NtU2NyZWVuID0gd2luZG93LmlubmVyV2lkdGggPCBicmVha3BvaW50cy5tZAogIC8vIOWcqOWwj+Wxj+W5leS4rSDoh6rliqjliqDlhaXliIbpobUKICAvLyBpZiAoCiAgLy8gICBpc1NtU2NyZWVuICYmCiAgLy8gICAhaGVhZGVyVG9vbGJhci5maW5kKChpOiBhbnkpID0+IGkgPT09ICdwYWdpbmF0aW9uJyB8fCBnZXQoaSwgJ3R5cGUnKSA9PT0gJ3BhZ2luYXRpb24nKQogIC8vICkgewogIC8vICAgaGVhZGVyVG9vbGJhci5wdXNoKHsKICAvLyAgICAgdHlwZTogJ3BhZ2luYXRpb24nLAogIC8vICAgICBhbGlnbjogJ3JpZ2h0JywKICAvLyAgIH0pCiAgLy8gfQoKCiAgdmFyIGNydWRTY2hlbWEgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oewogICAga2VlcEl0ZW1TZWxlY3Rpb25PblBhZ2VDaGFuZ2U6IHRydWUKICB9LCByZXN0KSwgewogICAgdHlwZTogJ2NydWQnLAogICAgY2xhc3NOYW1lOiAnbGliLWNydWQgcicsCiAgICB0YWJsZUNsYXNzTmFtZTogImxpYi1jcnVkLXRhYmxlICIuY29uY2F0KHRhYmxlQ2xhc3NOYW1lKSwKICAgIC8vIGFmZml4SGVhZGVyOiBpc1NtU2NyZWVuLAogICAgaGVhZGVyVG9vbGJhciwKICAgIGZpbHRlcjogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBmaWx0ZXIpLCB7CiAgICAgIHRpdGxlOiAnJywKICAgICAgc3VibWl0VGV4dDogJycsCiAgICAgIHdyYXBXaXRoUGFuZWw6IGZhbHNlCiAgICB9KQogIH0pOwogIHJldHVybiBjcnVkU2NoZW1hOwp9OwoKdmFyIExpYkNydWQgPSBjbGFzcyBMaWJDcnVkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHsKICByZW5kZXIoKSB7CiAgICB2YXIgewogICAgICBjc3M6IGdldENzcywKICAgICAgcmVuZGVyLAogICAgICBjbGFzc05hbWUsCiAgICAgIGh0bWxDbGFzc05hbWUKICAgIH0gPSB0aGlzLnByb3BzOwogICAgdmFyIGFtaXNDdXJkID0gewogICAgICBjbGFzc05hbWUsCiAgICAgIGh0bWxDbGFzc05hbWUsCiAgICAgIHR5cGU6ICdsaWItY3NzJywKICAgICAgY3NzOiB0aGVtZSA9PiBfY3NzKFsiIiwgIjsiLCAiOyJdLCBjcnVkQ3NzKHRoZW1lKSwgIWdldENzcyA/IG51bGwgOiB0eXBlb2YgZ2V0Q3NzID09PSAnc3RyaW5nJyA/IGdldENzcyA6IGdldENzcyh0aGVtZSkpLAogICAgICBib2R5OiBnZXRBbWlzQ3J1ZFNjaGVtYSh0aGlzLnByb3BzKQogICAgfTsKICAgIHJldHVybiByZW5kZXIoJ2JvZHknLCBhbWlzQ3VyZCk7CiAgfQoKfTsKTGliQ3J1ZCA9IF9fZGVjb3JhdGUoW1JlbmRlcmVyKHsKICB0ZXN0OiAvKF58XC8pbGliLWNydWQkLywKICBuYW1lOiAnbGliLWNydWQnCn0pXSwgTGliQ3J1ZCk7CmV4cG9ydCB7IExpYkNydWQgfTs="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/amis/lib_crud/index.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__rest","s","e","t","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","propertyIsEnumerable","Renderer","React","css","crudCss","getAmisCrudSchema","props","tableClassName","filter","headerToolbar","rest","crudSchema","assign","keepItemSelectionOnPageChange","type","className","title","submitText","wrapWithPanel","LibCrud","Component","render","getCss","htmlClassName","amisCurd","theme","body","test","name"],"mappings":"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","sourcesContent":["/**\n * 自定义 crud 组件\n * 固定 table height 存在BUG，需要其他方式支持\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Renderer } from 'amis';\nimport React from 'react';\nimport { css } from 'styled-components';\nimport { crudCss } from \"./styled\";\nconst getAmisCrudSchema = (props) => {\n    const { tableClassName = '', filter, headerToolbar = [] } = props, rest = __rest(props\n    // const isSmScreen = window.innerWidth < breakpoints.md\n    // 在小屏幕中 自动加入分页\n    // if (\n    //   isSmScreen &&\n    //   !headerToolbar.find((i: any) => i === 'pagination' || get(i, 'type') === 'pagination')\n    // ) {\n    //   headerToolbar.push({\n    //     type: 'pagination',\n    //     align: 'right',\n    //   })\n    // }\n    , [\"tableClassName\", \"filter\", \"headerToolbar\"]);\n    // const isSmScreen = window.innerWidth < breakpoints.md\n    // 在小屏幕中 自动加入分页\n    // if (\n    //   isSmScreen &&\n    //   !headerToolbar.find((i: any) => i === 'pagination' || get(i, 'type') === 'pagination')\n    // ) {\n    //   headerToolbar.push({\n    //     type: 'pagination',\n    //     align: 'right',\n    //   })\n    // }\n    const crudSchema = Object.assign(Object.assign({ keepItemSelectionOnPageChange: true }, rest), { type: 'crud', className: 'lib-crud r', tableClassName: `lib-crud-table ${tableClassName}`, \n        // affixHeader: isSmScreen,\n        headerToolbar, filter: Object.assign(Object.assign({}, filter), { title: '', submitText: '', wrapWithPanel: false }) });\n    return crudSchema;\n};\nlet LibCrud = class LibCrud extends React.Component {\n    render() {\n        const { css: getCss, render, className, htmlClassName } = this.props;\n        const amisCurd = {\n            className,\n            htmlClassName,\n            type: 'lib-css',\n            css: (theme) => css `\n        ${crudCss(theme)};\n        ${!getCss ? null : typeof getCss === 'string' ? getCss : getCss(theme)};\n      `,\n            body: getAmisCrudSchema(this.props),\n        };\n        return render('body', amisCurd);\n    }\n};\nLibCrud = __decorate([\n    Renderer({\n        test: /(^|\\/)lib-crud$/,\n        name: 'lib-crud',\n    })\n], LibCrud);\nexport { LibCrud };\n"]}]}