{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\routes\\route.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\routes\\route.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEFQUCDot6/nlLHnm7jlhbPnu4Tku7YKICog5LyY5YyW77yaIOeUseS6jnJvdXRl6K+75Y+W5pWw5o2u5pe277yM5Lya5pyJ55+t5pqC55qEIDQwNAogKiBCVUc6IOmhtemdouWIh+aNouWkquW/q+aXtu+8jOS8muWvvOiHtOmhtemdouaKpemUmQogKiBVbmNhdWdodCAoaW4gcHJvbWlzZSkgRXJyb3I6IFttb2J4LXN0YXRlLXRyZWVdIENhbm5vdCBtb2RpZnkgJ0Vycm9yRGV0YWlsW11AL2Vycm9yRGF0YSBbZGVhZF0nLCB0aGUgb2JqZWN0IGlzIHByb3RlY3RlZCBhbmQgY2FuIG9ubHkgYmUgbW9kaWZpZWQgYnkgdXNpbmcgYW4gYWN0aW9uLgogKi8KdmFyIF9fYXdhaXRlciA9IHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgewogIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZXNvbHZlKHZhbHVlKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZWplY3QoZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgewogICAgICB0cnkgewogICAgICAgIHN0ZXAoZ2VuZXJhdG9yWyJ0aHJvdyJdKHZhbHVlKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZWplY3QoZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgewogICAgICByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsKICAgIH0KCiAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7CiAgfSk7Cn07Cgp2YXIgX19yZXN0ID0gdGhpcyAmJiB0aGlzLl9fcmVzdCB8fCBmdW5jdGlvbiAocywgZSkgewogIHZhciB0ID0ge307CgogIGZvciAodmFyIHAgaW4gcykgewogICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKSB0W3BdID0gc1twXTsKICB9CgogIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09ICJmdW5jdGlvbiIpIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHsKICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSkgdFtwW2ldXSA9IHNbcFtpXV07CiAgfQogIHJldHVybiB0Owp9OwoKaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJ2FtaXMnOwppbXBvcnQgeyBlYWNoVHJlZSB9IGZyb20gJ2FtaXMvbGliL3V0aWxzL2hlbHBlcic7CmltcG9ydCB7IGlzRnVuY3Rpb24sIG1hcCwgZ2V0LCBjbG9uZURlZXAsIG9taXQsIHBpY2sgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgbGF6eSwgdXNlQ29udGV4dCwgdXNlTWVtbywgU3VzcGVuc2UsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIGlzVmFsaWRFbGVtZW50LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IFJlZGlyZWN0LCBSb3V0ZSwgU3dpdGNoIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IGFwcCB9IGZyb20gIi4uL2FwcCI7CmltcG9ydCBOb3RGb3VuZCBmcm9tICIuLi9jb21wb25lbnRzLzQwNCI7CmltcG9ydCB7IEFtaXMgfSBmcm9tICIuLi9jb21wb25lbnRzL2FtaXMvc2NoZW1hIjsKaW1wb3J0IHsgdXNlRGVib3VuY2VSZW5kZXIgfSBmcm9tICIuLi9jb21wb25lbnRzL2RlYm91bmNlX3JlbmRlciI7CmltcG9ydCBFcnJvckJvdW5kYXJ5IGZyb20gIi4uL2NvbXBvbmVudHMvZXJyb3JfYm91bmRhcnkiOwppbXBvcnQgeyBpc1N1YlN0ciB9IGZyb20gIi4uL3V0aWxzL3Rvb2wiOwppbXBvcnQgeyBnZXROb2RlUGF0aCwgZ2V0UGFnZU1vY2tTb3VyY2UsIGdldFBhZ2VQcmVzZXQsIGdldFJvdXRlUGF0aCwgY3VyclBhdGgsIGdldFBhZ2VGaWxlQXN5bmMgfSBmcm9tICIuL2V4cG9ydHMiOwppbXBvcnQgeyBjaGVja0xpbWl0QnlLZXlzIH0gZnJvbSAiLi9saW1pdC9leHBvcnRzIjsKdmFyIFBhZ2VTcGlubmVyID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3Bpbm5lciwgewogIG92ZXJsYXk6IHRydWUsCiAgc2hvdzogdHJ1ZSwKICBzaXplOiAibGciLAogIGtleTogInBhZ2VMb2FkaW5nIgp9KTsgLy8g5qC55o2uIHBhdGjvvIxwYXRoVG9Db21wb25lbnQgIOWPguaVsCDmh5LliqDovb0gYHBhZ2VzL3h4eGAg57uE5Lu2CgpleHBvcnQgdmFyIGdldFBhZ2VBc3luYyA9IG9wdGlvbiA9PiB7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9sYXp5KCgpID0+IGdldFBhZ2VGaWxlQXN5bmMob3B0aW9uKS50aGVuKGZpbGUgPT4gewogICAgdmFyIHsKICAgICAgZGVmYXVsdDogY29udGVudCA9IHt9LAogICAgICBzY2hlbWEsCiAgICAgIGdldFNjaGVtYQogICAgfSA9IGZpbGU7CiAgICB2YXIgZGVmYXVsdFNjaGVtYSA9IHsKICAgICAgdHlwZTogJ3dyYXBwZXInLAogICAgICBib2R5OiAn6K+35Lyg5YWl5q2j56Gu55qEIHNjaGVtYScKICAgIH07CiAgICB2YXIgY29tcFByb3BzID0ge307CgogICAgaWYgKGlzRnVuY3Rpb24oY29udGVudCkpIHsKICAgICAgY29tcFByb3BzLkxhenlGaWxlQ29tcG9uZW50ID0gY29udGVudDsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChzY2hlbWEgfHwgZ2V0U2NoZW1hKSB7CiAgICAgICAgY29udGVudC5zY2hlbWEgPSBpc0Z1bmN0aW9uKGdldFNjaGVtYSkgPyBnZXRTY2hlbWEob3B0aW9uKSA6IHNjaGVtYSB8fCBkZWZhdWx0U2NoZW1hOwogICAgICB9CgogICAgICBpZiAoIWNvbnRlbnQuc2NoZW1hKSB7CiAgICAgICAgY29udGVudC5zY2hlbWEgPSBkZWZhdWx0U2NoZW1hOwogICAgICB9CgogICAgICBjb21wUHJvcHMubGF6eUZpbGVBbWlzUHJvcHMgPSBjb250ZW50OwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGRlZmF1bHQ6ICgpID0+IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFByZXN0Q29tcG9uZW50LCBPYmplY3QuYXNzaWduKHt9LCBvcHRpb24sIGNvbXBQcm9wcykpCiAgICB9OwogIH0pKTsKfTsgLy8g55m75b2V6Lev55Sx5oum5oiqCgpleHBvcnQgdmFyIFByaXZhdGVSb3V0ZSA9IHByb3BzID0+IHsKICB2YXIgewogICAgb25BdXRoLAogICAgb25SZWRpcmVjdCwKICAgIHJlZGlyZWN0LAogICAgY2hpbGRyZW4KICB9ID0gcHJvcHMsCiAgICAgIHJlc3QgPSBfX3Jlc3QocHJvcHMsIFsib25BdXRoIiwgIm9uUmVkaXJlY3QiLCAicmVkaXJlY3QiLCAiY2hpbGRyZW4iXSk7CgogIHZhciBbaXNBdXRoLCBzZXRBdXRoXSA9IHVzZVN0YXRlKG51bGwpOwogIHZhciBpc01vdW50ZWQgPSB1c2VSZWYobnVsbCk7CiAgdmFyIHJlZGlyZWN0UGF0aCA9IChvblJlZGlyZWN0ID8gb25SZWRpcmVjdCgpIDogcmVkaXJlY3QpIHx8IGFwcC5jb25zdGFudHMubG9naW5Sb3V0ZTsKCiAgdmFyIGNoZWNrQXV0aCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgewogICAgaWYgKGlzRnVuY3Rpb24ob25BdXRoKSkgewogICAgICB2YXIgYXV0aFJlcyA9IHlpZWxkIG9uQXV0aCgpOwoKICAgICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSB7CiAgICAgICAgc2V0QXV0aChhdXRoUmVzKTsKICAgICAgfQoKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHNldEF1dGgodHJ1ZSk7CiAgfSk7CgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBpc01vdW50ZWQuY3VycmVudCA9IHRydWU7CiAgICBjaGVja0F1dGgoKTsKICAgIHJldHVybiAoKSA9PiB7CiAgICAgIGlzTW91bnRlZC5jdXJyZW50ID0gZmFsc2U7CiAgICB9OwogIH0sIFtdKTsKCiAgaWYgKGlzQXV0aCA9PT0gbnVsbCkgewogICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsKTsKICB9CgogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZSwgT2JqZWN0LmFzc2lnbih7fSwgcmVzdCwgewogICAgcmVuZGVyOiAoX3JlZikgPT4gewogICAgICB2YXIgewogICAgICAgIGxvY2F0aW9uCiAgICAgIH0gPSBfcmVmOwoKICAgICAgaWYgKGlzQXV0aCkgewogICAgICAgIHJldHVybiBjaGlsZHJlbjsKICAgICAgfQoKICAgICAgaWYgKHJlZGlyZWN0UGF0aCkgewogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWRpcmVjdCwgewogICAgICAgICAgdG86IHsKICAgICAgICAgICAgcGF0aG5hbWU6IHJlZGlyZWN0UGF0aCwKICAgICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgICBmcm9tOiBsb2NhdGlvbgogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgInVuYXV0aG9yaXplZCByb3V0ZS4iKTsKICAgIH0KICB9KSk7Cn07IC8vIHVzZVByZXNldENvbnRleHQg5Y+v6I635Y+WIHByZXNldCDlgLzvvIzkuI4gY2hlY2tMaW1pdCDmoKHpqozmnYPpmZAg5pa55rOVCgp2YXIgUHJlc2V0Q29udGV4dCA9IC8qI19fUFVSRV9fKi9jcmVhdGVDb250ZXh0KHsKICByb3V0ZToge30KfSk7CmV4cG9ydCB2YXIgdXNlUHJlc2V0Q29udGV4dCA9ICgpID0+IHsKICB2YXIgcHJlc2V0ID0gdXNlQ29udGV4dChQcmVzZXRDb250ZXh0KTsKCiAgdmFyIGNoZWNrTGltaXQgPSAoa2V5cywgb3B0aW9uKSA9PiBjaGVja0xpbWl0QnlLZXlzKGtleXMsIE9iamVjdC5hc3NpZ24oewogICAgbm9kZVBhdGg6IHByZXNldC5ub2RlUGF0aAogIH0sIG9wdGlvbikpOwoKICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwcmVzZXQpLCB7CiAgICBjaGVja0xpbWl0CiAgfSk7Cn07IC8vIOWwhiBwcmVzZXQg5rOo5YWl57uE5Lu277yM5Y+v5YWo5bGA6YCa6L+HIHVzZVByZXNldENvbnRleHQg6I635Y+WIHByZXNldCDlgLwKCnZhciBQcmVzdENvbXBvbmVudCA9IHByb3BzID0+IHsKICB2YXIgewogICAgTGF6eUZpbGVDb21wb25lbnQsCiAgICBsYXp5RmlsZUFtaXNQcm9wcywKICAgIFJvdXRlQ29tcG9uZW50CiAgfSA9IHByb3BzLAogICAgICByZXN0ID0gX19yZXN0KHByb3BzLCBbIkxhenlGaWxlQ29tcG9uZW50IiwgImxhenlGaWxlQW1pc1Byb3BzIiwgIlJvdXRlQ29tcG9uZW50Il0pOwoKICB2YXIgewogICAgcGF0aCwKICAgIGV4YWN0LAogICAgY2hpbGRyZW4sCiAgICBwYXRoVG9Db21wb25lbnQsCiAgICBub2RlUGF0aDogcHJvcE5vZGVQYXRoCiAgfSA9IHJlc3Q7CiAgdmFyIHByZXNldCA9IHVzZU1lbW8oKCkgPT4gewogICAgdmFyIGZpbGVPcHRpb24gPSB7CiAgICAgIHBhdGgsCiAgICAgIHBhdGhUb0NvbXBvbmVudCwKICAgICAgbm9kZVBhdGg6IHByb3BOb2RlUGF0aAogICAgfTsKICAgIHZhciBtb2NrU291cmNlID0gIWFwcC5lbnYuaXNNb2NrID8gdW5kZWZpbmVkIDogZ2V0UGFnZU1vY2tTb3VyY2UoZmlsZU9wdGlvbik7CiAgICB2YXIgbm9kZVBhdGggPSBnZXROb2RlUGF0aChmaWxlT3B0aW9uKTsKICAgIHZhciBwcmVzZXRDb25mID0gY2xvbmVEZWVwKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGljayhyZXN0LCBbJ2xpbWl0cycsICdhcGlzJ10pKSwgZ2V0UGFnZVByZXNldChmaWxlT3B0aW9uKSB8fCBnZXQobGF6eUZpbGVBbWlzUHJvcHMsICdzY2hlbWEucHJlc2V0JykgfHwge30pKTsKICAgIHByZXNldENvbmYubm9kZVBhdGggPSBleGFjdCAmJiBjaGlsZHJlbiAmJiBwYXRoID8gcGF0aCA6IG5vZGVQYXRoOwogICAgbWFwKHByZXNldENvbmYuYXBpcywgYXBpID0+IHsKICAgICAgLy8g6Ieq5Yqo5rOo5YWl6KeE5YiZCiAgICAgIGlmIChhcGkudXJsICYmIGFwaS5tb2NrICE9PSBmYWxzZSAmJiAhYXBpLm1vY2tTb3VyY2UgJiYgbW9ja1NvdXJjZSkgewogICAgICAgIGFwaS5tb2NrU291cmNlID0gbW9ja1NvdXJjZVthcGkudXJsXSB8fCBtb2NrU291cmNlOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBwcmVzZXRDb25mOwogIH0sIFtwYXRoLCBwYXRoVG9Db21wb25lbnQsIHByb3BOb2RlUGF0aF0pOwogIHZhciBjb250ZXh0VmFsdWUgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHByZXNldCksIHsKICAgIHJvdXRlOiBvbWl0KHJlc3QsIE9iamVjdC5rZXlzKHByZXNldCkpCiAgfSk7CiAgdmFyIENvbXBvbmVudCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAiTm90IEZvdW5kIFx1OEJGN1x1NjhDMFx1NjdFNVx1OERFRlx1NzUzMVx1OEJCRVx1N0Y2RSIpOwoKICBpZiAoTGF6eUZpbGVDb21wb25lbnQpIHsKICAgIENvbXBvbmVudCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExhenlGaWxlQ29tcG9uZW50LCBPYmplY3QuYXNzaWduKHt9LCByZXN0KSk7CiAgfQoKICBpZiAoUm91dGVDb21wb25lbnQpIHsKICAgIENvbXBvbmVudCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlQ29tcG9uZW50LCBPYmplY3QuYXNzaWduKHt9LCByZXN0KSk7CiAgfQoKICBpZiAobGF6eUZpbGVBbWlzUHJvcHMpIHsKICAgIHZhciBjb250ZXh0UmVmID0gZ2V0KGxhenlGaWxlQW1pc1Byb3BzLCAncHJvcHMuY29udGV4dFJlZicpOwoKICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHRSZWYpKSB7CiAgICAgIGNvbnRleHRSZWYoY29udGV4dFZhbHVlKTsKICAgIH0KCiAgICBsYXp5RmlsZUFtaXNQcm9wcy5zY2hlbWEucHJlc2V0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsYXp5RmlsZUFtaXNQcm9wcy5zY2hlbWEucHJlc2V0KSwgcHJlc2V0KTsKICAgIENvbXBvbmVudCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFtaXMsIE9iamVjdC5hc3NpZ24oe30sIHJlc3QsIGxhenlGaWxlQW1pc1Byb3BzKSk7CiAgfQoKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUHJlc2V0Q29udGV4dC5Qcm92aWRlciwgewogICAgdmFsdWU6IGNvbnRleHRWYWx1ZQogIH0sIENvbXBvbmVudCk7Cn07IC8vIOWkhOeQhuavj+S4qui3r+eUse+8jOWMheijuSBQcmVzdENvbXBvbmVudCDnu4Tku7YKCgpleHBvcnQgdmFyIFByZXN0Um91dGUgPSBwcm9wcyA9PiB7CiAgdmFyIF9hOwoKICB2YXIgewogICAgY29tcG9uZW50LAogICAgY2hpbGRyZW4sCiAgICB3aXRoU3VzcGVuc2UgPSB0cnVlLAogICAgZmFsbGJhY2sgPSBQYWdlU3Bpbm5lciwKICAgIHBhdGggPSAnJywKICAgIGV4YWN0ID0gdHJ1ZSwKICAgIGRlYm91bmNlUm91dGUgPSAwCiAgfSA9IHByb3BzLAogICAgICByZXN0ID0gX19yZXN0KHByb3BzLCBbImNvbXBvbmVudCIsICJjaGlsZHJlbiIsICJ3aXRoU3VzcGVuc2UiLCAiZmFsbGJhY2siLCAicGF0aCIsICJleGFjdCIsICJkZWJvdW5jZVJvdXRlIl0pOwoKICB2YXIgcm91dGVQYXRoID0gZ2V0Um91dGVQYXRoKHBhdGgpOwogIHZhciBsb2NhdGlvbktleSA9ICgoX2EgPSByZXN0ID09PSBudWxsIHx8IHJlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3QubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5rZXkpIHx8ICcnOwogIHZhciBrZXlSZWYgPSB1c2VSZWYoJycpOwoKICBpZiAobG9jYXRpb25LZXkpIHsKICAgIGtleVJlZi5jdXJyZW50ID0gbG9jYXRpb25LZXk7CiAgfQoKICB2YXIgUm91dGVDb21wb25lbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZSwgT2JqZWN0LmFzc2lnbih7fSwgcmVzdCwgewogICAgcGF0aDogcm91dGVQYXRoLAogICAgZXhhY3Q6IGV4YWN0LAogICAgY29tcG9uZW50OiAhY29tcG9uZW50ID8gZ2V0UGFnZUFzeW5jKHByb3BzKSA6ICgpID0+IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFByZXN0Q29tcG9uZW50LCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcywgewogICAgICBSb3V0ZUNvbXBvbmVudDogY29tcG9uZW50CiAgICB9KSkKICB9KSwgLyojX19QVVJFX18qL2lzVmFsaWRFbGVtZW50KGNoaWxkcmVuKSA/IGNoaWxkcmVuIDogbnVsbCk7CgogIHZhciBnZXRSb3V0ZUNvbXBvbmVudCA9ICgpID0+IHsKICAgIGlmIChleGFjdCAmJiAhaXNTdWJTdHIocm91dGVQYXRoLCAnOicpICYmIHJvdXRlUGF0aCAhPT0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKSB7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWRpcmVjdCwgewogICAgICAgIHRvOiBhcHAuY29uc3RhbnRzLm5vdEZvdW5kLnJvdXRlCiAgICAgIH0pOwogICAgfQoKICAgIGlmICh3aXRoU3VzcGVuc2UpIHsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEVycm9yQm91bmRhcnksIHsKICAgICAgICB0eXBlOiAicGFnZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3VzcGVuc2UsIHsKICAgICAgICBmYWxsYmFjazogZmFsbGJhY2sKICAgICAgfSwgUm91dGVDb21wb25lbnQpKTsKICAgIH0KCiAgICByZXR1cm4gUm91dGVDb21wb25lbnQ7CiAgfTsgLy8gVE9ETzog5ZyoIHFpYW5rdW4g5Lit77yMIOavj+asoeeCueWHu+i3r+eUseWIh+aNouS8mu+8jOWIt+aWsOW8uuWItuinpuWPkemhtemdou+8jOS4pOasoeabtOaWsOOAguWcqOmjniBxaWFua3VuIOmhtemdouS4i++8jOayoemXrumimOOAggogIC8vIOivpeino+WGs+aWueahiOS8muWvvOiHtOmhtemdouWIh+aNouaXtuS8mumXquS4gOS4iwoKCiAgdmFyIENhY2hlZFJvdXRlID0gdXNlRGVib3VuY2VSZW5kZXIoewogICAgZ2V0Q29tcG9uZW50OiBnZXRSb3V0ZUNvbXBvbmVudCwKICAgIHdhaXQ6IGRlYm91bmNlUm91dGUKICB9LCBba2V5UmVmLmN1cnJlbnRdKTsKICByZXR1cm4gZGVib3VuY2VSb3V0ZSA/IENhY2hlZFJvdXRlIDogZ2V0Um91dGVDb21wb25lbnQoKTsKfTsgLy8gVE9ETzog5pSv5oyB6Ieq5a6a5LmJIDQwNAoKdmFyIE5vdEZvdW5kUm91dGUgPSAoKSA9PiB7CiAgdmFyIENvbXBvbmVudCA9IE5vdEZvdW5kOwogIHZhciBub3RGb3VuZEZpbGVQYXRoID0gYXBwLmNvbnN0YW50cy5ub3RGb3VuZC5wYWdlUGF0aDsKCiAgaWYgKG5vdEZvdW5kRmlsZVBhdGgpIHsKICAgIHRyeSB7CiAgICAgIENvbXBvbmVudCA9IC8qI19fUFVSRV9fKi9sYXp5KCgpID0+IGdldFBhZ2VGaWxlQXN5bmMoewogICAgICAgIG5vZGVQYXRoOiBjdXJyUGF0aChub3RGb3VuZEZpbGVQYXRoLCAnNDA0JykKICAgICAgfSkpOwogICAgfSBjYXRjaCAoXykgewogICAgICBDb21wb25lbnQgPSBOb3RGb3VuZDsKICAgIH0KICB9CgogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZSwgewogICAgcGF0aDogIioiLAogICAgY29tcG9uZW50OiBDb21wb25lbnQKICB9KTsKfTsgLy8g5bCGIHJvdXRlQ29uZmlnIOi9rOaNouS4uiByb3V0ZQoKCmV4cG9ydCB2YXIgQXBwTWVudVJvdXRlcyA9IHByb3BzID0+IHsKICB2YXIgbWVudVJvdXRlcyA9IFtdOwogIHZhciB7CiAgICBkZWJvdW5jZVJvdXRlLAogICAgcGF0aFByZWZpeCA9ICcnLAogICAgYXV0aFJvdXRlcywKICAgIGZhbGxiYWNrOiBGYWxsQmFjawogIH0gPSBwcm9wczsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCgogIGVhY2hUcmVlKGF1dGhSb3V0ZXMsIGl0ZW0gPT4gewogICAgdmFyIHsKICAgICAgcGF0aCwKICAgICAgbGltaXRPbmx5CiAgICB9ID0gaXRlbTsKCiAgICBpZiAocGF0aCAmJiAhbGltaXRPbmx5KSB7CiAgICAgIHZhciByb3V0ZVByb3BzID0gT2JqZWN0LmFzc2lnbih7CiAgICAgICAgZGVib3VuY2VSb3V0ZSwKICAgICAgICBrZXk6IG1lbnVSb3V0ZXMubGVuZ3RoICsgMSwKICAgICAgICBmYWxsYmFjazogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRmFsbEJhY2ssIG51bGwpCiAgICAgIH0sIGl0ZW0pOwogICAgICByb3V0ZVByb3BzLnBhdGggPSAiIi5jb25jYXQocGF0aFByZWZpeCkuY29uY2F0KHBhdGgpOwogICAgICBtZW51Um91dGVzLnB1c2goIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFByZXN0Um91dGUsIE9iamVjdC5hc3NpZ24oe30sIHJvdXRlUHJvcHMpKSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN3aXRjaCwgbnVsbCwgbWVudVJvdXRlcywgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTm90Rm91bmRSb3V0ZSwgbnVsbCkpOwp9Ow=="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/routes/route.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__rest","s","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","Spinner","eachTree","isFunction","map","get","cloneDeep","omit","pick","React","createContext","lazy","useContext","useMemo","Suspense","useState","useEffect","isValidElement","useRef","Redirect","Route","Switch","app","NotFound","Amis","useDebounceRender","ErrorBoundary","isSubStr","getNodePath","getPageMockSource","getPagePreset","getRoutePath","currPath","getPageFileAsync","checkLimitByKeys","PageSpinner","createElement","overlay","show","size","key","getPageAsync","option","file","default","content","schema","getSchema","defaultSchema","type","body","compProps","LazyFileComponent","lazyFileAmisProps","PrestComponent","assign","PrivateRoute","props","onAuth","onRedirect","redirect","children","rest","isAuth","setAuth","isMounted","redirectPath","constants","loginRoute","checkAuth","authRes","current","render","location","to","pathname","state","from","PresetContext","route","usePresetContext","preset","checkLimit","keys","nodePath","RouteComponent","path","exact","pathToComponent","propNodePath","fileOption","mockSource","env","isMock","undefined","presetConf","apis","api","url","mock","contextValue","Component","contextRef","Provider","PrestRoute","_a","component","withSuspense","fallback","debounceRoute","routePath","locationKey","keyRef","getRouteComponent","window","notFound","CachedRoute","getComponent","wait","NotFoundRoute","notFoundFilePath","pagePath","_","AppMenuRoutes","menuRoutes","pathPrefix","authRoutes","FallBack","item","limitOnly","routeProps","push"],"mappings":"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","sourcesContent":["/**\n * APP 路由相关组件\n * 优化： 由于route读取数据时，会有短暂的 404\n * BUG: 页面切换太快时，会导致页面报错\n * Uncaught (in promise) Error: [mobx-state-tree] Cannot modify 'ErrorDetail[]@/errorData [dead]', the object is protected and can only be modified by using an action.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Spinner } from 'amis';\nimport { eachTree } from 'amis/lib/utils/helper';\nimport { isFunction, map, get, cloneDeep, omit, pick } from 'lodash';\nimport React, { createContext, lazy, useContext, useMemo, Suspense, useState, useEffect, isValidElement, useRef, } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { app } from \"../app\";\nimport NotFound from \"../components/404\";\nimport { Amis } from \"../components/amis/schema\";\nimport { useDebounceRender } from \"../components/debounce_render\";\nimport ErrorBoundary from \"../components/error_boundary\";\nimport { isSubStr } from \"../utils/tool\";\nimport { getNodePath, getPageMockSource, getPagePreset, getRoutePath, currPath, getPageFileAsync, } from \"./exports\";\nimport { checkLimitByKeys } from \"./limit/exports\";\nconst PageSpinner = React.createElement(Spinner, { overlay: true, show: true, size: \"lg\", key: \"pageLoading\" });\n// 根据 path，pathToComponent  参数 懒加载 `pages/xxx` 组件\nexport const getPageAsync = (option) => {\n    return lazy(() => getPageFileAsync(option).then((file) => {\n        const { default: content = {}, schema, getSchema } = file;\n        const defaultSchema = {\n            type: 'wrapper',\n            body: '请传入正确的 schema',\n        };\n        const compProps = {};\n        if (isFunction(content)) {\n            compProps.LazyFileComponent = content;\n        }\n        else {\n            if (schema || getSchema) {\n                content.schema = isFunction(getSchema) ? getSchema(option) : schema || defaultSchema;\n            }\n            if (!content.schema) {\n                content.schema = defaultSchema;\n            }\n            compProps.lazyFileAmisProps = content;\n        }\n        return {\n            default: () => React.createElement(PrestComponent, Object.assign({}, option, compProps)),\n        };\n    }));\n};\n// 登录路由拦截\nexport const PrivateRoute = (props) => {\n    const { onAuth, onRedirect, redirect, children } = props, rest = __rest(props, [\"onAuth\", \"onRedirect\", \"redirect\", \"children\"]);\n    const [isAuth, setAuth] = useState(null);\n    const isMounted = useRef(null);\n    const redirectPath = (onRedirect ? onRedirect() : redirect) || app.constants.loginRoute;\n    const checkAuth = () => __awaiter(void 0, void 0, void 0, function* () {\n        if (isFunction(onAuth)) {\n            const authRes = yield onAuth();\n            if (isMounted.current) {\n                setAuth(authRes);\n            }\n            return;\n        }\n        setAuth(true);\n    });\n    useEffect(() => {\n        isMounted.current = true;\n        checkAuth();\n        return () => {\n            isMounted.current = false;\n        };\n    }, []);\n    if (isAuth === null) {\n        return React.createElement(\"div\", null);\n    }\n    return (React.createElement(Route, Object.assign({}, rest, { render: ({ location }) => {\n            if (isAuth) {\n                return children;\n            }\n            if (redirectPath) {\n                return (React.createElement(Redirect, { to: {\n                        pathname: redirectPath,\n                        state: { from: location },\n                    } }));\n            }\n            return React.createElement(\"div\", null, \"unauthorized route.\");\n        } })));\n};\n// usePresetContext 可获取 preset 值，与 checkLimit 校验权限 方法\nconst PresetContext = createContext({\n    route: {},\n});\nexport const usePresetContext = () => {\n    const preset = useContext(PresetContext);\n    const checkLimit = (keys, option) => checkLimitByKeys(keys, Object.assign({ nodePath: preset.nodePath }, option));\n    return Object.assign(Object.assign({}, preset), { checkLimit });\n};\n// 将 preset 注入组件，可全局通过 usePresetContext 获取 preset 值\nconst PrestComponent = (props) => {\n    const { LazyFileComponent, lazyFileAmisProps, RouteComponent } = props, rest = __rest(props, [\"LazyFileComponent\", \"lazyFileAmisProps\", \"RouteComponent\"]);\n    const { path, exact, children, pathToComponent, nodePath: propNodePath } = rest;\n    const preset = useMemo(() => {\n        const fileOption = { path, pathToComponent, nodePath: propNodePath };\n        const mockSource = !app.env.isMock ? undefined : getPageMockSource(fileOption);\n        const nodePath = getNodePath(fileOption);\n        const presetConf = cloneDeep(Object.assign(Object.assign({}, pick(rest, ['limits', 'apis'])), (getPagePreset(fileOption) || get(lazyFileAmisProps, 'schema.preset') || {})));\n        presetConf.nodePath = exact && children && path ? path : nodePath;\n        map(presetConf.apis, (api) => {\n            // 自动注入规则\n            if (api.url && api.mock !== false && !api.mockSource && mockSource) {\n                api.mockSource = mockSource[api.url] || mockSource;\n            }\n        });\n        return presetConf;\n    }, [path, pathToComponent, propNodePath]);\n    const contextValue = Object.assign(Object.assign({}, preset), { route: omit(rest, Object.keys(preset)) });\n    let Component = React.createElement(\"div\", null, \"Not Found \\u8BF7\\u68C0\\u67E5\\u8DEF\\u7531\\u8BBE\\u7F6E\");\n    if (LazyFileComponent) {\n        Component = React.createElement(LazyFileComponent, Object.assign({}, rest));\n    }\n    if (RouteComponent) {\n        Component = React.createElement(RouteComponent, Object.assign({}, rest));\n    }\n    if (lazyFileAmisProps) {\n        const contextRef = get(lazyFileAmisProps, 'props.contextRef');\n        if (isFunction(contextRef)) {\n            contextRef(contextValue);\n        }\n        lazyFileAmisProps.schema.preset = Object.assign(Object.assign({}, lazyFileAmisProps.schema.preset), preset);\n        Component = React.createElement(Amis, Object.assign({}, rest, lazyFileAmisProps));\n    }\n    return React.createElement(PresetContext.Provider, { value: contextValue }, Component);\n};\n// 处理每个路由，包裹 PrestComponent 组件\nexport const PrestRoute = (props) => {\n    var _a;\n    const { component, children, withSuspense = true, fallback = PageSpinner, path = '', exact = true, debounceRoute = 0 } = props, rest = __rest(props, [\"component\", \"children\", \"withSuspense\", \"fallback\", \"path\", \"exact\", \"debounceRoute\"]);\n    const routePath = getRoutePath(path);\n    const locationKey = ((_a = rest === null || rest === void 0 ? void 0 : rest.location) === null || _a === void 0 ? void 0 : _a.key) || '';\n    const keyRef = useRef('');\n    if (locationKey) {\n        keyRef.current = locationKey;\n    }\n    const RouteComponent = (React.createElement(Route, Object.assign({}, rest, { path: routePath, exact: exact, component: !component\n            ? getPageAsync(props)\n            : () => React.createElement(PrestComponent, Object.assign({}, props, { RouteComponent: component })) }), isValidElement(children) ? children : null));\n    const getRouteComponent = () => {\n        if (exact && !isSubStr(routePath, ':') && routePath !== window.location.pathname) {\n            return React.createElement(Redirect, { to: app.constants.notFound.route });\n        }\n        if (withSuspense) {\n            return (React.createElement(ErrorBoundary, { type: \"page\" },\n                React.createElement(Suspense, { fallback: fallback }, RouteComponent)));\n        }\n        return RouteComponent;\n    };\n    // TODO: 在 qiankun 中， 每次点击路由切换会，刷新强制触发页面，两次更新。在飞 qiankun 页面下，没问题。\n    // 该解决方案会导致页面切换时会闪一下\n    const CachedRoute = useDebounceRender({\n        getComponent: getRouteComponent,\n        wait: debounceRoute,\n    }, [keyRef.current]);\n    return debounceRoute ? CachedRoute : getRouteComponent();\n};\n// TODO: 支持自定义 404\nconst NotFoundRoute = () => {\n    let Component = NotFound;\n    const notFoundFilePath = app.constants.notFound.pagePath;\n    if (notFoundFilePath) {\n        try {\n            Component = lazy(() => getPageFileAsync({\n                nodePath: currPath(notFoundFilePath, '404'),\n            }));\n        }\n        catch (_) {\n            Component = NotFound;\n        }\n    }\n    return React.createElement(Route, { path: \"*\", component: Component });\n};\n// 将 routeConfig 转换为 route\nexport const AppMenuRoutes = (props) => {\n    const menuRoutes = [];\n    const { debounceRoute, pathPrefix = '', authRoutes, fallback: FallBack } = props;\n    // eslint-disable-next-line\n    eachTree(authRoutes, (item) => {\n        const { path, limitOnly } = item;\n        if (path && !limitOnly) {\n            const routeProps = Object.assign({ debounceRoute, key: menuRoutes.length + 1, fallback: React.createElement(FallBack, null) }, item);\n            routeProps.path = `${pathPrefix}${path}`;\n            menuRoutes.push(React.createElement(PrestRoute, Object.assign({}, routeProps)));\n        }\n    });\n    return (React.createElement(Switch, null,\n        menuRoutes,\n        React.createElement(NotFoundRoute, null)));\n};\n"]}]}