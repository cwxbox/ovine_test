{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\amis\\schema\\amis.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\amis\\schema\\amis.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY29uZmlybSBhcyBfY29uZmlybSwgcmVuZGVyLCB0b2FzdCwgYWxlcnQgYXMgX2FsZXJ0IH0gZnJvbSAnYW1pcyc7CmltcG9ydCB7IHRva2VuaXplIH0gZnJvbSAnYW1pcy9saWIvdXRpbHMvdHBsLWJ1aWx0aW4nOwppbXBvcnQgX2NvcHkgZnJvbSAnY29weS10by1jbGlwYm9hcmQnOwppbXBvcnQgeyBnZXQgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBhcHAgfSBmcm9tICIuLi8uLi8uLi9hcHAiOwppbXBvcnQgeyBqdW1wVG8gYXMgX2p1bXBUbywgbm9ybWFsaXplTGluayB9IGZyb20gIi4uLy4uLy4uL3JvdXRlcy9leHBvcnRzIjsKaW1wb3J0IGxvZ2dlciBmcm9tICIuLi8uLi8uLi91dGlscy9sb2dnZXIiOwppbXBvcnQgeyBsaWJGZXRjaGVyIH0gZnJvbSAiLi9hcGkiOwp2YXIgbG9nID0gbG9nZ2VyLmdldExvZ2dlcignbGliOmNvbXBvbmVudHM6YW1pczpzY2hlbWEnKTsKZXhwb3J0IGRlZmF1bHQgKG9wdGlvbiA9PiB7CiAgdmFyIHsKICAgIHNjaGVtYSwKICAgIHByb3BzID0ge30sCiAgICBvcHRpb246IGFtaXNPcHRpb24gPSB7fQogIH0gPSBvcHRpb247CiAgdmFyIHsKICAgIHRoZW1lLAogICAgbG9jYWxlCiAgfSA9IGFtaXNPcHRpb247CiAgdmFyIGJhc2VFbnYgPSB7CiAgICB0aGVtZSwKICAgIGZldGNoZXI6IGxpYkZldGNoZXIsCiAgICAvLyDmmK/lkKblj5bmtoggYWpheOivt+axggogICAgaXNDYW5jZWw6IHJlc29uID0+IHsKICAgICAgdmFyIGlzQ2FuY2VsID0gZ2V0KHJlc29uLCAnZXJyb3IubmFtZScpID09PSAnQWJvcnRFcnJvcic7CgogICAgICBpZiAoaXNDYW5jZWwpIHsKICAgICAgICBsb2cuaW5mbygnaXNDYW5jZWwg6K+35rGC6KKr57uI5q2iJyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICAvLyDlrp7njrDvvIzlhoXlrrnlpI3liLbjgIIvLyDlrp7njrDvvIzlhoXlrrnlpI3liLbjgIIKICAgIGNvcHk6IChjb250ZW50cywgb3B0aW9ucykgPT4gewogICAgICB2YXIgcmV0ID0gX2NvcHkoY29udGVudHMsIG9wdGlvbnMpOwoKICAgICAgaWYgKHJldCAmJiAoIW9wdGlvbnMgfHwgb3B0aW9ucy5zaHV0dXAgIT09IHRydWUpKSB7CiAgICAgICAgdG9hc3QuaW5mbygn5bey5ou36LSd5Yiw5Ymq5YiH5p2/Jyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXQ7CiAgICB9LAogICAgLy8g5a6e546w6K2m5ZGK5o+Q56S644CCCiAgICBhbGVydDogbXNnID0+IHsKICAgICAgbG9nLmxvZygnYWxlcnQnLCBtc2cpOwoKICAgICAgX2FsZXJ0KG1zZyk7CiAgICB9LAogICAgLy8gSFRNTEVsZW1lbnQg5Yaz5a6a5by55qGG5a655Zmo44CCIC0tLS0gVE9ETzogYW1pcy1lZGl0b3Ig5pyJ5YW85a656Zeu6aKYCiAgICAvLyBnZXRNb2RhbENvbnRhaW5lcjogKCkgPT4gewogICAgLy8gICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXJvb3QnKQogICAgLy8gfSwKICAgIC8vIOa2iOaBr+aPkOekugogICAgbm90aWZ5OiBmdW5jdGlvbiBub3RpZnkoKSB7CiAgICAgIHZhciBtc2dUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnZXJyb3InOwogICAgICB2YXIgbXNnID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJzsKICAgICAgbG9nLmxvZygnbm90aWZ5JywgewogICAgICAgIG1zZ1R5cGUsCiAgICAgICAgbXNnCiAgICAgIH0pOyAvLyDpu5jorqTot7Pov4fooajljZXplJnor68g5o+Q56S6CgogICAgICBpZiAoL+ihqOWNlemqjOivgeWksei0pS8udGVzdChtc2cpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdGlwTXNnID0gdG9hc3RbbXNnVHlwZV07CiAgICAgIHZhciBtc2dUaXRsZSA9IG1zZ1R5cGUgPT09ICdlcnJvcicgPyAn57O757uf6ZSZ6K+vJyA6ICfmj5DnpLonOwogICAgICB2YXIgbXNnVGV4dCA9ICfns7vnu5/lj5HnlJ/mnKrnn6XlvILluLgnOwoKICAgICAgaWYgKG1zZyAmJiB0eXBlb2YgbXNnID09PSAnc3RyaW5nJykgewogICAgICAgIG1zZ1RleHQgPSBtc2c7CgogICAgICAgIGlmIChtc2cuaW5kZXhPZignWycpID09PSAwICYmIG1zZy5pbmRleE9mKCddICcpID4gMCkgewogICAgICAgICAgdmFyIGVuZCA9IG1zZy5pbmRleE9mKCddICcpOwogICAgICAgICAgbXNnVGV4dCA9IG1zZy5zdWJzdHIoZW5kICsgMSk7CiAgICAgICAgICBtc2dUaXRsZSA9IG1zZy5zdWJzdHJpbmcoMSwgZW5kKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aXBNc2cpIHsKICAgICAgICB0aXBNc2cobXNnVGV4dCwgbXNnVGl0bGUpOwogICAgICB9CiAgICB9LAogICAgLy8g5a6e546w56Gu6K6k5qGG44CCIGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+CiAgICBjb25maXJtOiAobXNnLCB0aXRsZSkgPT4gewogICAgICB2YXIgY29uZmlybVRpdGxlID0gdGl0bGUgfHwgJ+aPkOekuic7CiAgICAgIHZhciBjb25maXJtVGV4dCA9IG1zZyB8fCAnJzsKCiAgICAgIGlmICghdGl0bGUgJiYgbXNnLmluZGV4T2YoJ1snKSA9PT0gMCAmJiBtc2cuaW5kZXhPZignXSAnKSA+IDApIHsKICAgICAgICB2YXIgZW5kID0gbXNnLmluZGV4T2YoJ10gJyk7CiAgICAgICAgY29uZmlybVRleHQgPSBtc2cuc3Vic3RyKGVuZCArIDEpOwogICAgICAgIGNvbmZpcm1UaXRsZSA9IG1zZy5zdWJzdHJpbmcoMSwgZW5kKTsKICAgICAgfQoKICAgICAgbG9nLmxvZygnY29uZmlybTogJywgbXNnKTsKICAgICAgcmV0dXJuIF9jb25maXJtKGNvbmZpcm1UZXh0LCBjb25maXJtVGl0bGUpOwogICAgfQogIH07CiAgd2luZG93Lk9WSU5FX0FNSVNfRU5WID0gYmFzZUVudjsKICB2YXIgbGliT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYmFzZUVudiksIHsKICAgIHNlc3Npb246ICdnbG9iYWwnLAogICAgLy8gbnVtYmVyIOWbuuW6lemXtOi3nSDpobbpg6jpl7Tot50KICAgIGFmZml4T2Zmc2V0VG9wOiA1MCwKICAgIC8vIG51bWJlciDlm7rlupXpl7Tot53vvIzlvZPkvaDnmoTmnInlhbZ45LuW5Zu65bqV5YWD57Sg5pe277yM6ZyA6KaB6K6+572u5LiA5a6a55qE5YGP56e76YeP77yM5ZCm5YiZ5Lya6YeN5Y+g44CCCiAgICBhZmZpeE9mZnNldEJvdHRvbTogMCwKICAgIC8vIOWvjOaWh+acrOe8lui+keWZqCB0b2tlbu+8jCDlhoXnva4gcmljaC10ZXh0IOS4uiBmcm9sYUVkaXRvcu+8jOaDs+imgeS9v+eUqO+8jOivt+iHquihjOi0reS5sO+8jOaIluiAheiHquW3seWunueOsCByaWNoLXRleHQg5riy5p+T5Zmo44CCCiAgICByaWNoVGV4dFRva2VuOiBmYWxzZSwKICAgIC8vIOWunueOsOmhtemdoui3s+i9rAogICAganVtcFRvOiAodG8sIGFjdGlvbiwgY3R4KSA9PiB7CiAgICAgIHZhciB7CiAgICAgICAgYmxhbmssCiAgICAgICAgcmVwbGFjZSwKICAgICAgICBvcmlnaW4KICAgICAgfSA9IGFjdGlvbiB8fCB7fTsKCiAgICAgIGlmICh0by5pbmRleE9mKCckJykgPiAtMSAmJiBjdHgpIHsKICAgICAgICB0byA9IHRva2VuaXplKHRvLCBjdHgpOwogICAgICB9CgogICAgICBsb2cubG9nKCdqdW1wVG8nLCB7CiAgICAgICAgdG8sCiAgICAgICAgYWN0aW9uLAogICAgICAgIGN0eAogICAgICB9KTsKCiAgICAgIF9qdW1wVG8odG8sIHsKICAgICAgICBibGFuaywKICAgICAgICByZXBsYWNlLAogICAgICAgIG9yaWdpbgogICAgICB9KTsKICAgIH0sCiAgICAvLyDlnLDlnYDmm7/mjaLvvIzot58ganVtcFRvIOexu+S8vOOAggogICAgdXBkYXRlTG9jYXRpb246IGZ1bmN0aW9uIHVwZGF0ZUxvY2F0aW9uKHRvKSB7CiAgICAgIHZhciByZXBsYWNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgdmFyIHsKICAgICAgICBocmVmLAogICAgICAgIHBhdGhuYW1lCiAgICAgIH0gPSBub3JtYWxpemVMaW5rKHsKICAgICAgICB0bwogICAgICB9KTsKICAgICAgdmFyIGlzUmVwbGFjZSA9IHBhdGhuYW1lID09PSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7CiAgICAgIGxvZy5sb2coJ3VwZGF0ZUxvY2F0aW9uJywgcmVwbGFjZSA/ICdyZXBsYWNlICcgOiAncHVzaCcsIGlzUmVwbGFjZSwgaHJlZik7CgogICAgICBpZiAoaXNSZXBsYWNlKSB7CiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCBocmVmKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGFwcC5yb3V0ZXJIaXN0b3J5LnB1c2goaHJlZik7CiAgICB9LAogICAgLy8g5Yik5pat55uu5qCH5Zyw5Z2A5piv5ZCm5Li65b2T5YmN6aG16Z2i44CCCiAgICBpc0N1cnJlbnRVcmw6IHRvID0+IHsKICAgICAgdmFyIHsKICAgICAgICBocmVmCiAgICAgIH0gPSBub3JtYWxpemVMaW5rKHsKICAgICAgICB0bwogICAgICB9KTsKICAgICAgdmFyIGlzQ3VycmVudCA9IGhyZWYgPT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgJycpOwogICAgICBsb2cubG9nKCdpc0N1cnJlbnRVcmwnLCBpc0N1cnJlbnQsIGhyZWYpOwogICAgICByZXR1cm4gaXNDdXJyZW50OwogICAgfSwKICAgIC8vIFByb21pc2U8RnVuY3Rpb24+ICDlj6/ku6XpgJrov4flroPmh5LliqDovb3oh6rlrprkuYnnu4Tku7bvvIzmr5TlpoLvvJogaHR0cHM6Ly9naXRodWIuY29tL2JhaWR1L2FtaXMvYmxvYi9tYXN0ZXIvX190ZXN0c19fL2ZhY3RvcnkudGVzdC50c3gjTDY0LUw5MeOAggogICAgLy8g5aSn5Z6L57uE5Lu25Y+v6IO96ZyA6KaB5byC5q2l5Yqg6L2944CC5q+U5aaC77ya5a+M5paH5pys57yW6L6R5ZmoCiAgICBsb2FkUmVuZGVyZXI6IChsb2FkZXJTY2hlbWEsIHBhdGgpID0+IHsKICAgICAgbG9nLmxvZygnbG9hZFJlbmRlcmVyJywgbG9hZGVyU2NoZW1hLCBwYXRoKTsKICAgIH0KICB9KTsKICB2YXIgcmVuZGVyZXJPcHRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbGliT3B0aW9ucyksIGFwcC5hbWlzKSwgYW1pc09wdGlvbik7CiAgdmFyIHJlbmRlcmVyUHJvcHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHByb3BzKSwgewogICAgdGhlbWUsCiAgICBsb2NhbGUKICB9KTsgLy8gY29uc29sZS5sb2coJ0A9PT0+JywgcHJvcHMsIHJlbmRlcmVyT3B0aW9uKQoKICByZXR1cm4gcmVuZGVyKHNjaGVtYSwgcmVuZGVyZXJQcm9wcywgcmVuZGVyZXJPcHRpb24pOwp9KTs="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/amis/schema/amis.js"],"names":["confirm","render","toast","alert","tokenize","copy","get","app","jumpTo","normalizeLink","logger","libFetcher","log","getLogger","option","schema","props","amisOption","theme","locale","baseEnv","fetcher","isCancel","reson","info","contents","options","ret","shutup","msg","notify","msgType","test","tipMsg","msgTitle","msgText","indexOf","end","substr","substring","title","confirmTitle","confirmText","window","OVINE_AMIS_ENV","libOptions","Object","assign","session","affixOffsetTop","affixOffsetBottom","richTextToken","to","action","ctx","blank","replace","origin","updateLocation","href","pathname","isReplace","location","history","replaceState","routerHistory","push","isCurrentUrl","isCurrent","loadRenderer","loaderSchema","path","rendererOption","amis","rendererProps"],"mappings":"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","sourcesContent":["import { confirm, render, toast, alert } from 'amis';\nimport { tokenize } from 'amis/lib/utils/tpl-builtin';\nimport copy from 'copy-to-clipboard';\nimport { get } from 'lodash';\nimport { app } from \"../../../app\";\nimport { jumpTo, normalizeLink } from \"../../../routes/exports\";\nimport logger from \"../../../utils/logger\";\nimport { libFetcher } from \"./api\";\nconst log = logger.getLogger('lib:components:amis:schema');\nexport default (option) => {\n    const { schema, props = {}, option: amisOption = {} } = option;\n    const { theme, locale } = amisOption;\n    const baseEnv = {\n        theme,\n        fetcher: libFetcher,\n        // 是否取消 ajax请求\n        isCancel: (reson) => {\n            const isCancel = get(reson, 'error.name') === 'AbortError';\n            if (isCancel) {\n                log.info('isCancel 请求被终止');\n                return true;\n            }\n            return false;\n        },\n        // 实现，内容复制。// 实现，内容复制。\n        copy: (contents, options) => {\n            const ret = copy(contents, options);\n            if (ret && (!options || options.shutup !== true)) {\n                toast.info('已拷贝到剪切板');\n            }\n            return ret;\n        },\n        // 实现警告提示。\n        alert: (msg) => {\n            log.log('alert', msg);\n            alert(msg);\n        },\n        // HTMLElement 决定弹框容器。 ---- TODO: amis-editor 有兼容问题\n        // getModalContainer: () => {\n        //   return document.getElementById('modal-root')\n        // },\n        // 消息提示\n        notify: (msgType = 'error', msg = '') => {\n            log.log('notify', { msgType, msg });\n            // 默认跳过表单错误 提示\n            if (/表单验证失败/.test(msg)) {\n                return;\n            }\n            const tipMsg = toast[msgType];\n            let msgTitle = msgType === 'error' ? '系统错误' : '提示';\n            let msgText = '系统发生未知异常';\n            if (msg && typeof msg === 'string') {\n                msgText = msg;\n                if (msg.indexOf('[') === 0 && msg.indexOf('] ') > 0) {\n                    const end = msg.indexOf('] ');\n                    msgText = msg.substr(end + 1);\n                    msgTitle = msg.substring(1, end);\n                }\n            }\n            if (tipMsg) {\n                tipMsg(msgText, msgTitle);\n            }\n        },\n        // 实现确认框。 boolean | Promise<boolean>\n        confirm: (msg, title) => {\n            let confirmTitle = title || '提示';\n            let confirmText = msg || '';\n            if (!title && msg.indexOf('[') === 0 && msg.indexOf('] ') > 0) {\n                const end = msg.indexOf('] ');\n                confirmText = msg.substr(end + 1);\n                confirmTitle = msg.substring(1, end);\n            }\n            log.log('confirm: ', msg);\n            return confirm(confirmText, confirmTitle);\n        },\n    };\n    window.OVINE_AMIS_ENV = baseEnv;\n    const libOptions = Object.assign(Object.assign({}, baseEnv), { session: 'global', \n        // number 固底间距 顶部间距\n        affixOffsetTop: 50, \n        // number 固底间距，当你的有其x他固底元素时，需要设置一定的偏移量，否则会重叠。\n        affixOffsetBottom: 0, \n        // 富文本编辑器 token， 内置 rich-text 为 frolaEditor，想要使用，请自行购买，或者自己实现 rich-text 渲染器。\n        richTextToken: false, \n        // 实现页面跳转\n        jumpTo: (to, action, ctx) => {\n            const { blank, replace, origin } = action || {};\n            if (to.indexOf('$') > -1 && ctx) {\n                to = tokenize(to, ctx);\n            }\n            log.log('jumpTo', { to, action, ctx });\n            jumpTo(to, { blank, replace, origin });\n        }, \n        // 地址替换，跟 jumpTo 类似。\n        updateLocation: (to, replace = false) => {\n            const { href, pathname } = normalizeLink({ to });\n            const isReplace = pathname === window.location.pathname;\n            log.log('updateLocation', replace ? 'replace ' : 'push', isReplace, href);\n            if (isReplace) {\n                window.history.replaceState(null, '', href);\n                return;\n            }\n            app.routerHistory.push(href);\n        }, \n        // 判断目标地址是否为当前页面。\n        isCurrentUrl: (to) => {\n            const { href } = normalizeLink({ to });\n            const isCurrent = href === window.location.href.replace(window.location.origin, '');\n            log.log('isCurrentUrl', isCurrent, href);\n            return isCurrent;\n        }, \n        // Promise<Function>  可以通过它懒加载自定义组件，比如： https://github.com/baidu/amis/blob/master/__tests__/factory.test.tsx#L64-L91。\n        // 大型组件可能需要异步加载。比如：富文本编辑器\n        loadRenderer: (loaderSchema, path) => {\n            log.log('loadRenderer', loaderSchema, path);\n        } });\n    const rendererOption = Object.assign(Object.assign(Object.assign({}, libOptions), app.amis), amisOption);\n    const rendererProps = Object.assign(Object.assign({}, props), { theme,\n        locale });\n    // console.log('@===>', props, rendererOption)\n    return render(schema, rendererProps, rendererOption);\n};\n"]}]}