{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\styled\\theme.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\styled\\theme.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdGhlbWUgYXMgc2V0QW1pc1RoZW1lLCBzZXREZWZhdWx0VGhlbWUgfSBmcm9tICdhbWlzJzsKaW1wb3J0IHsgYXBwIH0gZnJvbSAiLi4vYXBwIjsKaW1wb3J0IHsgc3RvcmFnZSwgbWVzc2FnZSB9IGZyb20gIi4uL2NvbnN0YW50cyI7CmltcG9ydCB7IHB1Ymxpc2ggfSBmcm9tICIuLi91dGlscy9tZXNzYWdlIjsKaW1wb3J0IHsgc2V0U3RvcmUsIGdldFN0b3JlIH0gZnJvbSAiLi4vdXRpbHMvc3RvcmUiOwpleHBvcnQgdmFyIGRpc3BhdGNoTGluayA9ICh0aGVtZSwgY2FsbGJhY2spID0+IHsKICAvLyDlvZPlvIDlkK8gc2NzcyDnvJbor5Hml7bvvIzmiY3kvJrmr4/mrKHng63mm7TmlrDmm7TmlrDmlofku7bvvIzkuLvopoHnlKjkuo7kuLvpopjosIPor5UKICBzZXREZWZhdWx0VGhlbWUodGhlbWUpOwoKICBpZiAod2luZG93LklTX1NDU1NfVVBEQVRFKSB7CiAgICByZXF1aXJlKCJAZ2VuZXJhdGVkL3N0eWxlcy90aGVtZXMvIi5jb25jYXQodGhlbWUsICIuY3NzIikpOwoKICAgIGlmIChjYWxsYmFjaykgewogICAgICBjYWxsYmFjaygpOwogICAgfQoKICAgIHJldHVybjsKICB9CgogICQoJ2hlYWQgbGlua1tkYXRhLXRoZW1lXScpLnJlbW92ZSgpOwogIHZhciBsaW5rQXR0ciA9IHsKICAgIHJlbDogJ3N0eWxlc2hlZXQnLAogICAgdHlwZTogJ3RleHQvY3NzJywKICAgICdkYXRhLXRoZW1lJzogdGhlbWUsCiAgICBvbkxvYWQ6IGNhbGxiYWNrLAogICAgaHJlZjogcmVxdWlyZSgiQGdlbmVyYXRlZC9zdHlsZXMvdGhlbWVzLyIuY29uY2F0KHRoZW1lLCAiLmNzcyIpKQogIH07CiAgJCgnPGxpbmsvPicsIGxpbmtBdHRyKS5hcHBlbmRUbygnaGVhZCcpOwp9OwpleHBvcnQgdmFyIGNoYW5nZUFwcFRoZW1lID0gdGhlbWUgPT4gewogIHZhciAkYm9keSA9ICQoJ2JvZHknKTsKICAkYm9keS5yZW1vdmVDbGFzcygnaXMtbW9kYWxPcGVuZWQnKS5jc3MoJ29wYWNpdHknLCAwKTsKICBkaXNwYXRjaExpbmsodGhlbWUsICgpID0+IHsKICAgIHB1Ymxpc2gobWVzc2FnZS5hcHBUaGVtZSwgdGhlbWUpOwogICAgc2V0U3RvcmUoc3RvcmFnZS5hcHBUaGVtZSwgdGhlbWUpOwogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICRib2R5LmNzcygnb3BhY2l0eScsIDEpOwogICAgfSwgMzAwKTsKICB9KTsKfTsKZXhwb3J0IHZhciBpbml0QXBwVGhlbWUgPSAoKSA9PiB7CiAgdmFyIHRoZW1lID0gZ2V0U3RvcmUoc3RvcmFnZS5hcHBUaGVtZSkgfHwgJ2RlZmF1bHQnOwoKICBpZiAod2luZG93LklTX1NDU1NfVVBEQVRFKSB7CiAgICBkaXNwYXRjaExpbmsodGhlbWUpOwogIH0gLy8g6Z2eYW1pc+S4u+mimCDpg73pnIDopoHms6jlhowKCgogIE9iamVjdC52YWx1ZXMoYXBwLnRoZW1lLmdldEFsbFRoZW1lcygpKS5maWx0ZXIoaXRlbSA9PiAhL2N4ZHxkZWZhdWx0fGRhcmsvLnRlc3QoaXRlbS5uYW1lKSkuZm9yRWFjaChpdGVtID0+IHsKICAgIHNldEFtaXNUaGVtZShpdGVtLm5hbWUsIHsKICAgICAgY2xhc3NQcmVmaXg6IGl0ZW0ubnMKICAgIH0pOwogIH0pOwp9Ow=="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/styled/theme.js"],"names":["theme","setAmisTheme","setDefaultTheme","app","storage","message","publish","setStore","getStore","dispatchLink","callback","window","IS_SCSS_UPDATE","require","$","remove","linkAttr","rel","type","onLoad","href","appendTo","changeAppTheme","$body","removeClass","css","appTheme","setTimeout","initAppTheme","Object","values","getAllThemes","filter","item","test","name","forEach","classPrefix","ns"],"mappings":"AAAA,SAASA,KAAK,IAAIC,YAAlB,EAAgCC,eAAhC,QAAuD,MAAvD;AACA,SAASC,GAAT,QAAoB,QAApB;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,cAAjC;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,gBAAnC;AACA,OAAO,IAAMC,YAAY,GAAG,CAACT,KAAD,EAAQU,QAAR,KAAqB;AAC7C;AACAR,EAAAA,eAAe,CAACF,KAAD,CAAf;;AACA,MAAIW,MAAM,CAACC,cAAX,EAA2B;AACvBC,IAAAA,OAAO,oCAA6Bb,KAA7B,UAAP;;AACA,QAAIU,QAAJ,EAAc;AACVA,MAAAA,QAAQ;AACX;;AACD;AACH;;AACDI,EAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2BC,MAA3B;AACA,MAAMC,QAAQ,GAAG;AACbC,IAAAA,GAAG,EAAE,YADQ;AAEbC,IAAAA,IAAI,EAAE,UAFO;AAGb,kBAAclB,KAHD;AAIbmB,IAAAA,MAAM,EAAET,QAJK;AAKbU,IAAAA,IAAI,EAAEP,OAAO,oCAA6Bb,KAA7B;AALA,GAAjB;AAOAc,EAAAA,CAAC,CAAC,SAAD,EAAYE,QAAZ,CAAD,CAAuBK,QAAvB,CAAgC,MAAhC;AACH,CAnBM;AAoBP,OAAO,IAAMC,cAAc,GAAItB,KAAD,IAAW;AACrC,MAAMuB,KAAK,GAAGT,CAAC,CAAC,MAAD,CAAf;AACAS,EAAAA,KAAK,CAACC,WAAN,CAAkB,gBAAlB,EAAoCC,GAApC,CAAwC,SAAxC,EAAmD,CAAnD;AACAhB,EAAAA,YAAY,CAACT,KAAD,EAAQ,MAAM;AACtBM,IAAAA,OAAO,CAACD,OAAO,CAACqB,QAAT,EAAmB1B,KAAnB,CAAP;AACAO,IAAAA,QAAQ,CAACH,OAAO,CAACsB,QAAT,EAAmB1B,KAAnB,CAAR;AACA2B,IAAAA,UAAU,CAAC,MAAM;AACbJ,MAAAA,KAAK,CAACE,GAAN,CAAU,SAAV,EAAqB,CAArB;AACH,KAFS,EAEP,GAFO,CAAV;AAGH,GANW,CAAZ;AAOH,CAVM;AAWP,OAAO,IAAMG,YAAY,GAAG,MAAM;AAC9B,MAAM5B,KAAK,GAAGQ,QAAQ,CAACJ,OAAO,CAACsB,QAAT,CAAR,IAA8B,SAA5C;;AACA,MAAIf,MAAM,CAACC,cAAX,EAA2B;AACvBH,IAAAA,YAAY,CAACT,KAAD,CAAZ;AACH,GAJ6B,CAK9B;;;AACA6B,EAAAA,MAAM,CAACC,MAAP,CAAc3B,GAAG,CAACH,KAAJ,CAAU+B,YAAV,EAAd,EACKC,MADL,CACaC,IAAD,IAAU,CAAC,mBAAmBC,IAAnB,CAAwBD,IAAI,CAACE,IAA7B,CADvB,EAEKC,OAFL,CAEcH,IAAD,IAAU;AACnBhC,IAAAA,YAAY,CAACgC,IAAI,CAACE,IAAN,EAAY;AACpBE,MAAAA,WAAW,EAAEJ,IAAI,CAACK;AADE,KAAZ,CAAZ;AAGH,GAND;AAOH,CAbM","sourcesContent":["import { theme as setAmisTheme, setDefaultTheme } from 'amis';\nimport { app } from \"../app\";\nimport { storage, message } from \"../constants\";\nimport { publish } from \"../utils/message\";\nimport { setStore, getStore } from \"../utils/store\";\nexport const dispatchLink = (theme, callback) => {\n    // 当开启 scss 编译时，才会每次热更新更新文件，主要用于主题调试\n    setDefaultTheme(theme);\n    if (window.IS_SCSS_UPDATE) {\n        require(`@generated/styles/themes/${theme}.css`);\n        if (callback) {\n            callback();\n        }\n        return;\n    }\n    $('head link[data-theme]').remove();\n    const linkAttr = {\n        rel: 'stylesheet',\n        type: 'text/css',\n        'data-theme': theme,\n        onLoad: callback,\n        href: require(`@generated/styles/themes/${theme}.css`),\n    };\n    $('<link/>', linkAttr).appendTo('head');\n};\nexport const changeAppTheme = (theme) => {\n    const $body = $('body');\n    $body.removeClass('is-modalOpened').css('opacity', 0);\n    dispatchLink(theme, () => {\n        publish(message.appTheme, theme);\n        setStore(storage.appTheme, theme);\n        setTimeout(() => {\n            $body.css('opacity', 1);\n        }, 300);\n    });\n};\nexport const initAppTheme = () => {\n    const theme = getStore(storage.appTheme) || 'default';\n    if (window.IS_SCSS_UPDATE) {\n        dispatchLink(theme);\n    }\n    // 非amis主题 都需要注册\n    Object.values(app.theme.getAllThemes())\n        .filter((item) => !/cxd|default|dark/.test(item.name))\n        .forEach((item) => {\n        setAmisTheme(item.name, {\n            classPrefix: item.ns,\n        });\n    });\n};\n"]}]}