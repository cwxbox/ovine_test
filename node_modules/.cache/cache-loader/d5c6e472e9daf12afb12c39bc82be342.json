{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\styled\\theme.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\styled\\theme.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCmltcG9ydCB7IHRoZW1lIGFzIHNldEFtaXNUaGVtZSwgc2V0RGVmYXVsdFRoZW1lIH0gZnJvbSAnYW1pcyc7CmltcG9ydCB7IGFwcCB9IGZyb20gIi4uL2FwcCI7CmltcG9ydCB7IHN0b3JhZ2UsIG1lc3NhZ2UgfSBmcm9tICIuLi9jb25zdGFudHMiOwppbXBvcnQgeyBwdWJsaXNoIH0gZnJvbSAiLi4vdXRpbHMvbWVzc2FnZSI7CmltcG9ydCB7IHNldFN0b3JlLCBnZXRTdG9yZSB9IGZyb20gIi4uL3V0aWxzL3N0b3JlIjsKZXhwb3J0IHZhciBkaXNwYXRjaExpbmsgPSAodGhlbWUsIGNhbGxiYWNrKSA9PiB7CiAgLy8g5b2T5byA5ZCvIHNjc3Mg57yW6K+R5pe277yM5omN5Lya5q+P5qyh54Ot5pu05paw5pu05paw5paH5Lu277yM5Li76KaB55So5LqO5Li76aKY6LCD6K+VCiAgc2V0RGVmYXVsdFRoZW1lKHRoZW1lKTsKCiAgaWYgKHdpbmRvdy5JU19TQ1NTX1VQREFURSkgewogICAgcmVxdWlyZSgiQGdlbmVyYXRlZC9zdHlsZXMvdGhlbWVzLyIuY29uY2F0KHRoZW1lLCAiLmNzcyIpKTsKCiAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgY2FsbGJhY2soKTsKICAgIH0KCiAgICByZXR1cm47CiAgfQoKICAkKCdoZWFkIGxpbmtbZGF0YS10aGVtZV0nKS5yZW1vdmUoKTsKICB2YXIgbGlua0F0dHIgPSB7CiAgICByZWw6ICdzdHlsZXNoZWV0JywKICAgIHR5cGU6ICd0ZXh0L2NzcycsCiAgICAnZGF0YS10aGVtZSc6IHRoZW1lLAogICAgb25Mb2FkOiBjYWxsYmFjaywKICAgIGhyZWY6IHJlcXVpcmUoIkBnZW5lcmF0ZWQvc3R5bGVzL3RoZW1lcy8iLmNvbmNhdCh0aGVtZSwgIi5jc3MiKSkKICB9OwogICQoJzxsaW5rLz4nLCBsaW5rQXR0cikuYXBwZW5kVG8oJ2hlYWQnKTsKfTsKZXhwb3J0IHZhciBjaGFuZ2VBcHBUaGVtZSA9IHRoZW1lID0+IHsKICB2YXIgJGJvZHkgPSAkKCdib2R5Jyk7CiAgJGJvZHkucmVtb3ZlQ2xhc3MoJ2lzLW1vZGFsT3BlbmVkJykuY3NzKCdvcGFjaXR5JywgMCk7CiAgZGlzcGF0Y2hMaW5rKHRoZW1lLCAoKSA9PiB7CiAgICBwdWJsaXNoKG1lc3NhZ2UuYXBwVGhlbWUsIHRoZW1lKTsKICAgIHNldFN0b3JlKHN0b3JhZ2UuYXBwVGhlbWUsIHRoZW1lKTsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAkYm9keS5jc3MoJ29wYWNpdHknLCAxKTsKICAgIH0sIDMwMCk7CiAgfSk7Cn07CmV4cG9ydCB2YXIgaW5pdEFwcFRoZW1lID0gKCkgPT4gewogIHZhciB0aGVtZSA9IGdldFN0b3JlKHN0b3JhZ2UuYXBwVGhlbWUpIHx8ICdkZWZhdWx0JzsKCiAgaWYgKHdpbmRvdy5JU19TQ1NTX1VQREFURSkgewogICAgZGlzcGF0Y2hMaW5rKHRoZW1lKTsKICB9IC8vIOmdnmFtaXPkuLvpopgg6YO96ZyA6KaB5rOo5YaMCgoKICBPYmplY3QudmFsdWVzKGFwcC50aGVtZS5nZXRBbGxUaGVtZXMoKSkuZmlsdGVyKGl0ZW0gPT4gIS9jeGR8ZGVmYXVsdHxkYXJrLy50ZXN0KGl0ZW0ubmFtZSkpLmZvckVhY2goaXRlbSA9PiB7CiAgICBzZXRBbWlzVGhlbWUoaXRlbS5uYW1lLCB7CiAgICAgIGNsYXNzUHJlZml4OiBpdGVtLm5zCiAgICB9KTsKICB9KTsKfTsKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdCA6IHVuZGVmaW5lZDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoZGlzcGF0Y2hMaW5rLCAiZGlzcGF0Y2hMaW5rIiwgIkM6XFxVc2Vyc1xcY3d4XFxEZXNrdG9wXFxlZGl0b3ItZGVtb1xcbm9kZV9tb2R1bGVzXFxAb3ZpbmVcXGNvcmVcXGxpYlxcc3R5bGVkXFx0aGVtZS5qcyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGNoYW5nZUFwcFRoZW1lLCAiY2hhbmdlQXBwVGhlbWUiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxzdHlsZWRcXHRoZW1lLmpzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoaW5pdEFwcFRoZW1lLCAiaW5pdEFwcFRoZW1lIiwgIkM6XFxVc2Vyc1xcY3d4XFxEZXNrdG9wXFxlZGl0b3ItZGVtb1xcbm9kZV9tb2R1bGVzXFxAb3ZpbmVcXGNvcmVcXGxpYlxcc3R5bGVkXFx0aGVtZS5qcyIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwubGVhdmVNb2R1bGUgOiB1bmRlZmluZWQ7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/styled/theme.js"],"names":["theme","setAmisTheme","setDefaultTheme","app","storage","message","publish","setStore","getStore","dispatchLink","callback","window","IS_SCSS_UPDATE","require","$","remove","linkAttr","rel","type","onLoad","href","appendTo","changeAppTheme","$body","removeClass","css","appTheme","setTimeout","initAppTheme","Object","values","getAllThemes","filter","item","test","name","forEach","classPrefix","ns"],"mappings":";;;;;;;;;AAAA,SAASA,KAAK,IAAIC,YAAlB,EAAgCC,eAAhC,QAAuD,MAAvD;AACA,SAASC,GAAT,QAAoB,QAApB;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,cAAjC;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,gBAAnC;AACA,OAAO,IAAMC,YAAY,GAAG,CAACT,KAAD,EAAQU,QAAR,KAAqB;AAC7C;AACAR,EAAAA,eAAe,CAACF,KAAD,CAAf;;AACA,MAAIW,MAAM,CAACC,cAAX,EAA2B;AACvBC,IAAAA,OAAO,oCAA6Bb,KAA7B,UAAP;;AACA,QAAIU,QAAJ,EAAc;AACVA,MAAAA,QAAQ;AACX;;AACD;AACH;;AACDI,EAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2BC,MAA3B;AACA,MAAMC,QAAQ,GAAG;AACbC,IAAAA,GAAG,EAAE,YADQ;AAEbC,IAAAA,IAAI,EAAE,UAFO;AAGb,kBAAclB,KAHD;AAIbmB,IAAAA,MAAM,EAAET,QAJK;AAKbU,IAAAA,IAAI,EAAEP,OAAO,oCAA6Bb,KAA7B;AALA,GAAjB;AAOAc,EAAAA,CAAC,CAAC,SAAD,EAAYE,QAAZ,CAAD,CAAuBK,QAAvB,CAAgC,MAAhC;AACH,CAnBM;AAoBP,OAAO,IAAMC,cAAc,GAAItB,KAAD,IAAW;AACrC,MAAMuB,KAAK,GAAGT,CAAC,CAAC,MAAD,CAAf;AACAS,EAAAA,KAAK,CAACC,WAAN,CAAkB,gBAAlB,EAAoCC,GAApC,CAAwC,SAAxC,EAAmD,CAAnD;AACAhB,EAAAA,YAAY,CAACT,KAAD,EAAQ,MAAM;AACtBM,IAAAA,OAAO,CAACD,OAAO,CAACqB,QAAT,EAAmB1B,KAAnB,CAAP;AACAO,IAAAA,QAAQ,CAACH,OAAO,CAACsB,QAAT,EAAmB1B,KAAnB,CAAR;AACA2B,IAAAA,UAAU,CAAC,MAAM;AACbJ,MAAAA,KAAK,CAACE,GAAN,CAAU,SAAV,EAAqB,CAArB;AACH,KAFS,EAEP,GAFO,CAAV;AAGH,GANW,CAAZ;AAOH,CAVM;AAWP,OAAO,IAAMG,YAAY,GAAG,MAAM;AAC9B,MAAM5B,KAAK,GAAGQ,QAAQ,CAACJ,OAAO,CAACsB,QAAT,CAAR,IAA8B,SAA5C;;AACA,MAAIf,MAAM,CAACC,cAAX,EAA2B;AACvBH,IAAAA,YAAY,CAACT,KAAD,CAAZ;AACH,GAJ6B,CAK9B;;;AACA6B,EAAAA,MAAM,CAACC,MAAP,CAAc3B,GAAG,CAACH,KAAJ,CAAU+B,YAAV,EAAd,EACKC,MADL,CACaC,IAAD,IAAU,CAAC,mBAAmBC,IAAnB,CAAwBD,IAAI,CAACE,IAA7B,CADvB,EAEKC,OAFL,CAEcH,IAAD,IAAU;AACnBhC,IAAAA,YAAY,CAACgC,IAAI,CAACE,IAAN,EAAY;AACpBE,MAAAA,WAAW,EAAEJ,IAAI,CAACK;AADE,KAAZ,CAAZ;AAGH,GAND;AAOH,CAbM;;;;;;;;;;0BA/BM7B,Y;0BAoBAa,c;0BAWAM,Y","sourcesContent":["import { theme as setAmisTheme, setDefaultTheme } from 'amis';\nimport { app } from \"../app\";\nimport { storage, message } from \"../constants\";\nimport { publish } from \"../utils/message\";\nimport { setStore, getStore } from \"../utils/store\";\nexport const dispatchLink = (theme, callback) => {\n    // 当开启 scss 编译时，才会每次热更新更新文件，主要用于主题调试\n    setDefaultTheme(theme);\n    if (window.IS_SCSS_UPDATE) {\n        require(`@generated/styles/themes/${theme}.css`);\n        if (callback) {\n            callback();\n        }\n        return;\n    }\n    $('head link[data-theme]').remove();\n    const linkAttr = {\n        rel: 'stylesheet',\n        type: 'text/css',\n        'data-theme': theme,\n        onLoad: callback,\n        href: require(`@generated/styles/themes/${theme}.css`),\n    };\n    $('<link/>', linkAttr).appendTo('head');\n};\nexport const changeAppTheme = (theme) => {\n    const $body = $('body');\n    $body.removeClass('is-modalOpened').css('opacity', 0);\n    dispatchLink(theme, () => {\n        publish(message.appTheme, theme);\n        setStore(storage.appTheme, theme);\n        setTimeout(() => {\n            $body.css('opacity', 1);\n        }, 300);\n    });\n};\nexport const initAppTheme = () => {\n    const theme = getStore(storage.appTheme) || 'default';\n    if (window.IS_SCSS_UPDATE) {\n        dispatchLink(theme);\n    }\n    // 非amis主题 都需要注册\n    Object.values(app.theme.getAllThemes())\n        .filter((item) => !/cxd|default|dark/.test(item.name))\n        .forEach((item) => {\n        setAmisTheme(item.name, {\n            classPrefix: item.ns,\n        });\n    });\n};\n"]}]}