{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\amis\\schema\\amis.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\amis\\schema\\amis.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCmltcG9ydCB7IGNvbmZpcm0gYXMgX2NvbmZpcm0sIHJlbmRlciwgdG9hc3QsIGFsZXJ0IGFzIF9hbGVydCB9IGZyb20gJ2FtaXMnOwppbXBvcnQgeyB0b2tlbml6ZSB9IGZyb20gJ2FtaXMvbGliL3V0aWxzL3RwbC1idWlsdGluJzsKaW1wb3J0IF9jb3B5IGZyb20gJ2NvcHktdG8tY2xpcGJvYXJkJzsKaW1wb3J0IHsgZ2V0IH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgYXBwIH0gZnJvbSAiLi4vLi4vLi4vYXBwIjsKaW1wb3J0IHsganVtcFRvIGFzIF9qdW1wVG8sIG5vcm1hbGl6ZUxpbmsgfSBmcm9tICIuLi8uLi8uLi9yb3V0ZXMvZXhwb3J0cyI7CmltcG9ydCBsb2dnZXIgZnJvbSAiLi4vLi4vLi4vdXRpbHMvbG9nZ2VyIjsKaW1wb3J0IHsgbGliRmV0Y2hlciB9IGZyb20gIi4vYXBpIjsKdmFyIGxvZyA9IGxvZ2dlci5nZXRMb2dnZXIoJ2xpYjpjb21wb25lbnRzOmFtaXM6c2NoZW1hJyk7Cgp2YXIgX2RlZmF1bHQgPSBvcHRpb24gPT4gewogIHZhciB7CiAgICBzY2hlbWEsCiAgICBwcm9wcyA9IHt9LAogICAgb3B0aW9uOiBhbWlzT3B0aW9uID0ge30KICB9ID0gb3B0aW9uOwogIHZhciB7CiAgICB0aGVtZSwKICAgIGxvY2FsZQogIH0gPSBhbWlzT3B0aW9uOwogIHZhciBiYXNlRW52ID0gewogICAgdGhlbWUsCiAgICBmZXRjaGVyOiBsaWJGZXRjaGVyLAogICAgLy8g5piv5ZCm5Y+W5raIIGFqYXjor7fmsYIKICAgIGlzQ2FuY2VsOiByZXNvbiA9PiB7CiAgICAgIHZhciBpc0NhbmNlbCA9IGdldChyZXNvbiwgJ2Vycm9yLm5hbWUnKSA9PT0gJ0Fib3J0RXJyb3InOwoKICAgICAgaWYgKGlzQ2FuY2VsKSB7CiAgICAgICAgbG9nLmluZm8oJ2lzQ2FuY2VsIOivt+axguiiq+e7iOatoicpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgLy8g5a6e546w77yM5YaF5a655aSN5Yi244CCLy8g5a6e546w77yM5YaF5a655aSN5Yi244CCCiAgICBjb3B5OiAoY29udGVudHMsIG9wdGlvbnMpID0+IHsKICAgICAgdmFyIHJldCA9IF9jb3B5KGNvbnRlbnRzLCBvcHRpb25zKTsKCiAgICAgIGlmIChyZXQgJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuc2h1dHVwICE9PSB0cnVlKSkgewogICAgICAgIHRvYXN0LmluZm8oJ+W3suaLt+i0neWIsOWJquWIh+advycpOwogICAgICB9CgogICAgICByZXR1cm4gcmV0OwogICAgfSwKICAgIC8vIOWunueOsOitpuWRiuaPkOekuuOAggogICAgYWxlcnQ6IG1zZyA9PiB7CiAgICAgIGxvZy5sb2coJ2FsZXJ0JywgbXNnKTsKCiAgICAgIF9hbGVydChtc2cpOwogICAgfSwKICAgIC8vIEhUTUxFbGVtZW50IOWGs+WumuW8ueahhuWuueWZqOOAgiAtLS0tIFRPRE86IGFtaXMtZWRpdG9yIOacieWFvOWuuemXrumimAogICAgLy8gZ2V0TW9kYWxDb250YWluZXI6ICgpID0+IHsKICAgIC8vICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1yb290JykKICAgIC8vIH0sCiAgICAvLyDmtojmga/mj5DnpLoKICAgIG5vdGlmeTogZnVuY3Rpb24gbm90aWZ5KCkgewogICAgICB2YXIgbXNnVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ2Vycm9yJzsKICAgICAgdmFyIG1zZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7CiAgICAgIGxvZy5sb2coJ25vdGlmeScsIHsKICAgICAgICBtc2dUeXBlLAogICAgICAgIG1zZwogICAgICB9KTsgLy8g6buY6K6k6Lez6L+H6KGo5Y2V6ZSZ6K+vIOaPkOekugoKICAgICAgaWYgKC/ooajljZXpqozor4HlpLHotKUvLnRlc3QobXNnKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHRpcE1zZyA9IHRvYXN0W21zZ1R5cGVdOwogICAgICB2YXIgbXNnVGl0bGUgPSBtc2dUeXBlID09PSAnZXJyb3InID8gJ+ezu+e7n+mUmeivrycgOiAn5o+Q56S6JzsKICAgICAgdmFyIG1zZ1RleHQgPSAn57O757uf5Y+R55Sf5pyq55+l5byC5bi4JzsKCiAgICAgIGlmIChtc2cgJiYgdHlwZW9mIG1zZyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBtc2dUZXh0ID0gbXNnOwoKICAgICAgICBpZiAobXNnLmluZGV4T2YoJ1snKSA9PT0gMCAmJiBtc2cuaW5kZXhPZignXSAnKSA+IDApIHsKICAgICAgICAgIHZhciBlbmQgPSBtc2cuaW5kZXhPZignXSAnKTsKICAgICAgICAgIG1zZ1RleHQgPSBtc2cuc3Vic3RyKGVuZCArIDEpOwogICAgICAgICAgbXNnVGl0bGUgPSBtc2cuc3Vic3RyaW5nKDEsIGVuZCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGlwTXNnKSB7CiAgICAgICAgdGlwTXNnKG1zZ1RleHQsIG1zZ1RpdGxlKTsKICAgICAgfQogICAgfSwKICAgIC8vIOWunueOsOehruiupOahhuOAgiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPgogICAgY29uZmlybTogKG1zZywgdGl0bGUpID0+IHsKICAgICAgdmFyIGNvbmZpcm1UaXRsZSA9IHRpdGxlIHx8ICfmj5DnpLonOwogICAgICB2YXIgY29uZmlybVRleHQgPSBtc2cgfHwgJyc7CgogICAgICBpZiAoIXRpdGxlICYmIG1zZy5pbmRleE9mKCdbJykgPT09IDAgJiYgbXNnLmluZGV4T2YoJ10gJykgPiAwKSB7CiAgICAgICAgdmFyIGVuZCA9IG1zZy5pbmRleE9mKCddICcpOwogICAgICAgIGNvbmZpcm1UZXh0ID0gbXNnLnN1YnN0cihlbmQgKyAxKTsKICAgICAgICBjb25maXJtVGl0bGUgPSBtc2cuc3Vic3RyaW5nKDEsIGVuZCk7CiAgICAgIH0KCiAgICAgIGxvZy5sb2coJ2NvbmZpcm06ICcsIG1zZyk7CiAgICAgIHJldHVybiBfY29uZmlybShjb25maXJtVGV4dCwgY29uZmlybVRpdGxlKTsKICAgIH0KICB9OwogIHdpbmRvdy5PVklORV9BTUlTX0VOViA9IGJhc2VFbnY7CiAgdmFyIGxpYk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGJhc2VFbnYpLCB7CiAgICBzZXNzaW9uOiAnZ2xvYmFsJywKICAgIC8vIG51bWJlciDlm7rlupXpl7Tot50g6aG26YOo6Ze06LedCiAgICBhZmZpeE9mZnNldFRvcDogNTAsCiAgICAvLyBudW1iZXIg5Zu65bqV6Ze06Led77yM5b2T5L2g55qE5pyJ5YW2eOS7luWbuuW6leWFg+e0oOaXtu+8jOmcgOimgeiuvue9ruS4gOWumueahOWBj+enu+mHj++8jOWQpuWImeS8mumHjeWPoOOAggogICAgYWZmaXhPZmZzZXRCb3R0b206IDAsCiAgICAvLyDlr4zmlofmnKznvJbovpHlmaggdG9rZW7vvIwg5YaF572uIHJpY2gtdGV4dCDkuLogZnJvbGFFZGl0b3LvvIzmg7PopoHkvb/nlKjvvIzor7foh6rooYzotK3kubDvvIzmiJbogIXoh6rlt7Hlrp7njrAgcmljaC10ZXh0IOa4suafk+WZqOOAggogICAgcmljaFRleHRUb2tlbjogZmFsc2UsCiAgICAvLyDlrp7njrDpobXpnaLot7PovawKICAgIGp1bXBUbzogKHRvLCBhY3Rpb24sIGN0eCkgPT4gewogICAgICB2YXIgewogICAgICAgIGJsYW5rLAogICAgICAgIHJlcGxhY2UsCiAgICAgICAgb3JpZ2luCiAgICAgIH0gPSBhY3Rpb24gfHwge307CgogICAgICBpZiAodG8uaW5kZXhPZignJCcpID4gLTEgJiYgY3R4KSB7CiAgICAgICAgdG8gPSB0b2tlbml6ZSh0bywgY3R4KTsKICAgICAgfQoKICAgICAgbG9nLmxvZygnanVtcFRvJywgewogICAgICAgIHRvLAogICAgICAgIGFjdGlvbiwKICAgICAgICBjdHgKICAgICAgfSk7CgogICAgICBfanVtcFRvKHRvLCB7CiAgICAgICAgYmxhbmssCiAgICAgICAgcmVwbGFjZSwKICAgICAgICBvcmlnaW4KICAgICAgfSk7CiAgICB9LAogICAgLy8g5Zyw5Z2A5pu/5o2i77yM6LefIGp1bXBUbyDnsbvkvLzjgIIKICAgIHVwZGF0ZUxvY2F0aW9uOiBmdW5jdGlvbiB1cGRhdGVMb2NhdGlvbih0bykgewogICAgICB2YXIgcmVwbGFjZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgIHZhciB7CiAgICAgICAgaHJlZiwKICAgICAgICBwYXRobmFtZQogICAgICB9ID0gbm9ybWFsaXplTGluayh7CiAgICAgICAgdG8KICAgICAgfSk7CiAgICAgIHZhciBpc1JlcGxhY2UgPSBwYXRobmFtZSA9PT0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lOwogICAgICBsb2cubG9nKCd1cGRhdGVMb2NhdGlvbicsIHJlcGxhY2UgPyAncmVwbGFjZSAnIDogJ3B1c2gnLCBpc1JlcGxhY2UsIGhyZWYpOwoKICAgICAgaWYgKGlzUmVwbGFjZSkgewogICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgaHJlZik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBhcHAucm91dGVySGlzdG9yeS5wdXNoKGhyZWYpOwogICAgfSwKICAgIC8vIOWIpOaWreebruagh+WcsOWdgOaYr+WQpuS4uuW9k+WJjemhtemdouOAggogICAgaXNDdXJyZW50VXJsOiB0byA9PiB7CiAgICAgIHZhciB7CiAgICAgICAgaHJlZgogICAgICB9ID0gbm9ybWFsaXplTGluayh7CiAgICAgICAgdG8KICAgICAgfSk7CiAgICAgIHZhciBpc0N1cnJlbnQgPSBocmVmID09PSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sICcnKTsKICAgICAgbG9nLmxvZygnaXNDdXJyZW50VXJsJywgaXNDdXJyZW50LCBocmVmKTsKICAgICAgcmV0dXJuIGlzQ3VycmVudDsKICAgIH0sCiAgICAvLyBQcm9taXNlPEZ1bmN0aW9uPiAg5Y+v5Lul6YCa6L+H5a6D5oeS5Yqg6L296Ieq5a6a5LmJ57uE5Lu277yM5q+U5aaC77yaIGh0dHBzOi8vZ2l0aHViLmNvbS9iYWlkdS9hbWlzL2Jsb2IvbWFzdGVyL19fdGVzdHNfXy9mYWN0b3J5LnRlc3QudHN4I0w2NC1MOTHjgIIKICAgIC8vIOWkp+Wei+e7hOS7tuWPr+iDvemcgOimgeW8guatpeWKoOi9veOAguavlOWmgu+8muWvjOaWh+acrOe8lui+keWZqAogICAgbG9hZFJlbmRlcmVyOiAobG9hZGVyU2NoZW1hLCBwYXRoKSA9PiB7CiAgICAgIGxvZy5sb2coJ2xvYWRSZW5kZXJlcicsIGxvYWRlclNjaGVtYSwgcGF0aCk7CiAgICB9CiAgfSk7CiAgdmFyIHJlbmRlcmVyT3B0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxpYk9wdGlvbnMpLCBhcHAuYW1pcyksIGFtaXNPcHRpb24pOwogIHZhciByZW5kZXJlclByb3BzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwcm9wcyksIHsKICAgIHRoZW1lLAogICAgbG9jYWxlCiAgfSk7IC8vIGNvbnNvbGUubG9nKCdAPT09PicsIHByb3BzLCByZW5kZXJlck9wdGlvbikKCiAgcmV0dXJuIHJlbmRlcihzY2hlbWEsIHJlbmRlcmVyUHJvcHMsIHJlbmRlcmVyT3B0aW9uKTsKfTsKCmV4cG9ydCBkZWZhdWx0IF9kZWZhdWx0Owo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5kZWZhdWx0IDogdW5kZWZpbmVkOwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3Rlcihsb2csICJsb2ciLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxhbWlzXFxzY2hlbWFcXGFtaXMuanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihfZGVmYXVsdCwgImRlZmF1bHQiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxhbWlzXFxzY2hlbWFcXGFtaXMuanMiKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmxlYXZlTW9kdWxlIDogdW5kZWZpbmVkOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/amis/schema/amis.js"],"names":["confirm","render","toast","alert","tokenize","copy","get","app","jumpTo","normalizeLink","logger","libFetcher","log","getLogger","option","schema","props","amisOption","theme","locale","baseEnv","fetcher","isCancel","reson","info","contents","options","ret","shutup","msg","notify","msgType","test","tipMsg","msgTitle","msgText","indexOf","end","substr","substring","title","confirmTitle","confirmText","window","OVINE_AMIS_ENV","libOptions","Object","assign","session","affixOffsetTop","affixOffsetBottom","richTextToken","to","action","ctx","blank","replace","origin","updateLocation","href","pathname","isReplace","location","history","replaceState","routerHistory","push","isCurrentUrl","isCurrent","loadRenderer","loaderSchema","path","rendererOption","amis","rendererProps"],"mappings":";;;;;;;;;AAAA,SAASA,OAAO,IAAPA,QAAT,EAAkBC,MAAlB,EAA0BC,KAA1B,EAAiCC,KAAK,IAALA,MAAjC,QAA8C,MAA9C;AACA,SAASC,QAAT,QAAyB,4BAAzB;AACA,OAAOC,KAAP,MAAiB,mBAAjB;AACA,SAASC,GAAT,QAAoB,QAApB;AACA,SAASC,GAAT,QAAoB,cAApB;AACA,SAASC,MAAM,IAANA,OAAT,EAAiBC,aAAjB,QAAsC,yBAAtC;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,IAAMC,GAAG,GAAGF,MAAM,CAACG,SAAP,CAAiB,4BAAjB,CAAZ;;eACgBC,MAAD,IAAY;AACvB,MAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,KAAK,GAAG,EAAlB;AAAsBF,IAAAA,MAAM,EAAEG,UAAU,GAAG;AAA3C,MAAkDH,MAAxD;AACA,MAAM;AAAEI,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAoBF,UAA1B;AACA,MAAMG,OAAO,GAAG;AACZF,IAAAA,KADY;AAEZG,IAAAA,OAAO,EAAEV,UAFG;AAGZ;AACAW,IAAAA,QAAQ,EAAGC,KAAD,IAAW;AACjB,UAAMD,QAAQ,GAAGhB,GAAG,CAACiB,KAAD,EAAQ,YAAR,CAAH,KAA6B,YAA9C;;AACA,UAAID,QAAJ,EAAc;AACVV,QAAAA,GAAG,CAACY,IAAJ,CAAS,gBAAT;AACA,eAAO,IAAP;AACH;;AACD,aAAO,KAAP;AACH,KAXW;AAYZ;AACAnB,IAAAA,IAAI,EAAE,CAACoB,QAAD,EAAWC,OAAX,KAAuB;AACzB,UAAMC,GAAG,GAAGtB,KAAI,CAACoB,QAAD,EAAWC,OAAX,CAAhB;;AACA,UAAIC,GAAG,KAAK,CAACD,OAAD,IAAYA,OAAO,CAACE,MAAR,KAAmB,IAApC,CAAP,EAAkD;AAC9C1B,QAAAA,KAAK,CAACsB,IAAN,CAAW,SAAX;AACH;;AACD,aAAOG,GAAP;AACH,KAnBW;AAoBZ;AACAxB,IAAAA,KAAK,EAAG0B,GAAD,IAAS;AACZjB,MAAAA,GAAG,CAACA,GAAJ,CAAQ,OAAR,EAAiBiB,GAAjB;;AACA1B,MAAAA,MAAK,CAAC0B,GAAD,CAAL;AACH,KAxBW;AAyBZ;AACA;AACA;AACA;AACA;AACAC,IAAAA,MAAM,EAAE,kBAAiC;AAAA,UAAhCC,OAAgC,uEAAtB,OAAsB;AAAA,UAAbF,GAAa,uEAAP,EAAO;AACrCjB,MAAAA,GAAG,CAACA,GAAJ,CAAQ,QAAR,EAAkB;AAAEmB,QAAAA,OAAF;AAAWF,QAAAA;AAAX,OAAlB,EADqC,CAErC;;AACA,UAAI,SAASG,IAAT,CAAcH,GAAd,CAAJ,EAAwB;AACpB;AACH;;AACD,UAAMI,MAAM,GAAG/B,KAAK,CAAC6B,OAAD,CAApB;AACA,UAAIG,QAAQ,GAAGH,OAAO,KAAK,OAAZ,GAAsB,MAAtB,GAA+B,IAA9C;AACA,UAAII,OAAO,GAAG,UAAd;;AACA,UAAIN,GAAG,IAAI,OAAOA,GAAP,KAAe,QAA1B,EAAoC;AAChCM,QAAAA,OAAO,GAAGN,GAAV;;AACA,YAAIA,GAAG,CAACO,OAAJ,CAAY,GAAZ,MAAqB,CAArB,IAA0BP,GAAG,CAACO,OAAJ,CAAY,IAAZ,IAAoB,CAAlD,EAAqD;AACjD,cAAMC,GAAG,GAAGR,GAAG,CAACO,OAAJ,CAAY,IAAZ,CAAZ;AACAD,UAAAA,OAAO,GAAGN,GAAG,CAACS,MAAJ,CAAWD,GAAG,GAAG,CAAjB,CAAV;AACAH,UAAAA,QAAQ,GAAGL,GAAG,CAACU,SAAJ,CAAc,CAAd,EAAiBF,GAAjB,CAAX;AACH;AACJ;;AACD,UAAIJ,MAAJ,EAAY;AACRA,QAAAA,MAAM,CAACE,OAAD,EAAUD,QAAV,CAAN;AACH;AACJ,KAlDW;AAmDZ;AACAlC,IAAAA,OAAO,EAAE,CAAC6B,GAAD,EAAMW,KAAN,KAAgB;AACrB,UAAIC,YAAY,GAAGD,KAAK,IAAI,IAA5B;AACA,UAAIE,WAAW,GAAGb,GAAG,IAAI,EAAzB;;AACA,UAAI,CAACW,KAAD,IAAUX,GAAG,CAACO,OAAJ,CAAY,GAAZ,MAAqB,CAA/B,IAAoCP,GAAG,CAACO,OAAJ,CAAY,IAAZ,IAAoB,CAA5D,EAA+D;AAC3D,YAAMC,GAAG,GAAGR,GAAG,CAACO,OAAJ,CAAY,IAAZ,CAAZ;AACAM,QAAAA,WAAW,GAAGb,GAAG,CAACS,MAAJ,CAAWD,GAAG,GAAG,CAAjB,CAAd;AACAI,QAAAA,YAAY,GAAGZ,GAAG,CAACU,SAAJ,CAAc,CAAd,EAAiBF,GAAjB,CAAf;AACH;;AACDzB,MAAAA,GAAG,CAACA,GAAJ,CAAQ,WAAR,EAAqBiB,GAArB;AACA,aAAO7B,QAAO,CAAC0C,WAAD,EAAcD,YAAd,CAAd;AACH;AA9DW,GAAhB;AAgEAE,EAAAA,MAAM,CAACC,cAAP,GAAwBxB,OAAxB;AACA,MAAMyB,UAAU,GAAGC,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB3B,OAAlB,CAAd,EAA0C;AAAE4B,IAAAA,OAAO,EAAE,QAAX;AACzD;AACAC,IAAAA,cAAc,EAAE,EAFyC;AAGzD;AACAC,IAAAA,iBAAiB,EAAE,CAJsC;AAKzD;AACAC,IAAAA,aAAa,EAAE,KAN0C;AAOzD;AACA3C,IAAAA,MAAM,EAAE,CAAC4C,EAAD,EAAKC,MAAL,EAAaC,GAAb,KAAqB;AACzB,UAAM;AAAEC,QAAAA,KAAF;AAASC,QAAAA,OAAT;AAAkBC,QAAAA;AAAlB,UAA6BJ,MAAM,IAAI,EAA7C;;AACA,UAAID,EAAE,CAAChB,OAAH,CAAW,GAAX,IAAkB,CAAC,CAAnB,IAAwBkB,GAA5B,EAAiC;AAC7BF,QAAAA,EAAE,GAAGhD,QAAQ,CAACgD,EAAD,EAAKE,GAAL,CAAb;AACH;;AACD1C,MAAAA,GAAG,CAACA,GAAJ,CAAQ,QAAR,EAAkB;AAAEwC,QAAAA,EAAF;AAAMC,QAAAA,MAAN;AAAcC,QAAAA;AAAd,OAAlB;;AACA9C,MAAAA,OAAM,CAAC4C,EAAD,EAAK;AAAEG,QAAAA,KAAF;AAASC,QAAAA,OAAT;AAAkBC,QAAAA;AAAlB,OAAL,CAAN;AACH,KAfwD;AAgBzD;AACAC,IAAAA,cAAc,EAAE,wBAACN,EAAD,EAAyB;AAAA,UAApBI,OAAoB,uEAAV,KAAU;AACrC,UAAM;AAAEG,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAqBnD,aAAa,CAAC;AAAE2C,QAAAA;AAAF,OAAD,CAAxC;AACA,UAAMS,SAAS,GAAGD,QAAQ,KAAKjB,MAAM,CAACmB,QAAP,CAAgBF,QAA/C;AACAhD,MAAAA,GAAG,CAACA,GAAJ,CAAQ,gBAAR,EAA0B4C,OAAO,GAAG,UAAH,GAAgB,MAAjD,EAAyDK,SAAzD,EAAoEF,IAApE;;AACA,UAAIE,SAAJ,EAAe;AACXlB,QAAAA,MAAM,CAACoB,OAAP,CAAeC,YAAf,CAA4B,IAA5B,EAAkC,EAAlC,EAAsCL,IAAtC;AACA;AACH;;AACDpD,MAAAA,GAAG,CAAC0D,aAAJ,CAAkBC,IAAlB,CAAuBP,IAAvB;AACH,KA1BwD;AA2BzD;AACAQ,IAAAA,YAAY,EAAGf,EAAD,IAAQ;AAClB,UAAM;AAAEO,QAAAA;AAAF,UAAWlD,aAAa,CAAC;AAAE2C,QAAAA;AAAF,OAAD,CAA9B;AACA,UAAMgB,SAAS,GAAGT,IAAI,KAAKhB,MAAM,CAACmB,QAAP,CAAgBH,IAAhB,CAAqBH,OAArB,CAA6Bb,MAAM,CAACmB,QAAP,CAAgBL,MAA7C,EAAqD,EAArD,CAA3B;AACA7C,MAAAA,GAAG,CAACA,GAAJ,CAAQ,cAAR,EAAwBwD,SAAxB,EAAmCT,IAAnC;AACA,aAAOS,SAAP;AACH,KAjCwD;AAkCzD;AACA;AACAC,IAAAA,YAAY,EAAE,CAACC,YAAD,EAAeC,IAAf,KAAwB;AAClC3D,MAAAA,GAAG,CAACA,GAAJ,CAAQ,cAAR,EAAwB0D,YAAxB,EAAsCC,IAAtC;AACH;AAtCwD,GAA1C,CAAnB;AAuCA,MAAMC,cAAc,GAAG1B,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,UAAlB,CAAd,EAA6CtC,GAAG,CAACkE,IAAjD,CAAd,EAAsExD,UAAtE,CAAvB;AACA,MAAMyD,aAAa,GAAG5B,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB/B,KAAlB,CAAd,EAAwC;AAAEE,IAAAA,KAAF;AAC1DC,IAAAA;AAD0D,GAAxC,CAAtB,CA5GuB,CA8GvB;;AACA,SAAOlB,MAAM,CAACc,MAAD,EAAS2D,aAAT,EAAwBF,cAAxB,CAAb;AACH,C;;AAhHD;;;;;;;;;;0BADM5D,G","sourcesContent":["import { confirm, render, toast, alert } from 'amis';\nimport { tokenize } from 'amis/lib/utils/tpl-builtin';\nimport copy from 'copy-to-clipboard';\nimport { get } from 'lodash';\nimport { app } from \"../../../app\";\nimport { jumpTo, normalizeLink } from \"../../../routes/exports\";\nimport logger from \"../../../utils/logger\";\nimport { libFetcher } from \"./api\";\nconst log = logger.getLogger('lib:components:amis:schema');\nexport default (option) => {\n    const { schema, props = {}, option: amisOption = {} } = option;\n    const { theme, locale } = amisOption;\n    const baseEnv = {\n        theme,\n        fetcher: libFetcher,\n        // 是否取消 ajax请求\n        isCancel: (reson) => {\n            const isCancel = get(reson, 'error.name') === 'AbortError';\n            if (isCancel) {\n                log.info('isCancel 请求被终止');\n                return true;\n            }\n            return false;\n        },\n        // 实现，内容复制。// 实现，内容复制。\n        copy: (contents, options) => {\n            const ret = copy(contents, options);\n            if (ret && (!options || options.shutup !== true)) {\n                toast.info('已拷贝到剪切板');\n            }\n            return ret;\n        },\n        // 实现警告提示。\n        alert: (msg) => {\n            log.log('alert', msg);\n            alert(msg);\n        },\n        // HTMLElement 决定弹框容器。 ---- TODO: amis-editor 有兼容问题\n        // getModalContainer: () => {\n        //   return document.getElementById('modal-root')\n        // },\n        // 消息提示\n        notify: (msgType = 'error', msg = '') => {\n            log.log('notify', { msgType, msg });\n            // 默认跳过表单错误 提示\n            if (/表单验证失败/.test(msg)) {\n                return;\n            }\n            const tipMsg = toast[msgType];\n            let msgTitle = msgType === 'error' ? '系统错误' : '提示';\n            let msgText = '系统发生未知异常';\n            if (msg && typeof msg === 'string') {\n                msgText = msg;\n                if (msg.indexOf('[') === 0 && msg.indexOf('] ') > 0) {\n                    const end = msg.indexOf('] ');\n                    msgText = msg.substr(end + 1);\n                    msgTitle = msg.substring(1, end);\n                }\n            }\n            if (tipMsg) {\n                tipMsg(msgText, msgTitle);\n            }\n        },\n        // 实现确认框。 boolean | Promise<boolean>\n        confirm: (msg, title) => {\n            let confirmTitle = title || '提示';\n            let confirmText = msg || '';\n            if (!title && msg.indexOf('[') === 0 && msg.indexOf('] ') > 0) {\n                const end = msg.indexOf('] ');\n                confirmText = msg.substr(end + 1);\n                confirmTitle = msg.substring(1, end);\n            }\n            log.log('confirm: ', msg);\n            return confirm(confirmText, confirmTitle);\n        },\n    };\n    window.OVINE_AMIS_ENV = baseEnv;\n    const libOptions = Object.assign(Object.assign({}, baseEnv), { session: 'global', \n        // number 固底间距 顶部间距\n        affixOffsetTop: 50, \n        // number 固底间距，当你的有其x他固底元素时，需要设置一定的偏移量，否则会重叠。\n        affixOffsetBottom: 0, \n        // 富文本编辑器 token， 内置 rich-text 为 frolaEditor，想要使用，请自行购买，或者自己实现 rich-text 渲染器。\n        richTextToken: false, \n        // 实现页面跳转\n        jumpTo: (to, action, ctx) => {\n            const { blank, replace, origin } = action || {};\n            if (to.indexOf('$') > -1 && ctx) {\n                to = tokenize(to, ctx);\n            }\n            log.log('jumpTo', { to, action, ctx });\n            jumpTo(to, { blank, replace, origin });\n        }, \n        // 地址替换，跟 jumpTo 类似。\n        updateLocation: (to, replace = false) => {\n            const { href, pathname } = normalizeLink({ to });\n            const isReplace = pathname === window.location.pathname;\n            log.log('updateLocation', replace ? 'replace ' : 'push', isReplace, href);\n            if (isReplace) {\n                window.history.replaceState(null, '', href);\n                return;\n            }\n            app.routerHistory.push(href);\n        }, \n        // 判断目标地址是否为当前页面。\n        isCurrentUrl: (to) => {\n            const { href } = normalizeLink({ to });\n            const isCurrent = href === window.location.href.replace(window.location.origin, '');\n            log.log('isCurrentUrl', isCurrent, href);\n            return isCurrent;\n        }, \n        // Promise<Function>  可以通过它懒加载自定义组件，比如： https://github.com/baidu/amis/blob/master/__tests__/factory.test.tsx#L64-L91。\n        // 大型组件可能需要异步加载。比如：富文本编辑器\n        loadRenderer: (loaderSchema, path) => {\n            log.log('loadRenderer', loaderSchema, path);\n        } });\n    const rendererOption = Object.assign(Object.assign(Object.assign({}, libOptions), app.amis), amisOption);\n    const rendererProps = Object.assign(Object.assign({}, props), { theme,\n        locale });\n    // console.log('@===>', props, rendererOption)\n    return render(schema, rendererProps, rendererOption);\n};\n"]}]}