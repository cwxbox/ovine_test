{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\editor\\lib\\components\\editor\\index.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\editor\\lib\\components\\editor\\index.js","mtime":1618319235155},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGNscyBmcm9tICdjbGFzc25hbWVzJzsKaW1wb3J0IHsgcGljayB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IG9ic2VydmVyLCBpbmplY3QgfSBmcm9tICdtb2J4LXJlYWN0JzsKaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBhcHAgfSBmcm9tICIuLi8uLi8uLi8uLi9jb3JlL2xpYi9hcHAiOwppbXBvcnQgeyBFZGl0b3IgfSBmcm9tICIuLi8uLi9hc3NldHMvc2NyaXB0cy9lZGl0b3IudmlldyI7CmltcG9ydCB7IEdsb2JhbEVkaXRvclN0eWxlIH0gZnJvbSAiLi9zdHlsZWQiOwpleHBvcnQgZGVmYXVsdCBpbmplY3QoJ3N0b3JlJykob2JzZXJ2ZXIocHJvcHMgPT4gewogIHZhciB7CiAgICBpc1ByZXZpZXcsCiAgICBpc01vYmlsZSwKICAgIHNldEVkaXRvckluc3RhbmNlLAogICAgc2V0TGFzdFNhdmVkU2NoZW1hLAogICAgb3B0aW9uCiAgfSA9IHByb3BzLnN0b3JlOwogIHZhciB7CiAgICBlZGl0b3JTdG9yZQogIH0gPSBwcm9wczsKICB2YXIgJGVkaXRvciA9IHVzZVJlZihudWxsKTsKICB2YXIgZWRpdG9yUHJvcHMgPSBwaWNrKG9wdGlvbiwgWydhdXRvRm9jdXMnLCAnc2NoZW1hRmlsdGVyJywgJ2NsYXNzTmFtZScsICdhbWlzRW52JywgJ2N0eCcsICdwbHVnaW5zJywgJ2lmcmFtZVVybCcsICdpc0hpZGRlblByb3BzJ10pOwogIHZhciB7CiAgICBjbGFzc05hbWUKICB9ID0gZWRpdG9yUHJvcHM7CiAgdmFyIGVkaXRvckRhdGEgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbi5kYXRhKSwgYXBwLmFtaXMuY29uc3RhbnRzKTsKICB1c2VFZmZlY3QoKCkgPT4gewogICAgc2V0RWRpdG9ySW5zdGFuY2UoJGVkaXRvci5jdXJyZW50KTsgLy8g5Li76KaB55So5Y6G5Y+y6K6w5b2V5pu05pawCgogICAgc2V0TGFzdFNhdmVkU2NoZW1hKGVkaXRvclN0b3JlLnNjaGVtYSk7IC8vIOesrOS4gOasoeWtmOWCqOWIneWni+WMluaVsOaNrgoKICAgIHJldHVybiAoKSA9PiB7CiAgICAgIHNldEVkaXRvckluc3RhbmNlKCk7CiAgICB9OwogIH0sIFtdKTsKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgIGNsYXNzTmFtZTogY2xzKGNsYXNzTmFtZSwgewogICAgICAnZC1ub25lJzogaXNQcmV2aWV3CiAgICB9KQogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEdsb2JhbEVkaXRvclN0eWxlLCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRWRpdG9yLCBPYmplY3QuYXNzaWduKHt9LCBlZGl0b3JQcm9wcywgewogICAgY2xhc3NOYW1lOiAiaXMtZml4ZWQiLAogICAgcmVmOiAkZWRpdG9yLAogICAgZGF0YTogZWRpdG9yRGF0YSwKICAgIHByZXZpZXc6IGZhbHNlLAogICAgaXNNb2JpbGU6IGlzTW9iaWxlLAogICAgdGhlbWU6IGFwcC50aGVtZS5nZXROYW1lKCksCiAgICB2YWx1ZTogZWRpdG9yU3RvcmUuc2NoZW1hLAogICAgb25DaGFuZ2U6IHZhbHVlID0+IGVkaXRvclN0b3JlLnVwZGF0ZVNjaGVtYSh2YWx1ZSkKICB9KSkpOwp9KSk7"},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/editor/lib/components/editor/index.js"],"names":["cls","pick","observer","inject","React","useEffect","useRef","app","Editor","GlobalEditorStyle","props","isPreview","isMobile","setEditorInstance","setLastSavedSchema","option","store","editorStore","$editor","editorProps","className","editorData","Object","assign","data","amis","constants","current","schema","createElement","ref","preview","theme","getName","value","onChange","updateSchema"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,YAAhB;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,YAAjC;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,QAAyC,OAAzC;AACA,SAASC,GAAT,QAAoB,0BAApB;AACA,SAASC,MAAT,QAAuB,kCAAvB;AACA,SAASC,iBAAT,QAAkC,UAAlC;AACA,eAAeN,MAAM,CAAC,OAAD,CAAN,CAAgBD,QAAQ,CAAEQ,KAAD,IAAW;AAC/C,MAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,QAAb;AAAuBC,IAAAA,iBAAvB;AAA0CC,IAAAA,kBAA1C;AAA8DC,IAAAA;AAA9D,MAAyEL,KAAK,CAACM,KAArF;AACA,MAAM;AAAEC,IAAAA;AAAF,MAAkBP,KAAxB;AACA,MAAMQ,OAAO,GAAGZ,MAAM,CAAC,IAAD,CAAtB;AACA,MAAMa,WAAW,GAAGlB,IAAI,CAACc,MAAD,EAAS,CAC7B,WAD6B,EAE7B,cAF6B,EAG7B,WAH6B,EAI7B,SAJ6B,EAK7B,KAL6B,EAM7B,SAN6B,EAO7B,WAP6B,EAQ7B,eAR6B,CAAT,CAAxB;AAUA,MAAM;AAAEK,IAAAA;AAAF,MAAgBD,WAAtB;AACA,MAAME,UAAU,GAAGC,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBR,MAAM,CAACS,IAAzB,CAAd,EAA8CjB,GAAG,CAACkB,IAAJ,CAASC,SAAvD,CAAnB;AACArB,EAAAA,SAAS,CAAC,MAAM;AACZQ,IAAAA,iBAAiB,CAACK,OAAO,CAACS,OAAT,CAAjB,CADY,CACwB;;AACpCb,IAAAA,kBAAkB,CAACG,WAAW,CAACW,MAAb,CAAlB,CAFY,CAE4B;;AACxC,WAAO,MAAM;AACTf,MAAAA,iBAAiB;AACpB,KAFD;AAGH,GANQ,EAMN,EANM,CAAT;AAOA,sBAAQT,KAAK,CAACyB,aAAN,CAAoB,KAApB,EAA2B;AAAET,IAAAA,SAAS,EAAEpB,GAAG,CAACoB,SAAD,EAAY;AAAE,gBAAUT;AAAZ,KAAZ;AAAhB,GAA3B,eACJP,KAAK,CAACyB,aAAN,CAAoBpB,iBAApB,EAAuC,IAAvC,CADI,eAEJL,KAAK,CAACyB,aAAN,CAAoBrB,MAApB,EAA4Bc,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,WAAlB,EAA+B;AAAEC,IAAAA,SAAS,EAAE,UAAb;AAAyBU,IAAAA,GAAG,EAAEZ,OAA9B;AAAuCM,IAAAA,IAAI,EAAEH,UAA7C;AAAyDU,IAAAA,OAAO,EAAE,KAAlE;AAAyEnB,IAAAA,QAAQ,EAAEA,QAAnF;AAA6FoB,IAAAA,KAAK,EAAEzB,GAAG,CAACyB,KAAJ,CAAUC,OAAV,EAApG;AAAyHC,IAAAA,KAAK,EAAEjB,WAAW,CAACW,MAA5I;AAAoJO,IAAAA,QAAQ,EAAGD,KAAD,IAAWjB,WAAW,CAACmB,YAAZ,CAAyBF,KAAzB;AAAzK,GAA/B,CAA5B,CAFI,CAAR;AAGH,CA1BsC,CAAxB,CAAf","sourcesContent":["import cls from 'classnames';\nimport { pick } from 'lodash';\nimport { observer, inject } from 'mobx-react';\nimport React, { useEffect, useRef } from 'react';\nimport { app } from \"../../../../core/lib/app\";\nimport { Editor } from \"../../assets/scripts/editor.view\";\nimport { GlobalEditorStyle } from \"./styled\";\nexport default inject('store')(observer((props) => {\n    const { isPreview, isMobile, setEditorInstance, setLastSavedSchema, option } = props.store;\n    const { editorStore } = props;\n    const $editor = useRef(null);\n    const editorProps = pick(option, [\n        'autoFocus',\n        'schemaFilter',\n        'className',\n        'amisEnv',\n        'ctx',\n        'plugins',\n        'iframeUrl',\n        'isHiddenProps',\n    ]);\n    const { className } = editorProps;\n    const editorData = Object.assign(Object.assign({}, option.data), app.amis.constants);\n    useEffect(() => {\n        setEditorInstance($editor.current); // 主要用历史记录更新\n        setLastSavedSchema(editorStore.schema); // 第一次存储初始化数据\n        return () => {\n            setEditorInstance();\n        };\n    }, []);\n    return (React.createElement(\"div\", { className: cls(className, { 'd-none': isPreview }) },\n        React.createElement(GlobalEditorStyle, null),\n        React.createElement(Editor, Object.assign({}, editorProps, { className: \"is-fixed\", ref: $editor, data: editorData, preview: false, isMobile: isMobile, theme: app.theme.getName(), value: editorStore.schema, onChange: (value) => editorStore.updateSchema(value) }))));\n}));\n"]}]}