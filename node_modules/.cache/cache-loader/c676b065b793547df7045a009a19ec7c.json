{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\route_tabs\\chrome_tabs.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\route_tabs\\chrome_tabs.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IERyYWdnYWJpbGx5IGZyb20gIi4uLy4uL2Fzc2V0cy9zY3JpcHRzL2RyYWdnYWJpbGx5IjsKaW1wb3J0IHsgbWVzc2FnZSB9IGZyb20gIi4uLy4uL2NvbnN0YW50cyI7CmltcG9ydCB7IHB1Ymxpc2ggfSBmcm9tICIuLi8uLi91dGlscy9tZXNzYWdlIjsKdmFyIFRBQl9DT05URU5UX01BUkdJTiA9IDk7CnZhciBUQUJfQ09OVEVOVF9PVkVSTEFQX0RJU1RBTkNFID0gMTsgLy8gY29uc3QgVEFCX09WRVJMQVBfRElTVEFOQ0UgPSBUQUJfQ09OVEVOVF9NQVJHSU4gKiAyICsgVEFCX0NPTlRFTlRfT1ZFUkxBUF9ESVNUQU5DRQoKdmFyIFRBQl9DT05URU5UX01JTl9XSURUSCA9IDI0Owp2YXIgVEFCX0NPTlRFTlRfTUFYX1dJRFRIID0gMjQwOwp2YXIgVEFCX1NJWkVfU01BTEwgPSA4NDsKdmFyIFRBQl9TSVpFX1NNQUxMRVIgPSA2MDsKdmFyIFRBQl9TSVpFX01JTkkgPSA0ODsKCnZhciBub29wID0gXyA9PiB7fTsKCnZhciBjbG9zZXN0ID0gKHZhbHVlLCBhcnJheSkgPT4gewogIHZhciB0ZW1wID0gSW5maW5pdHk7CiAgdmFyIGNsb3Nlc3RJbmRleCA9IC0xOwogIGFycmF5LmZvckVhY2goKHYsIGkpID0+IHsKICAgIGlmIChNYXRoLmFicyh2YWx1ZSAtIHYpIDwgdGVtcCkgewogICAgICB0ZW1wID0gTWF0aC5hYnModmFsdWUgLSB2KTsKICAgICAgY2xvc2VzdEluZGV4ID0gaTsKICAgIH0KICB9KTsKICByZXR1cm4gY2xvc2VzdEluZGV4Owp9OwoKdmFyIHRhYlRlbXBsYXRlID0gIlxuICA8ZGl2IGNsYXNzPVwiY2hyb21lLXRhYlwiPlxuICAgIDxkaXYgY2xhc3M9XCJjaHJvbWUtdGFiLWRpdmlkZXJzXCI+PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNocm9tZS10YWItYmFja2dyb3VuZFwiPlxuICAgICAgPHN2ZyB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxkZWZzPjxzeW1ib2wgaWQ9XCJjaHJvbWUtdGFiLWdlb21ldHJ5LWxlZnRcIiB2aWV3Qm94PVwiMCAwIDIxNCAzNlwiPjxwYXRoIGQ9XCJNMTcgMGgxOTd2MzZIMHYtMmM0LjUgMCA5LTMuNSA5LThWOGMwLTQuNSAzLjUtOCA4LTh6XCIvPjwvc3ltYm9sPjxzeW1ib2wgaWQ9XCJjaHJvbWUtdGFiLWdlb21ldHJ5LXJpZ2h0XCIgdmlld0JveD1cIjAgMCAyMTQgMzZcIj48dXNlIHhsaW5rOmhyZWY9XCIjY2hyb21lLXRhYi1nZW9tZXRyeS1sZWZ0XCIvPjwvc3ltYm9sPjxjbGlwUGF0aCBpZD1cImNyb3BcIj48cmVjdCBjbGFzcz1cIm1hc2tcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgeD1cIjBcIi8+PC9jbGlwUGF0aD48L2RlZnM+PHN2ZyB3aWR0aD1cIjUyJVwiIGhlaWdodD1cIjEwMCVcIj48dXNlIHhsaW5rOmhyZWY9XCIjY2hyb21lLXRhYi1nZW9tZXRyeS1sZWZ0XCIgd2lkdGg9XCIyMTRcIiBoZWlnaHQ9XCIzNlwiIGNsYXNzPVwiY2hyb21lLXRhYi1nZW9tZXRyeVwiLz48L3N2Zz48ZyB0cmFuc2Zvcm09XCJzY2FsZSgtMSwgMSlcIj48c3ZnIHdpZHRoPVwiNTIlXCIgaGVpZ2h0PVwiMTAwJVwiIHg9XCItMTAwJVwiIHk9XCIwXCI+PHVzZSB4bGluazpocmVmPVwiI2Nocm9tZS10YWItZ2VvbWV0cnktcmlnaHRcIiB3aWR0aD1cIjIxNFwiIGhlaWdodD1cIjM2XCIgY2xhc3M9XCJjaHJvbWUtdGFiLWdlb21ldHJ5XCIvPjwvc3ZnPjwvZz48L3N2Zz5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2hyb21lLXRhYi1jb250ZW50XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hyb21lLXRhYi1mYXZpY29uXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hyb21lLXRhYi10aXRsZVwiPjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNocm9tZS10YWItZHJhZy1oYW5kbGVcIj48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjaHJvbWUtdGFiLWNsb3NlXCI+XG4gICAgICA8c3ZnXG4gICAgICAgIHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCJcbiAgICAgICAgdmVyc2lvbj1cIjEuMVwiXG4gICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICBwLWlkPVwiMjM1MlwiXG4gICAgICAgIHhtbG5zWGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbiAgICAgICAgd2lkdGg9XCIyMDBcIlxuICAgICAgICBoZWlnaHQ9XCIyMDBcIlxuICAgICAgPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgIGQ9XCJNNTE4LjU4MTU4NzcgNDY5LjQyODc5MTU2TDI0MC4wMjU3NjYwOSAxOTAuODczNjQ4ODlhMzQuNzYxNDI4ODIgMzQuNzYxNDI4ODIgMCAxIDAtNDkuMTc1MjAwOTcgNDkuMTI5NzEyMzhsMjc4LjU1NDQ2Mzc0IDI3OC41NzgyMjY0M0wxOTAuODUwNTY1MDggNzk3LjE1OTEzNTIyYTM0Ljc2MTQyODgyIDM0Ljc2MTQyODgyIDAgMSAwIDQ5LjE1Mjc5NjE5IDQ5LjE1MjExNzI1bDI3OC41NzgyMjY1MS0yNzguNTU0NDYzNzggMjc4LjU3ODIyNjM0IDI3OC41NTQ0NjM3OGEzNC43NjE0Mjg4MiAzNC43NjE0Mjg4MiAwIDEgMCA0OS4xNTIxMTcyOC00OS4xMjkwMzM0NWwtMjc4LjU1NDQ2Mzc0LTI3OC42MDA2MzEyNCAyNzguNTU0NDYzNzQtMjc4LjU1NTE0MjcxYTM0Ljc2MTQyODgyIDM0Ljc2MTQyODgyIDAgMSAwLTQ5LjE1MjExNzI4LTQ5LjE1Mjc5NjIyTDUxOC42MDQ2NzE0NSA0NjkuNDI4NzkxNTZ6XCJcbiAgICAgICAgICBwLWlkPVwiMjM1M1wiXG4gICAgICAgIC8+XG4gICAgICA8L3N2Zz5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiI7CnZhciBkZWZhdWx0VGFwUHJvcGVydGllcyA9IHsKICB0aXRsZTogJ05ldyB0YWInLAogIGZhdmljb246IGZhbHNlCn07CnZhciBpbnN0YW5jZUlkID0gMDsKCmNsYXNzIENocm9tZVRhYnMgewogIGNvbnN0cnVjdG9yKCkgewogICAgdGhpcy5kcmFnZ2FiaWxsaWVzID0gW107CiAgfQoKICBpbml0KGVsKSB7CiAgICB0aGlzLmVsID0gZWw7CiAgICB0aGlzLmluc3RhbmNlSWQgPSBpbnN0YW5jZUlkOwogICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2hyb21lLXRhYnMtaW5zdGFuY2UtaWQnLCB0aGlzLmluc3RhbmNlSWQpOwogICAgaW5zdGFuY2VJZCArPSAxOwogICAgdGhpcy5zZXR1cFN0eWxlRWwoKTsKICAgIHRoaXMuc2V0dXBFdmVudHMoKTsKICAgIHRoaXMubGF5b3V0VGFicygpOwogICAgdGhpcy5zZXR1cERyYWdnYWJpbGx5KCk7CiAgfQoKICBlbWl0KGV2ZW50TmFtZSwgZGF0YSkgewogICAgdGhpcy5lbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHsKICAgICAgZGV0YWlsOiBkYXRhCiAgICB9KSk7CiAgfQoKICBzZXR1cFN0eWxlRWwoKSB7CiAgICB0aGlzLnN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlRWwpOwogIH0KCiAgc2V0dXBFdmVudHMoKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgXyA9PiB7CiAgICAgIHRoaXMuY2xlYW5VcFByZXZpb3VzbHlEcmFnZ2VkVGFicygpOwogICAgICB0aGlzLmxheW91dFRhYnMoKTsKICAgIH0pOwogICAgdGhpcy50YWJFbHMuZm9yRWFjaCh0YWJFbCA9PiB0aGlzLnNldFRhYkNsb3NlRXZlbnRMaXN0ZW5lcih0YWJFbCkpOwogIH0KCiAgZ2V0IHRhYkVscygpIHsKICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaHJvbWUtdGFiJykpOwogIH0KCiAgZ2V0IHRhYkNvbnRlbnRFbCgpIHsKICAgIHJldHVybiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5jaHJvbWUtdGFicy1jb250ZW50Jyk7CiAgfQoKICBnZXQgdGFiQ29udGVudFdpZHRocygpIHsKICAgIHZhciBudW1iZXJPZlRhYnMgPSB0aGlzLnRhYkVscy5sZW5ndGg7CiAgICB2YXIgdGFic0NvbnRlbnRXaWR0aCA9IHRoaXMudGFiQ29udGVudEVsLmNsaWVudFdpZHRoOwogICAgdmFyIHRhYnNDdW11bGF0aXZlT3ZlcmxhcHBlZFdpZHRoID0gKG51bWJlck9mVGFicyAtIDEpICogVEFCX0NPTlRFTlRfT1ZFUkxBUF9ESVNUQU5DRTsKICAgIHZhciB0YXJnZXRXaWR0aCA9ICh0YWJzQ29udGVudFdpZHRoIC0gMiAqIFRBQl9DT05URU5UX01BUkdJTiArIHRhYnNDdW11bGF0aXZlT3ZlcmxhcHBlZFdpZHRoKSAvIG51bWJlck9mVGFiczsKICAgIHZhciBjbGFtcGVkVGFyZ2V0V2lkdGggPSBNYXRoLm1heChUQUJfQ09OVEVOVF9NSU5fV0lEVEgsIE1hdGgubWluKFRBQl9DT05URU5UX01BWF9XSURUSCwgdGFyZ2V0V2lkdGgpKTsKICAgIHZhciBmbG9vcmVkQ2xhbXBlZFRhcmdldFdpZHRoID0gTWF0aC5mbG9vcihjbGFtcGVkVGFyZ2V0V2lkdGgpOwogICAgdmFyIHRvdGFsVGFic1dpZHRoVXNpbmdUYXJnZXQgPSBmbG9vcmVkQ2xhbXBlZFRhcmdldFdpZHRoICogbnVtYmVyT2ZUYWJzICsgMiAqIFRBQl9DT05URU5UX01BUkdJTiAtIHRhYnNDdW11bGF0aXZlT3ZlcmxhcHBlZFdpZHRoOwogICAgdmFyIHRvdGFsRXh0cmFXaWR0aER1ZVRvRmxvb3JpbmcgPSB0YWJzQ29udGVudFdpZHRoIC0gdG90YWxUYWJzV2lkdGhVc2luZ1RhcmdldDsgLy8gVE9ETyAtIFN1cHBvcnQgdGFicyB3aXRoIGRpZmZlcmVudCB3aWR0aHMgLyBlLmcuICJwaW5uZWQiIHRhYnMKCiAgICB2YXIgd2lkdGhzID0gW107CiAgICB2YXIgZXh0cmFXaWR0aFJlbWFpbmluZyA9IHRvdGFsRXh0cmFXaWR0aER1ZVRvRmxvb3Jpbmc7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJPZlRhYnM7IGkgKz0gMSkgewogICAgICB2YXIgZXh0cmFXaWR0aCA9IGZsb29yZWRDbGFtcGVkVGFyZ2V0V2lkdGggPCBUQUJfQ09OVEVOVF9NQVhfV0lEVEggJiYgZXh0cmFXaWR0aFJlbWFpbmluZyA+IDAgPyAxIDogMDsKICAgICAgd2lkdGhzLnB1c2goZmxvb3JlZENsYW1wZWRUYXJnZXRXaWR0aCArIGV4dHJhV2lkdGgpOwoKICAgICAgaWYgKGV4dHJhV2lkdGhSZW1haW5pbmcgPiAwKSB7CiAgICAgICAgZXh0cmFXaWR0aFJlbWFpbmluZyAtPSAxOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHdpZHRoczsKICB9CgogIGdldCB0YWJDb250ZW50UG9zaXRpb25zKCkgewogICAgdmFyIHBvc2l0aW9ucyA9IFtdOwogICAgdmFyIHsKICAgICAgdGFiQ29udGVudFdpZHRocwogICAgfSA9IHRoaXM7CiAgICB2YXIgcG9zaXRpb24gPSBUQUJfQ09OVEVOVF9NQVJHSU47CiAgICB0YWJDb250ZW50V2lkdGhzLmZvckVhY2goKHdpZHRoLCBpKSA9PiB7CiAgICAgIHZhciBvZmZzZXQgPSBpICogVEFCX0NPTlRFTlRfT1ZFUkxBUF9ESVNUQU5DRTsKICAgICAgcG9zaXRpb25zLnB1c2gocG9zaXRpb24gLSBvZmZzZXQpOwogICAgICBwb3NpdGlvbiArPSB3aWR0aDsKICAgIH0pOwogICAgcmV0dXJuIHBvc2l0aW9uczsKICB9CgogIGdldCB0YWJQb3NpdGlvbnMoKSB7CiAgICB2YXIgcG9zaXRpb25zID0gW107CiAgICB0aGlzLnRhYkNvbnRlbnRQb3NpdGlvbnMuZm9yRWFjaChjb250ZW50UG9zaXRpb24gPT4gewogICAgICBwb3NpdGlvbnMucHVzaChjb250ZW50UG9zaXRpb24gLSBUQUJfQ09OVEVOVF9NQVJHSU4pOwogICAgfSk7CiAgICByZXR1cm4gcG9zaXRpb25zOwogIH0KCiAgbGF5b3V0VGFicygpIHsKICAgIHZhciB7CiAgICAgIHRhYkNvbnRlbnRXaWR0aHMKICAgIH0gPSB0aGlzOwogICAgdGhpcy50YWJFbHMuZm9yRWFjaCgodGFiRWwsIGkpID0+IHsKICAgICAgdmFyIGNvbnRlbnRXaWR0aCA9IHRhYkNvbnRlbnRXaWR0aHNbaV07CiAgICAgIHZhciB3aWR0aCA9IGNvbnRlbnRXaWR0aCArIDIgKiBUQUJfQ09OVEVOVF9NQVJHSU47CiAgICAgIHRhYkVsLnN0eWxlLndpZHRoID0gIiIuY29uY2F0KHdpZHRoLCAicHgiKTsKICAgICAgdGFiRWwucmVtb3ZlQXR0cmlidXRlKCdpcy1zbWFsbCcpOwogICAgICB0YWJFbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzLXNtYWxsZXInKTsKICAgICAgdGFiRWwucmVtb3ZlQXR0cmlidXRlKCdpcy1taW5pJyk7CgogICAgICBpZiAoY29udGVudFdpZHRoIDwgVEFCX1NJWkVfU01BTEwpIHsKICAgICAgICB0YWJFbC5zZXRBdHRyaWJ1dGUoJ2lzLXNtYWxsJywgJycpOwogICAgICB9CgogICAgICBpZiAoY29udGVudFdpZHRoIDwgVEFCX1NJWkVfU01BTExFUikgewogICAgICAgIHRhYkVsLnNldEF0dHJpYnV0ZSgnaXMtc21hbGxlcicsICcnKTsKICAgICAgfQoKICAgICAgaWYgKGNvbnRlbnRXaWR0aCA8IFRBQl9TSVpFX01JTkkpIHsKICAgICAgICB0YWJFbC5zZXRBdHRyaWJ1dGUoJ2lzLW1pbmknLCAnJyk7CiAgICAgIH0KICAgIH0pOwogICAgdmFyIHN0eWxlSFRNTCA9ICcnOwogICAgdGhpcy50YWJQb3NpdGlvbnMuZm9yRWFjaCgocG9zaXRpb24sIGkpID0+IHsKICAgICAgc3R5bGVIVE1MICs9ICJcbiAgICAgICAgLmNocm9tZS10YWJzW2RhdGEtY2hyb21lLXRhYnMtaW5zdGFuY2UtaWQ9XCIiLmNvbmNhdCh0aGlzLmluc3RhbmNlSWQsICJcIl0gLmNocm9tZS10YWI6bnRoLWNoaWxkKCIpLmNvbmNhdChpICsgMSwgIikge1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoIikuY29uY2F0KHBvc2l0aW9uLCAicHgsIDAsIDApXG4gICAgICAgIH1cbiAgICAgICIpOwogICAgfSk7CiAgICB0aGlzLnN0eWxlRWwuaW5uZXJIVE1MID0gc3R5bGVIVE1MOwogIH0KCiAgY3JlYXRlTmV3VGFiRWwoKSB7CiAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBkaXYuaW5uZXJIVE1MID0gdGFiVGVtcGxhdGU7CiAgICByZXR1cm4gZGl2LmZpcnN0RWxlbWVudENoaWxkOwogIH0KCiAgYWRkVGFiKHRhYlByb3BlcnRpZXMpIHsKICAgIHZhciB7CiAgICAgIGFuaW1hdGUgPSBmYWxzZSwKICAgICAgYmFja2dyb3VuZCA9IGZhbHNlCiAgICB9ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgIHZhciB0YWJFbCA9IHRoaXMuY3JlYXRlTmV3VGFiRWwoKTsKCiAgICBpZiAoYW5pbWF0ZSkgewogICAgICB0YWJFbC5jbGFzc0xpc3QuYWRkKCdjaHJvbWUtdGFiLXdhcy1qdXN0LWFkZGVkJyk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGFiRWwuY2xhc3NMaXN0LnJlbW92ZSgnY2hyb21lLXRhYi13YXMtanVzdC1hZGRlZCcpLCA1MDApOwogICAgfQoKICAgIHRhYlByb3BlcnRpZXMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oewogICAgICBpc0FkZDogdHJ1ZQogICAgfSwgZGVmYXVsdFRhcFByb3BlcnRpZXMpLCB0YWJQcm9wZXJ0aWVzKTsKICAgIHRoaXMudGFiQ29udGVudEVsLmFwcGVuZENoaWxkKHRhYkVsKTsKICAgIHRoaXMuc2V0VGFiQ2xvc2VFdmVudExpc3RlbmVyKHRhYkVsKTsKICAgIHRoaXMudXBkYXRlVGFiKHRhYkVsLCB0YWJQcm9wZXJ0aWVzKTsKICAgIHRoaXMuZW1pdCgndGFiQWRkJywgewogICAgICB0YWJFbCwKICAgICAgdGFiUHJvcGVydGllcwogICAgfSk7CgogICAgaWYgKCFiYWNrZ3JvdW5kKSB7CiAgICAgIHRoaXMuc2V0Q3VycmVudFRhYih0YWJFbCwgdGFiUHJvcGVydGllcyk7CiAgICB9CgogICAgdGhpcy5jbGVhblVwUHJldmlvdXNseURyYWdnZWRUYWJzKCk7CiAgICB0aGlzLmxheW91dFRhYnMoKTsKICAgIHRoaXMuc2V0dXBEcmFnZ2FiaWxseSgpOwogIH0KCiAgc2V0VGFiQ2xvc2VFdmVudExpc3RlbmVyKHRhYkVsKSB7CiAgICB0YWJFbC5xdWVyeVNlbGVjdG9yKCcuY2hyb21lLXRhYi1jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgXyA9PiB7CiAgICAgIHRoaXMuZW1pdCgnb25UYWJSZW1vdmUnLCB7CiAgICAgICAgdGFiRWwKICAgICAgfSk7CiAgICB9KTsKICB9CgogIGdldCBhY3RpdmVUYWJFbCgpIHsKICAgIHJldHVybiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5jaHJvbWUtdGFiW2FjdGl2ZV0nKTsKICB9CgogIGhhc0FjdGl2ZVRhYigpIHsKICAgIHJldHVybiAhIXRoaXMuYWN0aXZlVGFiRWw7CiAgfQoKICBzZXRDdXJyZW50VGFiKHRhYkVsKSB7CiAgICB2YXIgdGFiUHJvcGVydGllcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICB2YXIgewogICAgICBhY3RpdmVUYWJFbAogICAgfSA9IHRoaXM7CgogICAgaWYgKGFjdGl2ZVRhYkVsID09PSB0YWJFbCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGFjdGl2ZVRhYkVsKSB7CiAgICAgIGFjdGl2ZVRhYkVsLnJlbW92ZUF0dHJpYnV0ZSgnYWN0aXZlJyk7CiAgICB9CgogICAgdGFiRWwuc2V0QXR0cmlidXRlKCdhY3RpdmUnLCAnJyk7CiAgICB0aGlzLmVtaXQoJ2FjdGl2ZVRhYkNoYW5nZScsIHsKICAgICAgdGFiRWwsCiAgICAgIHRhYlByb3BlcnRpZXM6IE9iamVjdC5hc3NpZ24oewogICAgICAgIGNoYW5nZVJvdXRlOiB0cnVlCiAgICAgIH0sIHRhYlByb3BlcnRpZXMpCiAgICB9KTsKICB9CgogIHJlbW92ZVRhYih0YWJFbCkgewogICAgdmFyIHRhYlByb3BlcnRpZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgdmFyIHsKICAgICAgYXV0b0FjdGl2ZSA9IHRydWUKICAgIH0gPSB0YWJQcm9wZXJ0aWVzOwoKICAgIGlmIChhdXRvQWN0aXZlICYmIHRhYkVsID09PSB0aGlzLmFjdGl2ZVRhYkVsKSB7CiAgICAgIGlmICh0YWJFbC5uZXh0RWxlbWVudFNpYmxpbmcpIHsKICAgICAgICB0aGlzLnNldEN1cnJlbnRUYWIodGFiRWwubmV4dEVsZW1lbnRTaWJsaW5nLCB0YWJQcm9wZXJ0aWVzKTsKICAgICAgfSBlbHNlIGlmICh0YWJFbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7CiAgICAgICAgdGhpcy5zZXRDdXJyZW50VGFiKHRhYkVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmcsIHRhYlByb3BlcnRpZXMpOwogICAgICB9CiAgICB9CgogICAgdGFiRWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YWJFbCk7CiAgICB0aGlzLmVtaXQoJ3RhYlJlbW92ZScsIHsKICAgICAgdGFiRWwKICAgIH0pOwogICAgdGhpcy5jbGVhblVwUHJldmlvdXNseURyYWdnZWRUYWJzKCk7CiAgICB0aGlzLmxheW91dFRhYnMoKTsKICAgIHRoaXMuc2V0dXBEcmFnZ2FiaWxseSgpOwogIH0KCiAgdXBkYXRlVGFiKHRhYkVsLCB0YWJQcm9wZXJ0aWVzKSB7CiAgICB0YWJFbC5xdWVyeVNlbGVjdG9yKCcuY2hyb21lLXRhYi10aXRsZScpLnRleHRDb250ZW50ID0gdGFiUHJvcGVydGllcy5sYWJlbDsKICAgIHZhciBmYXZpY29uRWwgPSB0YWJFbC5xdWVyeVNlbGVjdG9yKCcuY2hyb21lLXRhYi1mYXZpY29uJyk7CgogICAgaWYgKHRhYlByb3BlcnRpZXMuZmF2aWNvbikgewogICAgICBmYXZpY29uRWwuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gInVybCgnIi5jb25jYXQodGFiUHJvcGVydGllcy5mYXZpY29uLCAiJykiKTsKICAgICAgZmF2aWNvbkVsLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJywgJycpOwogICAgfSBlbHNlIHsKICAgICAgZmF2aWNvbkVsLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpOwogICAgICBmYXZpY29uRWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpOwogICAgfQoKICAgIGlmICh0YWJQcm9wZXJ0aWVzLmlkKSB7CiAgICAgIHRhYkVsLnNldEF0dHJpYnV0ZSgnZGF0YS10YWItaWQnLCB0YWJQcm9wZXJ0aWVzLmlkKTsKICAgIH0KICB9CgogIGNsZWFuVXBQcmV2aW91c2x5RHJhZ2dlZFRhYnMoKSB7CiAgICB0aGlzLnRhYkVscy5mb3JFYWNoKHRhYkVsID0+IHRhYkVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Nocm9tZS10YWItd2FzLWp1c3QtZHJhZ2dlZCcpKTsKICB9CgogIHNldHVwRHJhZ2dhYmlsbHkoKSB7CiAgICB2YXIgewogICAgICB0YWJFbHMKICAgIH0gPSB0aGlzOwogICAgdmFyIHsKICAgICAgdGFiUG9zaXRpb25zCiAgICB9ID0gdGhpczsKCiAgICBpZiAodGhpcy5pc0RyYWdnaW5nKSB7CiAgICAgIHRoaXMuaXNEcmFnZ2luZyA9IGZhbHNlOwogICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Nocm9tZS10YWJzLWlzLXNvcnRpbmcnKTsKICAgICAgdGhpcy5kcmFnZ2FiaWxseURyYWdnaW5nLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2hyb21lLXRhYi1pcy1kcmFnZ2luZycpOwogICAgICB0aGlzLmRyYWdnYWJpbGx5RHJhZ2dpbmcuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAnJzsKICAgICAgdGhpcy5kcmFnZ2FiaWxseURyYWdnaW5nLmRyYWdFbmQoKTsKICAgICAgdGhpcy5kcmFnZ2FiaWxseURyYWdnaW5nLmlzRHJhZ2dpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5kcmFnZ2FiaWxseURyYWdnaW5nLnBvc2l0aW9uRHJhZyA9IG5vb3A7IC8vIFByZXZlbnQgRHJhZ2dhYmlsbHkgZnJvbSB1cGRhdGluZyB0YWJFbC5zdHlsZS50cmFuc2Zvcm0gaW4gbGF0ZXIgZnJhbWVzCgogICAgICB0aGlzLmRyYWdnYWJpbGx5RHJhZ2dpbmcuZGVzdHJveSgpOwogICAgICB0aGlzLmRyYWdnYWJpbGx5RHJhZ2dpbmcgPSBudWxsOwogICAgfQoKICAgIHRoaXMuZHJhZ2dhYmlsbGllcy5mb3JFYWNoKGQgPT4gZC5kZXN0cm95KCkpOwogICAgdGFiRWxzLmZvckVhY2goKHRhYkVsLCBvcmlnaW5hbEluZGV4KSA9PiB7CiAgICAgIHZhciBvcmlnaW5hbFRhYlBvc2l0aW9uWCA9IHRhYlBvc2l0aW9uc1tvcmlnaW5hbEluZGV4XTsKICAgICAgdmFyIGRyYWdnYWJpbGx5ID0gbmV3IERyYWdnYWJpbGx5KHRhYkVsLCB7CiAgICAgICAgYXhpczogJ3gnLAogICAgICAgIGhhbmRsZTogJy5jaHJvbWUtdGFiLWRyYWctaGFuZGxlJywKICAgICAgICBjb250YWlubWVudDogdGhpcy50YWJDb250ZW50RWwKICAgICAgfSk7CiAgICAgIHRoaXMuZHJhZ2dhYmlsbGllcy5wdXNoKGRyYWdnYWJpbGx5KTsKICAgICAgZHJhZ2dhYmlsbHkub24oJ3BvaW50ZXJEb3duJywgZXZlbnQgPT4gewogICAgICAgIGlmIChldmVudC5idXR0b24gPT09IDIpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IC8vIHRoaXMuZW1pdCgnb25UYWJDaGFuZ2UnKQoKCiAgICAgICAgcHVibGlzaChtZXNzYWdlLnJvdXRlVGFiQ2hhbmdlKTsKICAgICAgICB0aGlzLnNldEN1cnJlbnRUYWIodGFiRWwpOwogICAgICB9KTsKICAgICAgZHJhZ2dhYmlsbHkub24oJ2RyYWdTdGFydCcsIF8gPT4gewogICAgICAgIHRoaXMuaXNEcmFnZ2luZyA9IHRydWU7CiAgICAgICAgdGhpcy5kcmFnZ2FiaWxseURyYWdnaW5nID0gZHJhZ2dhYmlsbHk7CiAgICAgICAgdGFiRWwuY2xhc3NMaXN0LmFkZCgnY2hyb21lLXRhYi1pcy1kcmFnZ2luZycpOwogICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnY2hyb21lLXRhYnMtaXMtc29ydGluZycpOwogICAgICB9KTsKICAgICAgZHJhZ2dhYmlsbHkub24oJ2RyYWdFbmQnLCAoKSA9PiB7CiAgICAgICAgdGhpcy5pc0RyYWdnaW5nID0gZmFsc2U7CiAgICAgICAgdmFyIGZpbmFsVHJhbnNsYXRlWCA9IHBhcnNlRmxvYXQodGFiRWwuc3R5bGUubGVmdCwgMTApOwogICAgICAgIHRhYkVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAwLCAwKSc7IC8vIEFuaW1hdGUgZHJhZ2dlZCB0YWIgYmFjayBpbnRvIGl0cyBwbGFjZQoKICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gewogICAgICAgICAgdGFiRWwuc3R5bGUubGVmdCA9ICcwJzsKICAgICAgICAgIHRhYkVsLnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUzZCgiLmNvbmNhdChmaW5hbFRyYW5zbGF0ZVgsICJweCwgMCwgMCkiKTsKICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7CiAgICAgICAgICAgIHRhYkVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Nocm9tZS10YWItaXMtZHJhZ2dpbmcnKTsKICAgICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdjaHJvbWUtdGFicy1pcy1zb3J0aW5nJyk7CiAgICAgICAgICAgIHRhYkVsLmNsYXNzTGlzdC5hZGQoJ2Nocm9tZS10YWItd2FzLWp1c3QtZHJhZ2dlZCcpOwogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gewogICAgICAgICAgICAgIHRhYkVsLnN0eWxlLnRyYW5zZm9ybSA9ICcnOwogICAgICAgICAgICAgIHRoaXMubGF5b3V0VGFicygpOwogICAgICAgICAgICAgIHRoaXMuc2V0dXBEcmFnZ2FiaWxseSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgZHJhZ2dhYmlsbHkub24oJ2RyYWdNb3ZlJywgKGV2ZW50LCBwb2ludGVyLCBtb3ZlVmVjdG9yKSA9PiB7CiAgICAgICAgLy8gQ3VycmVudCBpbmRleCBiZSBjb21wdXRlZCB3aXRoaW4gdGhlIGV2ZW50IHNpbmNlIGl0IGNhbiBjaGFuZ2UgZHVyaW5nIHRoZSBkcmFnTW92ZQogICAgICAgIHZhciBjdXJyZW50SW5kZXggPSB0aGlzLnRhYkVscy5pbmRleE9mKHRhYkVsKTsKICAgICAgICB2YXIgY3VycmVudFRhYlBvc2l0aW9uWCA9IG9yaWdpbmFsVGFiUG9zaXRpb25YICsgbW92ZVZlY3Rvci54OwogICAgICAgIHZhciBkZXN0aW5hdGlvbkluZGV4VGFyZ2V0ID0gY2xvc2VzdChjdXJyZW50VGFiUG9zaXRpb25YLCB0YWJQb3NpdGlvbnMpOwogICAgICAgIHZhciBkZXN0aW5hdGlvbkluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy50YWJFbHMubGVuZ3RoLCBkZXN0aW5hdGlvbkluZGV4VGFyZ2V0KSk7CgogICAgICAgIGlmIChjdXJyZW50SW5kZXggIT09IGRlc3RpbmF0aW9uSW5kZXgpIHsKICAgICAgICAgIHRoaXMuYW5pbWF0ZVRhYk1vdmUodGFiRWwsIGN1cnJlbnRJbmRleCwgZGVzdGluYXRpb25JbmRleCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0KCiAgYW5pbWF0ZVRhYk1vdmUodGFiRWwsIG9yaWdpbkluZGV4LCBkZXN0aW5hdGlvbkluZGV4KSB7CiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA8IG9yaWdpbkluZGV4KSB7CiAgICAgIHRhYkVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRhYkVsLCB0aGlzLnRhYkVsc1tkZXN0aW5hdGlvbkluZGV4XSk7CiAgICB9IGVsc2UgewogICAgICB0YWJFbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0YWJFbCwgdGhpcy50YWJFbHNbZGVzdGluYXRpb25JbmRleCArIDFdKTsKICAgIH0KCiAgICB0aGlzLmVtaXQoJ3RhYlJlb3JkZXInLCB7CiAgICAgIHRhYkVsLAogICAgICBvcmlnaW5JbmRleCwKICAgICAgZGVzdGluYXRpb25JbmRleAogICAgfSk7CiAgICB0aGlzLmxheW91dFRhYnMoKTsKICB9Cgp9CgpleHBvcnQgZGVmYXVsdCBDaHJvbWVUYWJzOw=="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/route_tabs/chrome_tabs.js"],"names":["Draggabilly","message","publish","TAB_CONTENT_MARGIN","TAB_CONTENT_OVERLAP_DISTANCE","TAB_CONTENT_MIN_WIDTH","TAB_CONTENT_MAX_WIDTH","TAB_SIZE_SMALL","TAB_SIZE_SMALLER","TAB_SIZE_MINI","noop","_","closest","value","array","temp","Infinity","closestIndex","forEach","v","i","Math","abs","tabTemplate","defaultTapProperties","title","favicon","instanceId","ChromeTabs","constructor","draggabillies","init","el","setAttribute","setupStyleEl","setupEvents","layoutTabs","setupDraggabilly","emit","eventName","data","dispatchEvent","CustomEvent","detail","styleEl","document","createElement","appendChild","window","addEventListener","cleanUpPreviouslyDraggedTabs","tabEls","tabEl","setTabCloseEventListener","Array","prototype","slice","call","querySelectorAll","tabContentEl","querySelector","tabContentWidths","numberOfTabs","length","tabsContentWidth","clientWidth","tabsCumulativeOverlappedWidth","targetWidth","clampedTargetWidth","max","min","flooredClampedTargetWidth","floor","totalTabsWidthUsingTarget","totalExtraWidthDueToFlooring","widths","extraWidthRemaining","extraWidth","push","tabContentPositions","positions","position","width","offset","tabPositions","contentPosition","contentWidth","style","removeAttribute","styleHTML","innerHTML","createNewTabEl","div","firstElementChild","addTab","tabProperties","animate","background","classList","add","setTimeout","remove","Object","assign","isAdd","updateTab","setCurrentTab","activeTabEl","hasActiveTab","changeRoute","removeTab","autoActive","nextElementSibling","previousElementSibling","parentNode","removeChild","textContent","label","faviconEl","backgroundImage","id","isDragging","draggabillyDragging","element","transform","dragEnd","positionDrag","destroy","d","originalIndex","originalTabPositionX","draggabilly","axis","handle","containment","on","event","button","routeTabChange","finalTranslateX","parseFloat","left","requestAnimationFrame","pointer","moveVector","currentIndex","indexOf","currentTabPositionX","x","destinationIndexTarget","destinationIndex","animateTabMove","originIndex","insertBefore"],"mappings":"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","sourcesContent":["import Draggabilly from \"../../assets/scripts/draggabilly\";\nimport { message } from \"../../constants\";\nimport { publish } from \"../../utils/message\";\nconst TAB_CONTENT_MARGIN = 9;\nconst TAB_CONTENT_OVERLAP_DISTANCE = 1;\n// const TAB_OVERLAP_DISTANCE = TAB_CONTENT_MARGIN * 2 + TAB_CONTENT_OVERLAP_DISTANCE\nconst TAB_CONTENT_MIN_WIDTH = 24;\nconst TAB_CONTENT_MAX_WIDTH = 240;\nconst TAB_SIZE_SMALL = 84;\nconst TAB_SIZE_SMALLER = 60;\nconst TAB_SIZE_MINI = 48;\nconst noop = (_) => { };\nconst closest = (value, array) => {\n    let temp = Infinity;\n    let closestIndex = -1;\n    array.forEach((v, i) => {\n        if (Math.abs(value - v) < temp) {\n            temp = Math.abs(value - v);\n            closestIndex = i;\n        }\n    });\n    return closestIndex;\n};\nconst tabTemplate = `\n  <div class=\"chrome-tab\">\n    <div class=\"chrome-tab-dividers\"></div>\n    <div class=\"chrome-tab-background\">\n      <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><defs><symbol id=\"chrome-tab-geometry-left\" viewBox=\"0 0 214 36\"><path d=\"M17 0h197v36H0v-2c4.5 0 9-3.5 9-8V8c0-4.5 3.5-8 8-8z\"/></symbol><symbol id=\"chrome-tab-geometry-right\" viewBox=\"0 0 214 36\"><use xlink:href=\"#chrome-tab-geometry-left\"/></symbol><clipPath id=\"crop\"><rect class=\"mask\" width=\"100%\" height=\"100%\" x=\"0\"/></clipPath></defs><svg width=\"52%\" height=\"100%\"><use xlink:href=\"#chrome-tab-geometry-left\" width=\"214\" height=\"36\" class=\"chrome-tab-geometry\"/></svg><g transform=\"scale(-1, 1)\"><svg width=\"52%\" height=\"100%\" x=\"-100%\" y=\"0\"><use xlink:href=\"#chrome-tab-geometry-right\" width=\"214\" height=\"36\" class=\"chrome-tab-geometry\"/></svg></g></svg>\n    </div>\n    <div class=\"chrome-tab-content\">\n      <div class=\"chrome-tab-favicon\"></div>\n      <div class=\"chrome-tab-title\"></div>\n      <div class=\"chrome-tab-drag-handle\"></div>\n      <div class=\"chrome-tab-close\">\n      <svg\n        viewBox=\"0 0 1024 1024\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        p-id=\"2352\"\n        xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        width=\"200\"\n        height=\"200\"\n      >\n        <path\n          d=\"M518.5815877 469.42879156L240.02576609 190.87364889a34.76142882 34.76142882 0 1 0-49.17520097 49.12971238l278.55446374 278.57822643L190.85056508 797.15913522a34.76142882 34.76142882 0 1 0 49.15279619 49.15211725l278.57822651-278.55446378 278.57822634 278.55446378a34.76142882 34.76142882 0 1 0 49.15211728-49.12903345l-278.55446374-278.60063124 278.55446374-278.55514271a34.76142882 34.76142882 0 1 0-49.15211728-49.15279622L518.60467145 469.42879156z\"\n          p-id=\"2353\"\n        />\n      </svg>\n      </div>\n    </div>\n  </div>\n`;\nconst defaultTapProperties = {\n    title: 'New tab',\n    favicon: false,\n};\nlet instanceId = 0;\nclass ChromeTabs {\n    constructor() {\n        this.draggabillies = [];\n    }\n    init(el) {\n        this.el = el;\n        this.instanceId = instanceId;\n        this.el.setAttribute('data-chrome-tabs-instance-id', this.instanceId);\n        instanceId += 1;\n        this.setupStyleEl();\n        this.setupEvents();\n        this.layoutTabs();\n        this.setupDraggabilly();\n    }\n    emit(eventName, data) {\n        this.el.dispatchEvent(new CustomEvent(eventName, { detail: data }));\n    }\n    setupStyleEl() {\n        this.styleEl = document.createElement('style');\n        this.el.appendChild(this.styleEl);\n    }\n    setupEvents() {\n        window.addEventListener('resize', (_) => {\n            this.cleanUpPreviouslyDraggedTabs();\n            this.layoutTabs();\n        });\n        this.tabEls.forEach((tabEl) => this.setTabCloseEventListener(tabEl));\n    }\n    get tabEls() {\n        return Array.prototype.slice.call(this.el.querySelectorAll('.chrome-tab'));\n    }\n    get tabContentEl() {\n        return this.el.querySelector('.chrome-tabs-content');\n    }\n    get tabContentWidths() {\n        const numberOfTabs = this.tabEls.length;\n        const tabsContentWidth = this.tabContentEl.clientWidth;\n        const tabsCumulativeOverlappedWidth = (numberOfTabs - 1) * TAB_CONTENT_OVERLAP_DISTANCE;\n        const targetWidth = (tabsContentWidth - 2 * TAB_CONTENT_MARGIN + tabsCumulativeOverlappedWidth) / numberOfTabs;\n        const clampedTargetWidth = Math.max(TAB_CONTENT_MIN_WIDTH, Math.min(TAB_CONTENT_MAX_WIDTH, targetWidth));\n        const flooredClampedTargetWidth = Math.floor(clampedTargetWidth);\n        const totalTabsWidthUsingTarget = flooredClampedTargetWidth * numberOfTabs +\n            2 * TAB_CONTENT_MARGIN -\n            tabsCumulativeOverlappedWidth;\n        const totalExtraWidthDueToFlooring = tabsContentWidth - totalTabsWidthUsingTarget;\n        // TODO - Support tabs with different widths / e.g. \"pinned\" tabs\n        const widths = [];\n        let extraWidthRemaining = totalExtraWidthDueToFlooring;\n        for (let i = 0; i < numberOfTabs; i += 1) {\n            const extraWidth = flooredClampedTargetWidth < TAB_CONTENT_MAX_WIDTH && extraWidthRemaining > 0 ? 1 : 0;\n            widths.push(flooredClampedTargetWidth + extraWidth);\n            if (extraWidthRemaining > 0) {\n                extraWidthRemaining -= 1;\n            }\n        }\n        return widths;\n    }\n    get tabContentPositions() {\n        const positions = [];\n        const { tabContentWidths } = this;\n        let position = TAB_CONTENT_MARGIN;\n        tabContentWidths.forEach((width, i) => {\n            const offset = i * TAB_CONTENT_OVERLAP_DISTANCE;\n            positions.push(position - offset);\n            position += width;\n        });\n        return positions;\n    }\n    get tabPositions() {\n        const positions = [];\n        this.tabContentPositions.forEach((contentPosition) => {\n            positions.push(contentPosition - TAB_CONTENT_MARGIN);\n        });\n        return positions;\n    }\n    layoutTabs() {\n        const { tabContentWidths } = this;\n        this.tabEls.forEach((tabEl, i) => {\n            const contentWidth = tabContentWidths[i];\n            const width = contentWidth + 2 * TAB_CONTENT_MARGIN;\n            tabEl.style.width = `${width}px`;\n            tabEl.removeAttribute('is-small');\n            tabEl.removeAttribute('is-smaller');\n            tabEl.removeAttribute('is-mini');\n            if (contentWidth < TAB_SIZE_SMALL) {\n                tabEl.setAttribute('is-small', '');\n            }\n            if (contentWidth < TAB_SIZE_SMALLER) {\n                tabEl.setAttribute('is-smaller', '');\n            }\n            if (contentWidth < TAB_SIZE_MINI) {\n                tabEl.setAttribute('is-mini', '');\n            }\n        });\n        let styleHTML = '';\n        this.tabPositions.forEach((position, i) => {\n            styleHTML += `\n        .chrome-tabs[data-chrome-tabs-instance-id=\"${this.instanceId}\"] .chrome-tab:nth-child(${i +\n                1}) {\n          transform: translate3d(${position}px, 0, 0)\n        }\n      `;\n        });\n        this.styleEl.innerHTML = styleHTML;\n    }\n    createNewTabEl() {\n        const div = document.createElement('div');\n        div.innerHTML = tabTemplate;\n        return div.firstElementChild;\n    }\n    addTab(tabProperties, { animate = false, background = false } = {}) {\n        const tabEl = this.createNewTabEl();\n        if (animate) {\n            tabEl.classList.add('chrome-tab-was-just-added');\n            setTimeout(() => tabEl.classList.remove('chrome-tab-was-just-added'), 500);\n        }\n        tabProperties = Object.assign(Object.assign({ isAdd: true }, defaultTapProperties), tabProperties);\n        this.tabContentEl.appendChild(tabEl);\n        this.setTabCloseEventListener(tabEl);\n        this.updateTab(tabEl, tabProperties);\n        this.emit('tabAdd', { tabEl, tabProperties });\n        if (!background) {\n            this.setCurrentTab(tabEl, tabProperties);\n        }\n        this.cleanUpPreviouslyDraggedTabs();\n        this.layoutTabs();\n        this.setupDraggabilly();\n    }\n    setTabCloseEventListener(tabEl) {\n        tabEl.querySelector('.chrome-tab-close').addEventListener('click', (_) => {\n            this.emit('onTabRemove', { tabEl });\n        });\n    }\n    get activeTabEl() {\n        return this.el.querySelector('.chrome-tab[active]');\n    }\n    hasActiveTab() {\n        return !!this.activeTabEl;\n    }\n    setCurrentTab(tabEl, tabProperties = {}) {\n        const { activeTabEl } = this;\n        if (activeTabEl === tabEl) {\n            return;\n        }\n        if (activeTabEl) {\n            activeTabEl.removeAttribute('active');\n        }\n        tabEl.setAttribute('active', '');\n        this.emit('activeTabChange', {\n            tabEl,\n            tabProperties: Object.assign({ changeRoute: true }, tabProperties),\n        });\n    }\n    removeTab(tabEl, tabProperties = {}) {\n        const { autoActive = true } = tabProperties;\n        if (autoActive && tabEl === this.activeTabEl) {\n            if (tabEl.nextElementSibling) {\n                this.setCurrentTab(tabEl.nextElementSibling, tabProperties);\n            }\n            else if (tabEl.previousElementSibling) {\n                this.setCurrentTab(tabEl.previousElementSibling, tabProperties);\n            }\n        }\n        tabEl.parentNode.removeChild(tabEl);\n        this.emit('tabRemove', { tabEl });\n        this.cleanUpPreviouslyDraggedTabs();\n        this.layoutTabs();\n        this.setupDraggabilly();\n    }\n    updateTab(tabEl, tabProperties) {\n        tabEl.querySelector('.chrome-tab-title').textContent = tabProperties.label;\n        const faviconEl = tabEl.querySelector('.chrome-tab-favicon');\n        if (tabProperties.favicon) {\n            faviconEl.style.backgroundImage = `url('${tabProperties.favicon}')`;\n            faviconEl.removeAttribute('hidden', '');\n        }\n        else {\n            faviconEl.setAttribute('hidden', '');\n            faviconEl.removeAttribute('style');\n        }\n        if (tabProperties.id) {\n            tabEl.setAttribute('data-tab-id', tabProperties.id);\n        }\n    }\n    cleanUpPreviouslyDraggedTabs() {\n        this.tabEls.forEach((tabEl) => tabEl.classList.remove('chrome-tab-was-just-dragged'));\n    }\n    setupDraggabilly() {\n        const { tabEls } = this;\n        const { tabPositions } = this;\n        if (this.isDragging) {\n            this.isDragging = false;\n            this.el.classList.remove('chrome-tabs-is-sorting');\n            this.draggabillyDragging.element.classList.remove('chrome-tab-is-dragging');\n            this.draggabillyDragging.element.style.transform = '';\n            this.draggabillyDragging.dragEnd();\n            this.draggabillyDragging.isDragging = false;\n            this.draggabillyDragging.positionDrag = noop; // Prevent Draggabilly from updating tabEl.style.transform in later frames\n            this.draggabillyDragging.destroy();\n            this.draggabillyDragging = null;\n        }\n        this.draggabillies.forEach((d) => d.destroy());\n        tabEls.forEach((tabEl, originalIndex) => {\n            const originalTabPositionX = tabPositions[originalIndex];\n            const draggabilly = new Draggabilly(tabEl, {\n                axis: 'x',\n                handle: '.chrome-tab-drag-handle',\n                containment: this.tabContentEl,\n            });\n            this.draggabillies.push(draggabilly);\n            draggabilly.on('pointerDown', (event) => {\n                if (event.button === 2) {\n                    return;\n                }\n                // this.emit('onTabChange')\n                publish(message.routeTabChange);\n                this.setCurrentTab(tabEl);\n            });\n            draggabilly.on('dragStart', (_) => {\n                this.isDragging = true;\n                this.draggabillyDragging = draggabilly;\n                tabEl.classList.add('chrome-tab-is-dragging');\n                this.el.classList.add('chrome-tabs-is-sorting');\n            });\n            draggabilly.on('dragEnd', () => {\n                this.isDragging = false;\n                const finalTranslateX = parseFloat(tabEl.style.left, 10);\n                tabEl.style.transform = 'translate3d(0, 0, 0)';\n                // Animate dragged tab back into its place\n                requestAnimationFrame(() => {\n                    tabEl.style.left = '0';\n                    tabEl.style.transform = `translate3d(${finalTranslateX}px, 0, 0)`;\n                    requestAnimationFrame(() => {\n                        tabEl.classList.remove('chrome-tab-is-dragging');\n                        this.el.classList.remove('chrome-tabs-is-sorting');\n                        tabEl.classList.add('chrome-tab-was-just-dragged');\n                        requestAnimationFrame(() => {\n                            tabEl.style.transform = '';\n                            this.layoutTabs();\n                            this.setupDraggabilly();\n                        });\n                    });\n                });\n            });\n            draggabilly.on('dragMove', (event, pointer, moveVector) => {\n                // Current index be computed within the event since it can change during the dragMove\n                const currentIndex = this.tabEls.indexOf(tabEl);\n                const currentTabPositionX = originalTabPositionX + moveVector.x;\n                const destinationIndexTarget = closest(currentTabPositionX, tabPositions);\n                const destinationIndex = Math.max(0, Math.min(this.tabEls.length, destinationIndexTarget));\n                if (currentIndex !== destinationIndex) {\n                    this.animateTabMove(tabEl, currentIndex, destinationIndex);\n                }\n            });\n        });\n    }\n    animateTabMove(tabEl, originIndex, destinationIndex) {\n        if (destinationIndex < originIndex) {\n            tabEl.parentNode.insertBefore(tabEl, this.tabEls[destinationIndex]);\n        }\n        else {\n            tabEl.parentNode.insertBefore(tabEl, this.tabEls[destinationIndex + 1]);\n        }\n        this.emit('tabReorder', { tabEl, originIndex, destinationIndex });\n        this.layoutTabs();\n    }\n}\nexport default ChromeTabs;\n"]}]}