{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\error_boundary\\index.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\error_boundary\\index.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIOmhtemdoua4suafk+mUmeivr+WkhOeQhgogKi8KLy8gaW1wb3J0IHsgdXVpZCB9IGZyb20gJ2FtaXMvbGliL3V0aWxzL2hlbHBlcicKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgYXBwIH0gZnJvbSAiLi4vLi4vYXBwIjsKaW1wb3J0IGxvZ2dlciBmcm9tICIuLi8uLi91dGlscy9sb2dnZXIiOwppbXBvcnQgeyBTdHlsZWRFcnJvclBhZ2UgfSBmcm9tICIuL3N0eWxlZCI7CnZhciBsb2cgPSBsb2dnZXIuZ2V0TG9nZ2VyKCdsaWI6Y29tcG9uZW50czpFcnJvckJvdW5kYXJ5Jyk7CgpjbGFzcyBFcnJvckJvdW5kYXJ5IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHsKICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgc3VwZXIocHJvcHMpOwogICAgdGhpcy5zdGF0ZSA9IHsKICAgICAgaGFzRXJyb3I6IGZhbHNlCiAgICB9OwogIH0KCiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21FcnJvcihlcnJvcikgewogICAgLy8gbG9nLmVycm9yKCdnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3I6JywgZXJyb3IpCiAgICByZXR1cm4gewogICAgICBoYXNFcnJvcjogdHJ1ZSwKICAgICAgZXJyb3IKICAgIH07CiAgfQoKICBjb21wb25lbnREaWRDYXRjaChlcnJvciwgZXJyb3JJbmZvKSB7CiAgICBsb2cuZXJyb3IoJ2NvbXBvbmVudERpZENhdGNoOicsIGVycm9yLCBlcnJvckluZm8pOwogIH0gLy8g5q+P5qyh5pu05paw5riF56m66ZSZ6K+v54q25oCBCgoKICBnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZShfLCBwcmV2U3RhdGUpIHsKICAgIGlmIChwcmV2U3RhdGUuaGFzRXJyb3IpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaGFzRXJyb3I6IGZhbHNlLAogICAgICAgIGVycm9yOiB7fQogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9IC8vIOmhtemdouWGhee7hOS7tuWKoOi9vemUmeivrwoKCiAgcmVuZGVyQ29tcEVycm9yKCkgewogICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAiXHU3RUM0XHU0RUY2XHU5NTE5XHU4QkVGIik7CiAgfSAvLyDpobXpnaLliqDovb3plJnor68KCgogIHJlbmRlclBhZ2VFcnJvcigpIHsKICAgIHZhciB7CiAgICAgIGVycm9yCiAgICB9ID0gdGhpcy5zdGF0ZTsKICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRFcnJvclBhZ2UsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgIGNsYXNzTmFtZTogImlubmVyIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgY2xhc3NOYW1lOiAiZXJyb3ItaW1nIgogICAgfSksIGFwcC5lbnYuaXNSZWxlYXNlID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAiXHU1RjUzXHU1MjREXHU5ODc1XHU5NzYyXHU1M0QxXHU3NTFGXHU5NTE5XHU4QkVGIikgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICBjbGFzc05hbWU6ICJhbGVydCBpbmxpbmUiLAogICAgICByb2xlOiAiYWxlcnQiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaDQiLCB7CiAgICAgIGNsYXNzTmFtZTogImFsZXJ0LWhlYWRpbmciCiAgICB9LCAiXHU1RjUzXHU1MjREXHU5ODc1XHU5NzYyXHU1M0QxXHU3NTFGXHU5NTE5XHU4QkVGIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgZXJyb3IgJiYgZXJyb3IubWVzc2FnZSB8fCAn5pyq55+l5riy5p+T6ZSZ6K+vJyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJociIsIG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsICJcdThCRjdcdTYyNTNcdTVGMDBjb25zb2xlXHU2N0U1XHU3NzBCIikpKSk7CiAgfQoKICByZW5kZXIoKSB7CiAgICB2YXIgewogICAgICBjaGlsZHJlbiwKICAgICAgdHlwZSA9ICdjb21wb25lbnQnCiAgICB9ID0gdGhpcy5wcm9wczsKICAgIHZhciB7CiAgICAgIGhhc0Vycm9yCiAgICB9ID0gdGhpcy5zdGF0ZTsKCiAgICBpZiAoaGFzRXJyb3IpIHsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAncGFnZSc6CiAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJQYWdlRXJyb3IoKTsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlckNvbXBFcnJvcigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGNoaWxkcmVuOwogIH0KCn0gLy8gY29uc3QgRXJyb3JCb3VuZGFyeVdyYXAgPSAocHJvcHM6IFByb3BzKSA9PiB7Ci8vICAgY29uc3QgeyBjaGlsZHJlbiwgdHlwZSB9ID0gcHJvcHMKLy8gICAvLyBob3Tng63mm7TmlrDnjq/looPkuI3lpITnkIYgZXJyb3Lmj5DnpLoKLy8gICBpZiAoKG1vZHVsZSBhcyBhbnkpLmhvdCkgewovLyAgICAgcmV0dXJuIGNoaWxkcmVuCi8vICAgfQovLyAgIHJldHVybiA8RXJyb3JCb3VuZGFyeSB0eXBlPXt0eXBlfT57Y2hpbGRyZW59PC9FcnJvckJvdW5kYXJ5PgovLyB9CgoKZXhwb3J0IGRlZmF1bHQgRXJyb3JCb3VuZGFyeTs="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/error_boundary/index.js"],"names":["React","app","logger","StyledErrorPage","log","getLogger","ErrorBoundary","Component","constructor","props","state","hasError","getDerivedStateFromError","error","componentDidCatch","errorInfo","getSnapshotBeforeUpdate","_","prevState","setState","renderCompError","createElement","renderPageError","className","env","isRelease","role","message","render","children","type"],"mappings":"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","sourcesContent":["/**\n * 页面渲染错误处理\n */\n// import { uuid } from 'amis/lib/utils/helper'\nimport React from 'react';\nimport { app } from \"../../app\";\nimport logger from \"../../utils/logger\";\nimport { StyledErrorPage } from \"./styled\";\nconst log = logger.getLogger('lib:components:ErrorBoundary');\nclass ErrorBoundary extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { hasError: false };\n    }\n    static getDerivedStateFromError(error) {\n        // log.error('getDerivedStateFromError:', error)\n        return { hasError: true, error };\n    }\n    componentDidCatch(error, errorInfo) {\n        log.error('componentDidCatch:', error, errorInfo);\n    }\n    // 每次更新清空错误状态\n    getSnapshotBeforeUpdate(_, prevState) {\n        if (prevState.hasError) {\n            this.setState({\n                hasError: false,\n                error: {},\n            });\n        }\n        return null;\n    }\n    // 页面内组件加载错误\n    renderCompError() {\n        return React.createElement(\"div\", null, \"\\u7EC4\\u4EF6\\u9519\\u8BEF\");\n    }\n    // 页面加载错误\n    renderPageError() {\n        const { error } = this.state;\n        return (React.createElement(StyledErrorPage, null,\n            React.createElement(\"div\", { className: \"inner\" },\n                React.createElement(\"div\", { className: \"error-img\" }),\n                app.env.isRelease ? (React.createElement(\"span\", null, \"\\u5F53\\u524D\\u9875\\u9762\\u53D1\\u751F\\u9519\\u8BEF\")) : (React.createElement(\"div\", { className: \"alert inline\", role: \"alert\" },\n                    React.createElement(\"h4\", { className: \"alert-heading\" }, \"\\u5F53\\u524D\\u9875\\u9762\\u53D1\\u751F\\u9519\\u8BEF\"),\n                    React.createElement(\"p\", null, (error && error.message) || '未知渲染错误'),\n                    React.createElement(\"hr\", null),\n                    React.createElement(\"p\", null, \"\\u8BF7\\u6253\\u5F00console\\u67E5\\u770B\"))))));\n    }\n    render() {\n        const { children, type = 'component' } = this.props;\n        const { hasError } = this.state;\n        if (hasError) {\n            switch (type) {\n                case 'page':\n                    return this.renderPageError();\n                default:\n                    return this.renderCompError();\n            }\n        }\n        return children;\n    }\n}\n// const ErrorBoundaryWrap = (props: Props) => {\n//   const { children, type } = props\n//   // hot热更新环境不处理 error提示\n//   if ((module as any).hot) {\n//     return children\n//   }\n//   return <ErrorBoundary type={type}>{children}</ErrorBoundary>\n// }\nexport default ErrorBoundary;\n"]}]}