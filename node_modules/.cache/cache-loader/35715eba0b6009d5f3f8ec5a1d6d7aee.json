{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--5-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\route_tabs\\cache.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\route_tabs\\cache.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIOi3r+eUseeKtuaAgeaMgeS5heWMlgogKgogKiAxLiDorrDlvZUg5omT5byA552A55qEIOi3r+eUsQogKiAyLiDorrDlvZUgdXJsIOWcsOWdgOWPguaVsAogKi8KaW1wb3J0IHsgdW5pcXVlSWQgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBhcHAgfSBmcm9tICIuLi8uLi9hcHAiOwppbXBvcnQgeyBzdG9yYWdlIH0gZnJvbSAiLi4vLi4vY29uc3RhbnRzIjsKaW1wb3J0IHsgZ2V0U3RvcmUsIHNldFN0b3JlLCBjbGVhclN0b3JlIH0gZnJvbSAiLi4vLi4vdXRpbHMvc3RvcmUiOwpleHBvcnQgdmFyIGNsZWFyQ2FjaGVkVGFicyA9ICgpID0+IHsKICBjbGVhclN0b3JlKHN0b3JhZ2Uucm91dGVUYWJzKTsKfTsKZXhwb3J0IHZhciBjYWNoZVRhYnMgPSBhbGxUYWJzID0+IHsKICB2YXIgbGlzdCA9IFtdOwogIGFsbFRhYnMuZm9yRWFjaCh0YWJFbCA9PiB7CiAgICB2YXIgX2E7CgogICAgdmFyIHsKICAgICAgcGF0aDogcGF0aG5hbWUgPSAnJywKICAgICAgcm9vdDogaXNSb290ID0gJycKICAgIH0gPSB0YWJFbC5kYXRhc2V0OyAvLyA0MDQg5LiN57yT5a2YCgogICAgaWYgKGFwcC5jb25zdGFudHMubm90Rm91bmQucm91dGUgPT09IHBhdGhuYW1lKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgbGFiZWwgPSAoKF9hID0gdGFiRWwucXVlcnlTZWxlY3RvcignLmNocm9tZS10YWItdGl0bGUnKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlubmVySFRNTCkgfHwgJyc7CiAgICB2YXIgaXRlbSA9IHsKICAgICAgcGF0aG5hbWUsCiAgICAgIGxhYmVsLAogICAgICBpZDogdW5pcXVlSWQoKQogICAgfTsKCiAgICBpZiAoaXNSb290KSB7CiAgICAgIGl0ZW0uaXNSb290ID0gdHJ1ZTsKICAgIH0KCiAgICBsaXN0LnB1c2goaXRlbSk7CiAgfSk7CiAgc2V0U3RvcmUoc3RvcmFnZS5yb3V0ZVRhYnMsIGxpc3QpOwp9OyAvLyBUT0RPOiDojrflj5bmnInmlYjnmoQg57yT5a2Y6Lev55SxCgpleHBvcnQgdmFyIGdldFZhbGlkQ2FjaGVUYWJzID0gKCkgPT4gewogIHZhciBsaXN0ID0gZ2V0U3RvcmUoc3RvcmFnZS5yb3V0ZVRhYnMpIHx8IFtdOwogIHJldHVybiBsaXN0Owp9Ow=="},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/route_tabs/cache.js"],"names":["uniqueId","app","storage","getStore","setStore","clearStore","clearCachedTabs","routeTabs","cacheTabs","allTabs","list","forEach","tabEl","_a","path","pathname","root","isRoot","dataset","constants","notFound","route","label","querySelector","innerHTML","item","id","push","getValidCacheTabs"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,QAAT,QAAyB,QAAzB;AACA,SAASC,GAAT,QAAoB,WAApB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,QAAT,EAAmBC,QAAnB,EAA6BC,UAA7B,QAA+C,mBAA/C;AACA,OAAO,IAAMC,eAAe,GAAG,MAAM;AACjCD,EAAAA,UAAU,CAACH,OAAO,CAACK,SAAT,CAAV;AACH,CAFM;AAGP,OAAO,IAAMC,SAAS,GAAIC,OAAD,IAAa;AAClC,MAAMC,IAAI,GAAG,EAAb;AACAD,EAAAA,OAAO,CAACE,OAAR,CAAiBC,KAAD,IAAW;AACvB,QAAIC,EAAJ;;AACA,QAAM;AAAEC,MAAAA,IAAI,EAAEC,QAAQ,GAAG,EAAnB;AAAuBC,MAAAA,IAAI,EAAEC,MAAM,GAAG;AAAtC,QAA6CL,KAAK,CAACM,OAAzD,CAFuB,CAGvB;;AACA,QAAIjB,GAAG,CAACkB,SAAJ,CAAcC,QAAd,CAAuBC,KAAvB,KAAiCN,QAArC,EAA+C;AAC3C;AACH;;AACD,QAAMO,KAAK,GAAG,CAAC,CAACT,EAAE,GAAGD,KAAK,CAACW,aAAN,CAAoB,mBAApB,CAAN,MAAoD,IAApD,IAA4DV,EAAE,KAAK,KAAK,CAAxE,GAA4E,KAAK,CAAjF,GAAqFA,EAAE,CAACW,SAAzF,KAAuG,EAArH;AACA,QAAMC,IAAI,GAAG;AAAEV,MAAAA,QAAF;AAAYO,MAAAA,KAAZ;AAAmBI,MAAAA,EAAE,EAAE1B,QAAQ;AAA/B,KAAb;;AACA,QAAIiB,MAAJ,EAAY;AACRQ,MAAAA,IAAI,CAACR,MAAL,GAAc,IAAd;AACH;;AACDP,IAAAA,IAAI,CAACiB,IAAL,CAAUF,IAAV;AACH,GAbD;AAcArB,EAAAA,QAAQ,CAACF,OAAO,CAACK,SAAT,EAAoBG,IAApB,CAAR;AACH,CAjBM,C,CAkBP;;AACA,OAAO,IAAMkB,iBAAiB,GAAG,MAAM;AACnC,MAAMlB,IAAI,GAAGP,QAAQ,CAACD,OAAO,CAACK,SAAT,CAAR,IAA+B,EAA5C;AACA,SAAOG,IAAP;AACH,CAHM","sourcesContent":["/**\n * 路由状态持久化\n *\n * 1. 记录 打开着的 路由\n * 2. 记录 url 地址参数\n */\nimport { uniqueId } from 'lodash';\nimport { app } from \"../../app\";\nimport { storage } from \"../../constants\";\nimport { getStore, setStore, clearStore } from \"../../utils/store\";\nexport const clearCachedTabs = () => {\n    clearStore(storage.routeTabs);\n};\nexport const cacheTabs = (allTabs) => {\n    const list = [];\n    allTabs.forEach((tabEl) => {\n        var _a;\n        const { path: pathname = '', root: isRoot = '' } = tabEl.dataset;\n        // 404 不缓存\n        if (app.constants.notFound.route === pathname) {\n            return;\n        }\n        const label = ((_a = tabEl.querySelector('.chrome-tab-title')) === null || _a === void 0 ? void 0 : _a.innerHTML) || '';\n        const item = { pathname, label, id: uniqueId() };\n        if (isRoot) {\n            item.isRoot = true;\n        }\n        list.push(item);\n    });\n    setStore(storage.routeTabs, list);\n};\n// TODO: 获取有效的 缓存路由\nexport const getValidCacheTabs = () => {\n    const list = getStore(storage.routeTabs) || [];\n    return list;\n};\n"]}]}