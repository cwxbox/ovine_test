{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\routes\\exports.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\routes\\exports.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCi8qKgogKiDot6/nlLHnm7jlhbPlt6Xlhbflh73mlbAKICogVE9ETzog5re75YqgIHVuaXQgdGVzdAogKi8KdmFyIF9fYXdhaXRlciA9IHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgewogIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZXNvbHZlKHZhbHVlKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZWplY3QoZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgewogICAgICB0cnkgewogICAgICAgIHN0ZXAoZ2VuZXJhdG9yWyJ0aHJvdyJdKHZhbHVlKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZWplY3QoZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgewogICAgICByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsKICAgIH0KCiAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7CiAgfSk7Cn07CgppbXBvcnQgeyBjbG9uZURlZXAsIGdldCwgaXNGdW5jdGlvbiwgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IGFwcCB9IGZyb20gIi4uL2FwcCI7CmltcG9ydCB7IGRlZkxvYWRQYWdlU2NoZW1hLCByb290Um91dGUgfSBmcm9tICIuLi9jb25zdGFudHMiOwppbXBvcnQgbG9nZ2VyIGZyb20gIi4uL3V0aWxzL2xvZ2dlciI7CmltcG9ydCB7IGlzU3ViU3RyLCByZXRyeVByb21pc2UsIGxvYWRTY3JpcHRBc3luYywgZGVzZXJpYWxpemUgfSBmcm9tICIuLi91dGlscy90b29sIjsKdmFyIGxvZyA9IGxvZ2dlci5nZXRMb2dnZXIoJ2xpYjpyb3V0ZXM6ZXhwb3J0cycpOwp2YXIgcmVxdWVzdENvbXBvbmVudCA9ICdyZXF1ZXN0Oi8vcGF0aFRvQ29tcG9uZW50JzsgLy8g6K6h566XIOi3r+eUsSBwYXRoCgpleHBvcnQgZnVuY3Rpb24gZ2V0Um91dGVQYXRoKHBhdGgpIHsKICB2YXIgb3JpZ2luID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICB2YXIgcm91dGVQcmVmaXggPSBhcHAuY29uc3RhbnRzLnJvdXRlUHJlZml4IHx8IHJvb3RSb3V0ZTsKICB2YXIgY3VyclB0aFN0ciA9IGN1cnJQYXRoKHBhdGgpOwogIHZhciBwYXRoU3RyID0gIiIuY29uY2F0KHJvb3RSb3V0ZSkuY29uY2F0KGN1cnJQdGhTdHIpOwogIHZhciB3aXRoQmFzZVVybCA9IGlzU3ViU3RyKHBhdGhTdHIsIHJvdXRlUHJlZml4LCAwKTsKICB2YXIgcm91dGVQYXRoID0gIiIuY29uY2F0KHdpdGhCYXNlVXJsID8gcm9vdFJvdXRlIDogcm91dGVQcmVmaXgpLmNvbmNhdChjdXJyUHRoU3RyKTsKCiAgaWYgKG9yaWdpbikgewogICAgcm91dGVQYXRoID0gcGF0aFN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoIl4iLmNvbmNhdChyb3V0ZVByZWZpeCkpLCByb290Um91dGUpOwogIH0KCiAgcmV0dXJuIHJvdXRlUGF0aDsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0Q3VyclJvdXRlUGF0aCgpIHsKICByZXR1cm4gZ2V0Um91dGVQYXRoKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgdHJ1ZSk7Cn0gLy8g5Yik5pat5piv5ZCm5piv5pys5Zyw5paH5Lu25Zyw5Z2ACgpmdW5jdGlvbiBpc0xvY2FsRmlsZSh1cmwpIHsKICByZXR1cm4gISh1cmwuaW5kZXhPZignOi8vJykgPiAtMSB8fCB1cmwuc3RhcnRzV2l0aCgnLy8nKSk7Cn0gLy8g6I635Y+WIHBhZ2VzIOWGhee7hOS7tuaWh+S7tuWcqOmhueebruWGheacrOWcsOeahOebuOWvuei3r+W+hCDmiJbogIUg6L+c56iL5pyN5Yqh5Zmo6Lev5b6E77yMCgoKZXhwb3J0IGZ1bmN0aW9uIGdldFBhZ2VGaWxlUGF0aChvcHRpb24pIHsKICB2YXIgewogICAgcGF0aFRvQ29tcG9uZW50LAogICAgbm9kZVBhdGggPSAnJywKICAgIHBhdGggPSAnJwogIH0gPSBvcHRpb247IC8vIHBhdGhUb0NvbXBvbmVudCDkuLogcmVxT3B0IOaXtu+8jCDnm7TmjqXov5Tlm54g5LiA5LiqIOWbuuWumuagh+ekuuWtl+espuS4sgoKICBpZiAoaXNQbGFpbk9iamVjdChwYXRoVG9Db21wb25lbnQpICYmIGdldChwYXRoVG9Db21wb25lbnQsICd1cmwnKSkgewogICAgcmV0dXJuIHJlcXVlc3RDb21wb25lbnQ7CiAgfQoKICB2YXIgdXJsID0gdHlwZW9mIHBhdGhUb0NvbXBvbmVudCA9PT0gJ3N0cmluZycgLy8g5Lu75oSP6Lev5b6ECiAgPyBwYXRoVG9Db21wb25lbnQgOiBwYXRoVG9Db21wb25lbnQgPT09IHRydWUgLy8gcGF0aFRvQ29tcG9uZW50IOm7mOiupCDkvb/nlKggbm9kZVBhdGgg5aaC5p6c6K6+572u5Li6IHRydWUs6KGo56S6IOS9v+eUqCAgcGF0aCDot6/lvoQKICA/IHBhdGggfHwgbm9kZVBhdGggOiBub2RlUGF0aCB8fCBwYXRoOyAvLyDmnKzlnLDmlofku7bot6/lvoQKCiAgaWYgKGlzTG9jYWxGaWxlKHVybCkpIHsKICAgIHJldHVybiBjdXJyUGF0aCh1cmwpOwogIH0gLy8g5b2T5YmN5Z+f5ZCN5pyN5Yqh5Zmo5LiL6Lev5b6ECgoKICBpZiAodXJsLnN0YXJ0c1dpdGgoJ3Jvb3Q6Ly8nKSkgewogICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyB1cmwuc3Vic3RyaW5nKDYpOwogIH0gLy8g6L+c56iL5pyN5Yqh5Zmo5LiLIOi3r+W+hAoKCiAgaWYgKHVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHsKICAgIHJldHVybiB1cmw7CiAgfSAvLyDlrr3ms5vljY/orq4KCgogIGlmICh1cmwuc3RhcnRzV2l0aCgnLy8nKSkgewogICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArIHVybDsKICB9CgogIHJldHVybiAnJzsKfSAvLyDojrflj5Yg6aG16Z2i6aKE6K6+5YC844CC6buY6K6k5Li6ICBwYWdlcy94eHgvcHJlc2V0LnRzIOivpeaWh+S7tuaYr+adg+mZkOiuvue9ruW/hemhu+aWh+S7tgoKZXhwb3J0IGZ1bmN0aW9uIGdldFBhZ2VQcmVzZXQob3B0aW9uKSB7CiAgdmFyIF9hOwoKICB2YXIgZmlsZVBhdGggPSBnZXRQYWdlRmlsZVBhdGgob3B0aW9uKTsKCiAgaWYgKCgoX2EgPSBhcHAuYXN5bmNQYWdlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJlc2V0KSAmJiBvcHRpb24ubm9kZVBhdGggJiYgYXBwLmFzeW5jUGFnZS5wcmVzZXRbb3B0aW9uLm5vZGVQYXRoXSkgewogICAgcmV0dXJuIGNsb25lRGVlcChhcHAuYXN5bmNQYWdlLnByZXNldFtvcHRpb24ubm9kZVBhdGhdKTsKICB9IC8vIOWKoOi9veacrOWcsOaWh+S7tgoKCiAgaWYgKGlzTG9jYWxGaWxlKGZpbGVQYXRoKSkgewogICAgdHJ5IHsKICAgICAgLyogd2VicGFja0luY2x1ZGU6IC9wYWdlc1tcXC9dLipbXFwvXXByZXNldFwuW3R8al1zeD8kLyAqLwogICAgICB2YXIgcGFnZVBlc3QgPSByZXF1aXJlKCJ+L3BhZ2VzLyIuY29uY2F0KGZpbGVQYXRoLCAiL3ByZXNldCIpKS5kZWZhdWx0OwoKICAgICAgcmV0dXJuIGlzRnVuY3Rpb24ocGFnZVBlc3QpID8gcGFnZVBlc3Qob3B0aW9uKSA6IHBhZ2VQZXN0OwogICAgfSBjYXRjaCAoZSkgey8vCiAgICB9CiAgfQoKICByZXR1cm4gdW5kZWZpbmVkOwp9IC8vIOiOt+WPliBtb2Nr44CC6buY6K6k5Li6ICBwYWdlcy94eHgvbW9jay50cyDlrZjlnKjor6Xmlofku7bvvIzlsIboh6rliqjms6jlhaVtb2Nr5YiwcHJlc3Tmr4/kuIDkuKogYXBpCgpleHBvcnQgZnVuY3Rpb24gZ2V0UGFnZU1vY2tTb3VyY2Uob3B0aW9uKSB7CiAgdmFyIF9hOwoKICBpZiAoIWFwcC5lbnYuaXNNb2NrKSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KCiAgaWYgKCgoX2EgPSBhcHAuYXN5bmNQYWdlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubW9jaykgJiYgb3B0aW9uLm5vZGVQYXRoICYmIGFwcC5hc3luY1BhZ2UubW9ja1tvcHRpb24ubm9kZVBhdGhdKSB7CiAgICByZXR1cm4gY2xvbmVEZWVwKGFwcC5hc3luY1BhZ2UubW9ja1tvcHRpb24ubm9kZVBhdGhdKTsKICB9CgogIHZhciBmaWxlUGF0aCA9IGdldFBhZ2VGaWxlUGF0aChvcHRpb24pOyAvLyDliqDovb3mnKzlnLDmlofku7YKCiAgaWYgKGlzTG9jYWxGaWxlKGZpbGVQYXRoKSkgewogICAgdHJ5IHsKICAgICAgLyogd2VicGFja0luY2x1ZGU6IC9wYWdlc1tcXC9dLipbXFwvXW1vY2tcLlt0fGpdc3g/JC8gKi8KICAgICAgdmFyIHBhZ2VQZXN0ID0gcmVxdWlyZSgifi9wYWdlcy8iLmNvbmNhdChmaWxlUGF0aCwgIi9tb2NrIikpOwoKICAgICAgcmV0dXJuIHBhZ2VQZXN0LmRlZmF1bHQ7CiAgICB9IGNhdGNoIChlKSB7Ly8KICAgIH0KICB9CgogIHJldHVybiB1bmRlZmluZWQ7Cn0gLy8g5byC5q2l6I635Y+W6aG16Z2i5paH5Lu2CgpleHBvcnQgZnVuY3Rpb24gZ2V0UGFnZUZpbGVBc3luYyhvcHRpb24pIHsKICB2YXIgX2E7CgogIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7CiAgICB2YXIgZmlsZVBhdGggPSBnZXRQYWdlRmlsZVBhdGgob3B0aW9uKTsgLy8gVE9ETzog5pSv5oyB5Lyg5YWlIOmhtemdouWHuumUmSDoh6rlrprkuYkgc2NoZW1h77yM5bm25bCG5rOo5YWl5Y+C5pWwCgogICAgdmFyIHBhZ2VBbGlhcyA9IG9wdGlvbi5ub2RlUGF0aDsgLy8g5Yqg6L295pys5Zyw5paH5Lu2CgogICAgaWYgKGlzTG9jYWxGaWxlKGZpbGVQYXRoKSkgewogICAgICByZXR1cm4gcmV0cnlQcm9taXNlKCgpID0+IGltcG9ydCgKICAgICAgLyogd2VicGFja0luY2x1ZGU6IC9bXFwvXXNyY1tcXC9dcGFnZXNbXFwvXS4qW1xcL11pbmRleFwuW3R8al1zeD8kLyAqLwoKICAgICAgLyogd2VicGFja0NodW5rTmFtZTogInBfW3JlcXVlc3RdIiAqLwogICAgICAifi9wYWdlcy8iLmNvbmNhdChmaWxlUGF0aCwgIi9pbmRleCIpKSk7CiAgICB9CgogICAgaWYgKCFwYWdlQWxpYXMpIHsKICAgICAgcmV0dXJuIGRlZkxvYWRQYWdlU2NoZW1hOwogICAgfQoKICAgIGlmICgoKF9hID0gYXBwLmFzeW5jUGFnZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNjaGVtYSkgJiYgYXBwLmFzeW5jUGFnZS5zY2hlbWFbcGFnZUFsaWFzXSkgewogICAgICByZXR1cm4gY2xvbmVEZWVwKGFwcC5hc3luY1BhZ2Uuc2NoZW1hW3BhZ2VBbGlhc10pOwogICAgfSAvLyDliqjmgIHmuLLmn5PpobXpnaIKCgogICAgcmV0dXJuIHJldHJ5UHJvbWlzZSgoKSA9PiB7CiAgICAgIHZhciBfYTsKCiAgICAgIGFwcC5hc3luY1BhZ2Uuc2NoZW1hID0gKChfYSA9IGFwcC5hc3luY1BhZ2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zY2hlbWEpIHx8IHt9OyAvLyDlvILmraXliqDovb3ohJrmnKzvvIzop4TojIMgd2luZG93Lm92aW5lLmFkZFBhZ2VTY2hlbWFKcyhvcHRpb24ubm9kZVBhdGgsIHtkZWZhdWx0PyxzY2hlbWF9KQoKICAgICAgaWYgKC9cLmpzLy50ZXN0KGZpbGVQYXRoKSkgewogICAgICAgIHJldHVybiBsb2FkU2NyaXB0QXN5bmMoZmlsZVBhdGgpLnRoZW4oKCkgPT4gewogICAgICAgICAgaWYgKCFhcHAuYXN5bmNQYWdlLnNjaGVtYVtwYWdlQWxpYXNdKSB7CiAgICAgICAgICAgIGxvZy5lcnJvcigiUGxlYXNlIGFkZCBwYWdlIHNjaGVtYSBmb3IgXCIiLmNvbmNhdChwYWdlQWxpYXMsICJcIiBieSB1c2luZyAnd2luZG93Lm92aW5lLmFkZFBhZ2VTY2hlbWFKcygpJy4iKSk7CiAgICAgICAgICAgIHJldHVybiBkZWZMb2FkUGFnZVNjaGVtYTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gY2xvbmVEZWVwKGFwcC5hc3luY1BhZ2Uuc2NoZW1hW3BhZ2VBbGlhc10pOwogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBsb2cuZXJyb3IoJ0FuIGVycm9yIG9jY3VycmVkIGJ5IGxvYWQganMgc2NyaXB0cy4nLCBlcnIpOwogICAgICAgICAgcmV0dXJuIGRlZkxvYWRQYWdlU2NoZW1hOwogICAgICAgIH0pOwogICAgICB9IC8vIOaOpeWPo+iOt+WPliAgc2NoZW1hLCDkuI3nvJPlrZjpobXpnaIKCgogICAgICByZXR1cm4gYXBwLnJlcXVlc3QoZmlsZVBhdGggPT09IHJlcXVlc3RDb21wb25lbnQgPyBvcHRpb24ucGF0aFRvQ29tcG9uZW50IDogewogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgdXJsOiBmaWxlUGF0aAogICAgICB9KS50aGVuKChfcmVmKSA9PiB7CiAgICAgICAgdmFyIHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gX3JlZjsKICAgICAgICB2YXIgewogICAgICAgICAgc2NoZW1hOiByZXNTY2hlbWEKICAgICAgICB9ID0gKGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5kYXRhKSB8fCB7fTsKICAgICAgICB2YXIgc2NoZW1hID0gaXNQbGFpbk9iamVjdChyZXNTY2hlbWEpID8gcmVzU2NoZW1hIDogZGVzZXJpYWxpemUocmVzU2NoZW1hIHx8ICcnKTsKCiAgICAgICAgaWYgKCFzY2hlbWEpIHsKICAgICAgICAgIGxvZy5lcnJvcigiUGxlYXNlIGFkZCBwYWdlIHNjaGVtYSBzdHJpbmcgZm9yIFwiIi5jb25jYXQocGFnZUFsaWFzLCAiXCIgYnkgaHR0cCBzZXJ2ZXIgYXBpLiIpKTsKICAgICAgICAgIHJldHVybiBkZWZMb2FkUGFnZVNjaGVtYTsKICAgICAgICB9CgogICAgICAgIHZhciBwYWdlU2NoZW1hID0gewogICAgICAgICAgc2NoZW1hCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gcGFnZVNjaGVtYTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBsb2cuZXJyb3IoJ0FuIGVycm9yIG9jY3VycmVkIHdoZW4gZmV0Y2ggcGFnZSBzY2hlbWEuJywgZXJyKTsKICAgICAgICByZXR1cm4gZGVmTG9hZFBhZ2VTY2hlbWE7CiAgICAgIH0pOwogICAgfSk7CiAgfSk7Cn0gLy8g6I635Y+WIG5vZGVQYXRoCgpleHBvcnQgZnVuY3Rpb24gZ2V0Tm9kZVBhdGgob3B0aW9uKSB7CiAgcmV0dXJuIG9wdGlvbi5ub2RlUGF0aCB8fCBnZXRQYWdlRmlsZVBhdGgob3B0aW9uKTsKfSAvLyDlvZPliY3ot6/lvoQs5Y676Zmk5aSa5L2Z5YmN57yALyzkv53mjIHkuIDoh7TmgKcgIC9sb2dpbiA9PT4gbG9naW4KCmV4cG9ydCBmdW5jdGlvbiBjdXJyUGF0aChwYXRoKSB7CiAgdmFyIGRlZmF1bHRQYXRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJzsKCiAgaWYgKCFwYXRoIHx8IHBhdGggPT09IHJvb3RSb3V0ZSkgewogICAgcmV0dXJuIGRlZmF1bHRQYXRoOwogIH0KCiAgcmV0dXJuICFpc1N1YlN0cihwYXRoLCByb290Um91dGUsIDApID8gcGF0aCA6IHBhdGguc3Vic3RyaW5nKDEpOwp9IC8vIGFtaXMg5a6Y5pa5IOagvOW8j+WMlumhueebruWGhSDpk77mjqUKCmV4cG9ydCB2YXIgbm9ybWFsaXplTGluayA9IG9wdGlvbiA9PiB7CiAgdmFyIHsKICAgIGxvY2F0aW9uOiBsb2MgPSB3aW5kb3cubG9jYXRpb24sCiAgICB0bzogdG9MaW5rCiAgfSA9IG9wdGlvbjsKICB2YXIgbG9jYXRpb24gPSBPYmplY3QuYXNzaWduKHsKICAgIHBhdGhuYW1lOiByb290Um91dGUsCiAgICBzZWFyY2g6ICcnLAogICAgaGFzaDogJycKICB9LCBsb2MpOwogIHZhciB0byA9IHRvTGluayB8fCAnJzsKCiAgaWYgKHRvICYmIHRvWzBdID09PSAnIycpIHsKICAgIHRvID0gbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2ggKyB0bzsKICB9IGVsc2UgaWYgKHRvICYmIHRvWzBdID09PSAnPycpIHsKICAgIHRvID0gbG9jYXRpb24ucGF0aG5hbWUgKyB0bzsKICB9CgogIHZhciBzZWFyY2hJZHggPSB0by5pbmRleE9mKCc/Jyk7CiAgdmFyIGhhc2hJZHggPSB0by5pbmRleE9mKCcjJyk7CiAgdmFyIGlzU2VhcmNoID0gc2VhcmNoSWR4ID4gLTE7CiAgdmFyIGlzSGFzaCA9IGhhc2hJZHggPiAtMTsKICB2YXIgcGF0aG5hbWUgPSBpc1NlYXJjaCA/IHRvLnN1YnN0cmluZygwLCBzZWFyY2hJZHgpIDogaXNIYXNoID8gdG8uc3Vic3RyaW5nKDAsIGhhc2hJZHgpIDogdG87CiAgdmFyIHNlYXJjaCA9IGlzU2VhcmNoID8gdG8uc3Vic3RyaW5nKHNlYXJjaElkeCwgaXNIYXNoID8gaGFzaElkeCA6IHVuZGVmaW5lZCkgOiAnJzsKICB2YXIgaGFzaCA9IGlzSGFzaCA/IHRvLnN1YnN0cmluZyhoYXNoSWR4KSA6IGxvY2F0aW9uLmhhc2g7CgogIGlmICghcGF0aG5hbWUpIHsKICAgIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWU7CiAgfSBlbHNlIGlmIChwYXRobmFtZVswXSAhPT0gcm9vdFJvdXRlICYmICEvXmh0dHBzPzpcL1wvLy50ZXN0KHBhdGhuYW1lKSkgewogICAgdmFyIHJlbGF0aXZlQmFzZSA9IGxvY2F0aW9uLnBhdGhuYW1lOwogICAgdmFyIHBhdGhzID0gcmVsYXRpdmVCYXNlLnNwbGl0KHJvb3RSb3V0ZSk7CiAgICBwYXRocy5wb3AoKTsKICAgIHZhciBtID0gL15cLlwuP1wvLy5leGVjKHBhdGhuYW1lKTsKCiAgICB3aGlsZSAobSkgewogICAgICBpZiAobVswXSA9PT0gJy4uLycpIHsKICAgICAgICBwYXRocy5wb3AoKTsKICAgICAgfQoKICAgICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHJpbmcobVswXS5sZW5ndGgpOwogICAgICBtID0gL15cLlwuP1wvLy5leGVjKHBhdGhuYW1lKTsKICAgIH0KCiAgICBwYXRobmFtZSA9IHBhdGhzLmNvbmNhdChwYXRobmFtZSkuam9pbihyb290Um91dGUpOwogIH0KCiAgcmV0dXJuIHsKICAgIGhyZWY6IHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaCwKICAgIHBhdGhuYW1lLAogICAgc2VhcmNoLAogICAgaGFzaAogIH07Cn07CmV4cG9ydCBmdW5jdGlvbiBqdW1wVG8obGluaykgewogIHZhciBvcHRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogIHZhciB7CiAgICBocmVmCiAgfSA9IG5vcm1hbGl6ZUxpbmsoewogICAgdG86IGxpbmsKICB9KTsKICB2YXIgewogICAgYmxhbmssCiAgICByZXBsYWNlLAogICAgb3JpZ2luID0gdHJ1ZQogIH0gPSBvcHRpb247CgogIGlmICgvXmh0dHBzPzpcL1wvLy50ZXN0KGhyZWYpKSB7CiAgICBpZiAoYmxhbmspIHsKICAgICAgd2luZG93Lm9wZW4oaHJlZiwgJ19ibGFuaycpOwogICAgfSBlbHNlIGlmIChyZXBsYWNlKSB7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGhyZWYpOwogICAgfSBlbHNlIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmOwogICAgfQoKICAgIHJldHVybjsKICB9CgogIGlmIChibGFuaykgewogICAgd2luZG93Lm9wZW4oIiIuY29uY2F0KHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pLmNvbmNhdChocmVmKSwgJ19ibGFuaycpOwogIH0gZWxzZSB7CiAgICB2YXIgbWV0aG9kID0gcmVwbGFjZSA/ICdyZXBsYWNlJyA6ICdwdXNoJzsgLy8gVE9ETzog56Gu5a6a5piv5ZCm5pyJ5LiN6ZyA6KaB5pu/5o2iIHVybCDnmoTlnLrmma8KCiAgICBhcHAucm91dGVySGlzdG9yeVttZXRob2RdKGdldFJvdXRlUGF0aChocmVmLCBvcmlnaW4pKTsKICB9Cn0KOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdCA6IHVuZGVmaW5lZDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoX19hd2FpdGVyLCAiX19hd2FpdGVyIiwgIkM6XFxVc2Vyc1xcY3d4XFxEZXNrdG9wXFxlZGl0b3ItZGVtb1xcbm9kZV9tb2R1bGVzXFxAb3ZpbmVcXGNvcmVcXGxpYlxccm91dGVzXFxleHBvcnRzLmpzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIobG9nLCAibG9nIiwgIkM6XFxVc2Vyc1xcY3d4XFxEZXNrdG9wXFxlZGl0b3ItZGVtb1xcbm9kZV9tb2R1bGVzXFxAb3ZpbmVcXGNvcmVcXGxpYlxccm91dGVzXFxleHBvcnRzLmpzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIocmVxdWVzdENvbXBvbmVudCwgInJlcXVlc3RDb21wb25lbnQiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxyb3V0ZXNcXGV4cG9ydHMuanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihnZXRSb3V0ZVBhdGgsICJnZXRSb3V0ZVBhdGgiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxyb3V0ZXNcXGV4cG9ydHMuanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihnZXRDdXJyUm91dGVQYXRoLCAiZ2V0Q3VyclJvdXRlUGF0aCIsICJDOlxcVXNlcnNcXGN3eFxcRGVza3RvcFxcZWRpdG9yLWRlbW9cXG5vZGVfbW9kdWxlc1xcQG92aW5lXFxjb3JlXFxsaWJcXHJvdXRlc1xcZXhwb3J0cy5qcyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGlzTG9jYWxGaWxlLCAiaXNMb2NhbEZpbGUiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxyb3V0ZXNcXGV4cG9ydHMuanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihnZXRQYWdlRmlsZVBhdGgsICJnZXRQYWdlRmlsZVBhdGgiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxyb3V0ZXNcXGV4cG9ydHMuanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihnZXRQYWdlUHJlc2V0LCAiZ2V0UGFnZVByZXNldCIsICJDOlxcVXNlcnNcXGN3eFxcRGVza3RvcFxcZWRpdG9yLWRlbW9cXG5vZGVfbW9kdWxlc1xcQG92aW5lXFxjb3JlXFxsaWJcXHJvdXRlc1xcZXhwb3J0cy5qcyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGdldFBhZ2VNb2NrU291cmNlLCAiZ2V0UGFnZU1vY2tTb3VyY2UiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxyb3V0ZXNcXGV4cG9ydHMuanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihnZXRQYWdlRmlsZUFzeW5jLCAiZ2V0UGFnZUZpbGVBc3luYyIsICJDOlxcVXNlcnNcXGN3eFxcRGVza3RvcFxcZWRpdG9yLWRlbW9cXG5vZGVfbW9kdWxlc1xcQG92aW5lXFxjb3JlXFxsaWJcXHJvdXRlc1xcZXhwb3J0cy5qcyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGdldE5vZGVQYXRoLCAiZ2V0Tm9kZVBhdGgiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxyb3V0ZXNcXGV4cG9ydHMuanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihjdXJyUGF0aCwgImN1cnJQYXRoIiwgIkM6XFxVc2Vyc1xcY3d4XFxEZXNrdG9wXFxlZGl0b3ItZGVtb1xcbm9kZV9tb2R1bGVzXFxAb3ZpbmVcXGNvcmVcXGxpYlxccm91dGVzXFxleHBvcnRzLmpzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIobm9ybWFsaXplTGluaywgIm5vcm1hbGl6ZUxpbmsiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxyb3V0ZXNcXGV4cG9ydHMuanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihqdW1wVG8sICJqdW1wVG8iLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxyb3V0ZXNcXGV4cG9ydHMuanMiKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmxlYXZlTW9kdWxlIDogdW5kZWZpbmVkOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/routes/exports.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","cloneDeep","get","isFunction","isPlainObject","app","defLoadPageSchema","rootRoute","logger","isSubStr","retryPromise","loadScriptAsync","deserialize","log","getLogger","requestComponent","getRoutePath","path","origin","routePrefix","constants","currPthStr","currPath","pathStr","withBaseUrl","routePath","replace","RegExp","getCurrRoutePath","window","location","pathname","isLocalFile","url","indexOf","startsWith","getPageFilePath","option","pathToComponent","nodePath","substring","protocol","getPagePreset","_a","filePath","asyncPage","preset","pagePest","require","default","undefined","getPageMockSource","env","isMock","mock","getPageFileAsync","pageAlias","schema","test","error","catch","err","request","method","data","resSchema","pageSchema","getNodePath","defaultPath","normalizeLink","loc","to","toLink","Object","assign","search","hash","searchIdx","hashIdx","isSearch","isHash","relativeBase","paths","split","pop","m","exec","length","concat","join","href","jumpTo","link","blank","open","routerHistory"],"mappings":"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","sourcesContent":["/**\n * 路由相关工具函数\n * TODO: 添加 unit test\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { cloneDeep, get, isFunction, isPlainObject } from 'lodash';\nimport { app } from \"../app\";\nimport { defLoadPageSchema, rootRoute } from \"../constants\";\nimport logger from \"../utils/logger\";\nimport { isSubStr, retryPromise, loadScriptAsync, deserialize } from \"../utils/tool\";\nconst log = logger.getLogger('lib:routes:exports');\nconst requestComponent = 'request://pathToComponent';\n// 计算 路由 path\nexport function getRoutePath(path, origin = false) {\n    const routePrefix = app.constants.routePrefix || rootRoute;\n    const currPthStr = currPath(path);\n    const pathStr = `${rootRoute}${currPthStr}`;\n    const withBaseUrl = isSubStr(pathStr, routePrefix, 0);\n    let routePath = `${withBaseUrl ? rootRoute : routePrefix}${currPthStr}`;\n    if (origin) {\n        routePath = pathStr.replace(new RegExp(`^${routePrefix}`), rootRoute);\n    }\n    return routePath;\n}\nexport function getCurrRoutePath() {\n    return getRoutePath(window.location.pathname, true);\n}\n// 判断是否是本地文件地址\nfunction isLocalFile(url) {\n    return !(url.indexOf('://') > -1 || url.startsWith('//'));\n}\n// 获取 pages 内组件文件在项目内本地的相对路径 或者 远程服务器路径，\nexport function getPageFilePath(option) {\n    const { pathToComponent, nodePath = '', path = '' } = option;\n    // pathToComponent 为 reqOpt 时， 直接返回 一个 固定标示字符串\n    if (isPlainObject(pathToComponent) && get(pathToComponent, 'url')) {\n        return requestComponent;\n    }\n    const url = typeof pathToComponent === 'string' // 任意路径\n        ? pathToComponent\n        : pathToComponent === true // pathToComponent 默认 使用 nodePath 如果设置为 true,表示 使用  path 路径\n            ? path || nodePath\n            : nodePath || path;\n    // 本地文件路径\n    if (isLocalFile(url)) {\n        return currPath(url);\n    }\n    // 当前域名服务器下路径\n    if (url.startsWith('root://')) {\n        return window.location.origin + url.substring(6);\n    }\n    // 远程服务器下 路径\n    if (url.startsWith('http://') || url.startsWith('https://')) {\n        return url;\n    }\n    // 宽泛协议\n    if (url.startsWith('//')) {\n        return window.location.protocol + url;\n    }\n    return '';\n}\n// 获取 页面预设值。默认为  pages/xxx/preset.ts 该文件是权限设置必须文件\nexport function getPagePreset(option) {\n    var _a;\n    const filePath = getPageFilePath(option);\n    if (((_a = app.asyncPage) === null || _a === void 0 ? void 0 : _a.preset) && option.nodePath && app.asyncPage.preset[option.nodePath]) {\n        return cloneDeep(app.asyncPage.preset[option.nodePath]);\n    }\n    // 加载本地文件\n    if (isLocalFile(filePath)) {\n        try {\n            /* webpackInclude: /pages[\\\\/].*[\\\\/]preset\\.[t|j]sx?$/ */\n            const pagePest = require(`~/pages/${filePath}/preset`).default;\n            return isFunction(pagePest) ? pagePest(option) : pagePest;\n        }\n        catch (e) {\n            //\n        }\n    }\n    return undefined;\n}\n// 获取 mock。默认为  pages/xxx/mock.ts 存在该文件，将自动注入mock到prest每一个 api\nexport function getPageMockSource(option) {\n    var _a;\n    if (!app.env.isMock) {\n        return undefined;\n    }\n    if (((_a = app.asyncPage) === null || _a === void 0 ? void 0 : _a.mock) && option.nodePath && app.asyncPage.mock[option.nodePath]) {\n        return cloneDeep(app.asyncPage.mock[option.nodePath]);\n    }\n    const filePath = getPageFilePath(option);\n    // 加载本地文件\n    if (isLocalFile(filePath)) {\n        try {\n            /* webpackInclude: /pages[\\\\/].*[\\\\/]mock\\.[t|j]sx?$/ */\n            const pagePest = require(`~/pages/${filePath}/mock`);\n            return pagePest.default;\n        }\n        catch (e) {\n            //\n        }\n    }\n    return undefined;\n}\n// 异步获取页面文件\nexport function getPageFileAsync(option) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const filePath = getPageFilePath(option);\n        // TODO: 支持传入 页面出错 自定义 schema，并将注入参数\n        const pageAlias = option.nodePath;\n        // 加载本地文件\n        if (isLocalFile(filePath)) {\n            return retryPromise(() => import(\n            /* webpackInclude: /[\\\\/]src[\\\\/]pages[\\\\/].*[\\\\/]index\\.[t|j]sx?$/ */\n            /* webpackChunkName: \"p_[request]\" */\n            `~/pages/${filePath}/index`));\n        }\n        if (!pageAlias) {\n            return defLoadPageSchema;\n        }\n        if (((_a = app.asyncPage) === null || _a === void 0 ? void 0 : _a.schema) && app.asyncPage.schema[pageAlias]) {\n            return cloneDeep(app.asyncPage.schema[pageAlias]);\n        }\n        // 动态渲染页面\n        return retryPromise(() => {\n            var _a;\n            app.asyncPage.schema = ((_a = app.asyncPage) === null || _a === void 0 ? void 0 : _a.schema) || {};\n            // 异步加载脚本，规范 window.ovine.addPageSchemaJs(option.nodePath, {default?,schema})\n            if (/\\.js/.test(filePath)) {\n                return loadScriptAsync(filePath)\n                    .then(() => {\n                    if (!app.asyncPage.schema[pageAlias]) {\n                        log.error(`Please add page schema for \"${pageAlias}\" by using 'window.ovine.addPageSchemaJs()'.`);\n                        return defLoadPageSchema;\n                    }\n                    return cloneDeep(app.asyncPage.schema[pageAlias]);\n                })\n                    .catch((err) => {\n                    log.error('An error occurred by load js scripts.', err);\n                    return defLoadPageSchema;\n                });\n            }\n            // 接口获取  schema, 不缓存页面\n            return app\n                .request(filePath === requestComponent\n                ? option.pathToComponent\n                : {\n                    method: 'GET',\n                    url: filePath,\n                })\n                .then(({ data }) => {\n                const { schema: resSchema } = (data === null || data === void 0 ? void 0 : data.data) || {};\n                const schema = isPlainObject(resSchema) ? resSchema : deserialize(resSchema || '');\n                if (!schema) {\n                    log.error(`Please add page schema string for \"${pageAlias}\" by http server api.`);\n                    return defLoadPageSchema;\n                }\n                const pageSchema = { schema };\n                return pageSchema;\n            })\n                .catch((err) => {\n                log.error('An error occurred when fetch page schema.', err);\n                return defLoadPageSchema;\n            });\n        });\n    });\n}\n// 获取 nodePath\nexport function getNodePath(option) {\n    return option.nodePath || getPageFilePath(option);\n}\n// 当前路径,去除多余前缀/,保持一致性  /login ==> login\nexport function currPath(path, defaultPath = '') {\n    if (!path || path === rootRoute) {\n        return defaultPath;\n    }\n    return !isSubStr(path, rootRoute, 0) ? path : path.substring(1);\n}\n// amis 官方 格式化项目内 链接\nexport const normalizeLink = (option) => {\n    const { location: loc = window.location, to: toLink } = option;\n    const location = Object.assign({ pathname: rootRoute, search: '', hash: '' }, loc);\n    let to = toLink || '';\n    if (to && to[0] === '#') {\n        to = location.pathname + location.search + to;\n    }\n    else if (to && to[0] === '?') {\n        to = location.pathname + to;\n    }\n    const searchIdx = to.indexOf('?');\n    const hashIdx = to.indexOf('#');\n    const isSearch = searchIdx > -1;\n    const isHash = hashIdx > -1;\n    let pathname = isSearch ? to.substring(0, searchIdx) : isHash ? to.substring(0, hashIdx) : to;\n    const search = isSearch ? to.substring(searchIdx, isHash ? hashIdx : undefined) : '';\n    const hash = isHash ? to.substring(hashIdx) : location.hash;\n    if (!pathname) {\n        pathname = location.pathname;\n    }\n    else if (pathname[0] !== rootRoute && !/^https?:\\/\\//.test(pathname)) {\n        const relativeBase = location.pathname;\n        const paths = relativeBase.split(rootRoute);\n        paths.pop();\n        let m = /^\\.\\.?\\//.exec(pathname);\n        while (m) {\n            if (m[0] === '../') {\n                paths.pop();\n            }\n            pathname = pathname.substring(m[0].length);\n            m = /^\\.\\.?\\//.exec(pathname);\n        }\n        pathname = paths.concat(pathname).join(rootRoute);\n    }\n    return {\n        href: pathname + search + hash,\n        pathname,\n        search,\n        hash,\n    };\n};\nexport function jumpTo(link, option = {}) {\n    const { href } = normalizeLink({ to: link });\n    const { blank, replace, origin = true } = option;\n    if (/^https?:\\/\\//.test(href)) {\n        if (blank) {\n            window.open(href, '_blank');\n        }\n        else if (replace) {\n            window.location.replace(href);\n        }\n        else {\n            window.location.href = href;\n        }\n        return;\n    }\n    if (blank) {\n        window.open(`${window.location.origin}${href}`, '_blank');\n    }\n    else {\n        const method = replace ? 'replace' : 'push';\n        // TODO: 确定是否有不需要替换 url 的场景\n        app.routerHistory[method](getRoutePath(href, origin));\n    }\n}\n"]}]}