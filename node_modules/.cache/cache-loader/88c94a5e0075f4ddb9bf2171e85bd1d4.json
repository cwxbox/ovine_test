{"remainingRequest":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\error_boundary\\index.js","dependencies":[{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\@ovine\\core\\lib\\components\\error_boundary\\index.js","mtime":1618319234665},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616400859944},{"path":"C:\\Users\\cwx\\Desktop\\editor-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1617798315061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQuc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCi8qKgogKiDpobXpnaLmuLLmn5PplJnor6/lpITnkIYKICovCi8vIGltcG9ydCB7IHV1aWQgfSBmcm9tICdhbWlzL2xpYi91dGlscy9oZWxwZXInCmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IGFwcCB9IGZyb20gIi4uLy4uL2FwcCI7CmltcG9ydCBsb2dnZXIgZnJvbSAiLi4vLi4vdXRpbHMvbG9nZ2VyIjsKaW1wb3J0IHsgU3R5bGVkRXJyb3JQYWdlIH0gZnJvbSAiLi9zdHlsZWQiOwp2YXIgbG9nID0gbG9nZ2VyLmdldExvZ2dlcignbGliOmNvbXBvbmVudHM6RXJyb3JCb3VuZGFyeScpOwoKY2xhc3MgRXJyb3JCb3VuZGFyeSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7CiAgY29uc3RydWN0b3IocHJvcHMpIHsKICAgIHN1cGVyKHByb3BzKTsKICAgIHRoaXMuc3RhdGUgPSB7CiAgICAgIGhhc0Vycm9yOiBmYWxzZQogICAgfTsKICB9CgogIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoZXJyb3IpIHsKICAgIC8vIGxvZy5lcnJvcignZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yOicsIGVycm9yKQogICAgcmV0dXJuIHsKICAgICAgaGFzRXJyb3I6IHRydWUsCiAgICAgIGVycm9yCiAgICB9OwogIH0KCiAgY29tcG9uZW50RGlkQ2F0Y2goZXJyb3IsIGVycm9ySW5mbykgewogICAgbG9nLmVycm9yKCdjb21wb25lbnREaWRDYXRjaDonLCBlcnJvciwgZXJyb3JJbmZvKTsKICB9IC8vIOavj+asoeabtOaWsOa4heepuumUmeivr+eKtuaAgQoKCiAgZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoXywgcHJldlN0YXRlKSB7CiAgICBpZiAocHJldlN0YXRlLmhhc0Vycm9yKSB7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIGhhc0Vycm9yOiBmYWxzZSwKICAgICAgICBlcnJvcjoge30KICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfSAvLyDpobXpnaLlhoXnu4Tku7bliqDovb3plJnor68KCgogIHJlbmRlckNvbXBFcnJvcigpIHsKICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgIlx1N0VDNFx1NEVGNlx1OTUxOVx1OEJFRiIpOwogIH0gLy8g6aG16Z2i5Yqg6L296ZSZ6K+vCgoKICByZW5kZXJQYWdlRXJyb3IoKSB7CiAgICB2YXIgewogICAgICBlcnJvcgogICAgfSA9IHRoaXMuc3RhdGU7CiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkRXJyb3JQYWdlLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICBjbGFzc05hbWU6ICJpbm5lciIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgIGNsYXNzTmFtZTogImVycm9yLWltZyIKICAgIH0pLCBhcHAuZW52LmlzUmVsZWFzZSA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgIlx1NUY1M1x1NTI0RFx1OTg3NVx1OTc2Mlx1NTNEMVx1NzUxRlx1OTUxOVx1OEJFRiIpIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgY2xhc3NOYW1lOiAiYWxlcnQgaW5saW5lIiwKICAgICAgcm9sZTogImFsZXJ0IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImg0IiwgewogICAgICBjbGFzc05hbWU6ICJhbGVydC1oZWFkaW5nIgogICAgfSwgIlx1NUY1M1x1NTI0RFx1OTg3NVx1OTc2Mlx1NTNEMVx1NzUxRlx1OTUxOVx1OEJFRiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIGVycm9yICYmIGVycm9yLm1lc3NhZ2UgfHwgJ+acquefpea4suafk+mUmeivrycpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaHIiLCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCAiXHU4QkY3XHU2MjUzXHU1RjAwY29uc29sZVx1NjdFNVx1NzcwQiIpKSkpOwogIH0KCiAgcmVuZGVyKCkgewogICAgdmFyIHsKICAgICAgY2hpbGRyZW4sCiAgICAgIHR5cGUgPSAnY29tcG9uZW50JwogICAgfSA9IHRoaXMucHJvcHM7CiAgICB2YXIgewogICAgICBoYXNFcnJvcgogICAgfSA9IHRoaXMuc3RhdGU7CgogICAgaWYgKGhhc0Vycm9yKSB7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgJ3BhZ2UnOgogICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUGFnZUVycm9yKCk7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJDb21wRXJyb3IoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBjaGlsZHJlbjsKICB9CgogIC8vIEB0cy1pZ25vcmUKICBfX3JlYWN0c3RhbmRpbl9fcmVnZW5lcmF0ZUJ5RXZhbChrZXksIGNvZGUpIHsKICAgIC8vIEB0cy1pZ25vcmUKICAgIHRoaXNba2V5XSA9IGV2YWwoY29kZSk7CiAgfQoKfSAvLyBjb25zdCBFcnJvckJvdW5kYXJ5V3JhcCA9IChwcm9wczogUHJvcHMpID0+IHsKLy8gICBjb25zdCB7IGNoaWxkcmVuLCB0eXBlIH0gPSBwcm9wcwovLyAgIC8vIGhvdOeDreabtOaWsOeOr+Wig+S4jeWkhOeQhiBlcnJvcuaPkOekugovLyAgIGlmICgobW9kdWxlIGFzIGFueSkuaG90KSB7Ci8vICAgICByZXR1cm4gY2hpbGRyZW4KLy8gICB9Ci8vICAgcmV0dXJuIDxFcnJvckJvdW5kYXJ5IHR5cGU9e3R5cGV9PntjaGlsZHJlbn08L0Vycm9yQm91bmRhcnk+Ci8vIH0KCgp2YXIgX2RlZmF1bHQgPSBFcnJvckJvdW5kYXJ5OwpleHBvcnQgZGVmYXVsdCBfZGVmYXVsdDsKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgcmVhY3RIb3RMb2FkZXIgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdCA6IHVuZGVmaW5lZDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIobG9nLCAibG9nIiwgIkM6XFxVc2Vyc1xcY3d4XFxEZXNrdG9wXFxlZGl0b3ItZGVtb1xcbm9kZV9tb2R1bGVzXFxAb3ZpbmVcXGNvcmVcXGxpYlxcY29tcG9uZW50c1xcZXJyb3JfYm91bmRhcnlcXGluZGV4LmpzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoRXJyb3JCb3VuZGFyeSwgIkVycm9yQm91bmRhcnkiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxlcnJvcl9ib3VuZGFyeVxcaW5kZXguanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihfZGVmYXVsdCwgImRlZmF1bHQiLCAiQzpcXFVzZXJzXFxjd3hcXERlc2t0b3BcXGVkaXRvci1kZW1vXFxub2RlX21vZHVsZXNcXEBvdmluZVxcY29yZVxcbGliXFxjb21wb25lbnRzXFxlcnJvcl9ib3VuZGFyeVxcaW5kZXguanMiKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmxlYXZlTW9kdWxlIDogdW5kZWZpbmVkOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["C:/Users/cwx/Desktop/editor-demo/node_modules/@ovine/core/lib/components/error_boundary/index.js"],"names":["React","app","logger","StyledErrorPage","log","getLogger","ErrorBoundary","Component","constructor","props","state","hasError","getDerivedStateFromError","error","componentDidCatch","errorInfo","getSnapshotBeforeUpdate","_","prevState","setState","renderCompError","createElement","renderPageError","className","env","isRelease","role","message","render","children","type"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,QAAoB,WAApB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,SAASC,eAAT,QAAgC,UAAhC;AACA,IAAMC,GAAG,GAAGF,MAAM,CAACG,SAAP,CAAiB,8BAAjB,CAAZ;;AACA,MAAMC,aAAN,SAA4BN,KAAK,CAACO,SAAlC,CAA4C;AACxCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAb;AACH;;AAC8B,SAAxBC,wBAAwB,CAACC,KAAD,EAAQ;AACnC;AACA,WAAO;AAAEF,MAAAA,QAAQ,EAAE,IAAZ;AAAkBE,MAAAA;AAAlB,KAAP;AACH;;AACDC,EAAAA,iBAAiB,CAACD,KAAD,EAAQE,SAAR,EAAmB;AAChCX,IAAAA,GAAG,CAACS,KAAJ,CAAU,oBAAV,EAAgCA,KAAhC,EAAuCE,SAAvC;AACH,GAXuC,CAYxC;;;AACAC,EAAAA,uBAAuB,CAACC,CAAD,EAAIC,SAAJ,EAAe;AAClC,QAAIA,SAAS,CAACP,QAAd,EAAwB;AACpB,WAAKQ,QAAL,CAAc;AACVR,QAAAA,QAAQ,EAAE,KADA;AAEVE,QAAAA,KAAK,EAAE;AAFG,OAAd;AAIH;;AACD,WAAO,IAAP;AACH,GArBuC,CAsBxC;;;AACAO,EAAAA,eAAe,GAAG;AACd,wBAAOpB,KAAK,CAACqB,aAAN,CAAoB,KAApB,EAA2B,IAA3B,EAAiC,0BAAjC,CAAP;AACH,GAzBuC,CA0BxC;;;AACAC,EAAAA,eAAe,GAAG;AACd,QAAM;AAAET,MAAAA;AAAF,QAAY,KAAKH,KAAvB;AACA,wBAAQV,KAAK,CAACqB,aAAN,CAAoBlB,eAApB,EAAqC,IAArC,eACJH,KAAK,CAACqB,aAAN,CAAoB,KAApB,EAA2B;AAAEE,MAAAA,SAAS,EAAE;AAAb,KAA3B,eACIvB,KAAK,CAACqB,aAAN,CAAoB,KAApB,EAA2B;AAAEE,MAAAA,SAAS,EAAE;AAAb,KAA3B,CADJ,EAEItB,GAAG,CAACuB,GAAJ,CAAQC,SAAR,gBAAqBzB,KAAK,CAACqB,aAAN,CAAoB,MAApB,EAA4B,IAA5B,EAAkC,kDAAlC,CAArB,gBAA+GrB,KAAK,CAACqB,aAAN,CAAoB,KAApB,EAA2B;AAAEE,MAAAA,SAAS,EAAE,cAAb;AAA6BG,MAAAA,IAAI,EAAE;AAAnC,KAA3B,eAC3G1B,KAAK,CAACqB,aAAN,CAAoB,IAApB,EAA0B;AAAEE,MAAAA,SAAS,EAAE;AAAb,KAA1B,EAA0D,kDAA1D,CAD2G,eAE3GvB,KAAK,CAACqB,aAAN,CAAoB,GAApB,EAAyB,IAAzB,EAAgCR,KAAK,IAAIA,KAAK,CAACc,OAAhB,IAA4B,QAA3D,CAF2G,eAG3G3B,KAAK,CAACqB,aAAN,CAAoB,IAApB,EAA0B,IAA1B,CAH2G,eAI3GrB,KAAK,CAACqB,aAAN,CAAoB,GAApB,EAAyB,IAAzB,EAA+B,uCAA/B,CAJ2G,CAFnH,CADI,CAAR;AAQH;;AACDO,EAAAA,MAAM,GAAG;AACL,QAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA,IAAI,GAAG;AAAnB,QAAmC,KAAKrB,KAA9C;AACA,QAAM;AAAEE,MAAAA;AAAF,QAAe,KAAKD,KAA1B;;AACA,QAAIC,QAAJ,EAAc;AACV,cAAQmB,IAAR;AACI,aAAK,MAAL;AACI,iBAAO,KAAKR,eAAL,EAAP;;AACJ;AACI,iBAAO,KAAKF,eAAL,EAAP;AAJR;AAMH;;AACD,WAAOS,QAAP;AACH;;AAlDuC;AAAA;AAAA;AAAA;AAAA;;AAAA,C,CAoD5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;eACevB,a;AAAf;;;;;;;;;;0BA7DMF,G;0BACAE,a","sourcesContent":["/**\n * 页面渲染错误处理\n */\n// import { uuid } from 'amis/lib/utils/helper'\nimport React from 'react';\nimport { app } from \"../../app\";\nimport logger from \"../../utils/logger\";\nimport { StyledErrorPage } from \"./styled\";\nconst log = logger.getLogger('lib:components:ErrorBoundary');\nclass ErrorBoundary extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { hasError: false };\n    }\n    static getDerivedStateFromError(error) {\n        // log.error('getDerivedStateFromError:', error)\n        return { hasError: true, error };\n    }\n    componentDidCatch(error, errorInfo) {\n        log.error('componentDidCatch:', error, errorInfo);\n    }\n    // 每次更新清空错误状态\n    getSnapshotBeforeUpdate(_, prevState) {\n        if (prevState.hasError) {\n            this.setState({\n                hasError: false,\n                error: {},\n            });\n        }\n        return null;\n    }\n    // 页面内组件加载错误\n    renderCompError() {\n        return React.createElement(\"div\", null, \"\\u7EC4\\u4EF6\\u9519\\u8BEF\");\n    }\n    // 页面加载错误\n    renderPageError() {\n        const { error } = this.state;\n        return (React.createElement(StyledErrorPage, null,\n            React.createElement(\"div\", { className: \"inner\" },\n                React.createElement(\"div\", { className: \"error-img\" }),\n                app.env.isRelease ? (React.createElement(\"span\", null, \"\\u5F53\\u524D\\u9875\\u9762\\u53D1\\u751F\\u9519\\u8BEF\")) : (React.createElement(\"div\", { className: \"alert inline\", role: \"alert\" },\n                    React.createElement(\"h4\", { className: \"alert-heading\" }, \"\\u5F53\\u524D\\u9875\\u9762\\u53D1\\u751F\\u9519\\u8BEF\"),\n                    React.createElement(\"p\", null, (error && error.message) || '未知渲染错误'),\n                    React.createElement(\"hr\", null),\n                    React.createElement(\"p\", null, \"\\u8BF7\\u6253\\u5F00console\\u67E5\\u770B\"))))));\n    }\n    render() {\n        const { children, type = 'component' } = this.props;\n        const { hasError } = this.state;\n        if (hasError) {\n            switch (type) {\n                case 'page':\n                    return this.renderPageError();\n                default:\n                    return this.renderCompError();\n            }\n        }\n        return children;\n    }\n}\n// const ErrorBoundaryWrap = (props: Props) => {\n//   const { children, type } = props\n//   // hot热更新环境不处理 error提示\n//   if ((module as any).hot) {\n//     return children\n//   }\n//   return <ErrorBoundary type={type}>{children}</ErrorBoundary>\n// }\nexport default ErrorBoundary;\n"]}]}